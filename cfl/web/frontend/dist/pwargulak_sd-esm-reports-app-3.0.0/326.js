"use strict";(globalThis.webpackChunk_pwargulak_sd_esm_reports_app=globalThis.webpackChunk_pwargulak_sd_esm_reports_app||[]).push([[326,90],{9880:(e,r,t)=>{t.d(r,{Z:()=>u});var n=t(7537),o=t.n(n),a=t(3645),l=t.n(a)()(o());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-reports__run-report-form__tablet___DC02F{padding:1.5rem 1rem;background-color:#fff}.-esm-reports__run-report-form__desktop___AtJjF{padding:0rem}.-esm-reports__run-report-form__desktopRunReport___yG5Ji{background-color:#fff;display:flex;flex-direction:column;justify-content:space-between}.-esm-reports__run-report-form__runReportInnerDivElement___QCl3v{display:flex;padding:16px;flex-direction:column;align-items:flex-start;gap:16px}.-esm-reports__run-report-form__basicInputElement___MvN1O{width:300px;height:30px;margin-bottom:30px}.-esm-reports__run-report-form__outputFormatDiv___qZ3gU{margin-bottom:50px;display:flex;padding:32px 16px 16px 16px;flex-direction:column;align-items:flex-start;gap:16px}.-esm-reports__run-report-form__buttonsDiv___NX6tF{margin-top:50px}.-esm-reports__run-report-form__parameterElement___GzPAu{margin-bottom:30px;margin-top:30px}.-esm-reports__run-report-form__datePicker___fwJps{text-align:left}.-esm-reports__run-report-form__cancelActionButton___RL5lz{text-decoration:underline;color:#525252;padding-left:0px}.-esm-reports__run-report-form__unknownParameterTypeSpan___mjYPL{text-align:left;color:red}.-esm-reports__run-report-form__tableIcon___jPBA3{display:inline-block;margin-left:10px}.-esm-reports__run-report-form__reportButton___sD3wN{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-reports__run-report-form__rowCellEven___S7DUG{background-color:#fff !important}.-esm-reports__run-report-form__rowCellOdd___JgAhh{background-color:#f4f4f4 !important}","",{version:3,sources:["webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/components/run-report/run-report-form.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,+CACE,mBAAA,CACA,qBDLM,CCQR,gDACE,YAAA,CAGF,yDACE,qBDPc,CCQd,YAAA,CACA,qBAAA,CACA,6BAAA,CAGF,iEACE,YAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,QAAA,CAGF,0DACE,WAAA,CACA,WAAA,CACA,kBAAA,CAGF,wDACE,kBAAA,CACA,YAAA,CACA,2BAAA,CACA,qBAAA,CACA,sBAAA,CACA,QAAA,CAGF,mDACE,eAAA,CAGF,yDACE,kBAAA,CACA,eAAA,CAGF,mDACE,eAAA,CAGF,2DACE,yBAAA,CACA,aAAA,CACA,gBAAA,CAGF,iEACE,eAAA,CACA,SAAA,CAGF,kDACE,oBAAA,CACA,gBAAA,CAGF,qDACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,oDACE,gCAAA,CAGF,mDACE,mCAAA",sourceRoot:""}]),l.locals={tablet:"-esm-reports__run-report-form__tablet___DC02F",desktop:"-esm-reports__run-report-form__desktop___AtJjF",desktopRunReport:"-esm-reports__run-report-form__desktopRunReport___yG5Ji",runReportInnerDivElement:"-esm-reports__run-report-form__runReportInnerDivElement___QCl3v",basicInputElement:"-esm-reports__run-report-form__basicInputElement___MvN1O",outputFormatDiv:"-esm-reports__run-report-form__outputFormatDiv___qZ3gU",buttonsDiv:"-esm-reports__run-report-form__buttonsDiv___NX6tF",parameterElement:"-esm-reports__run-report-form__parameterElement___GzPAu",datePicker:"-esm-reports__run-report-form__datePicker___fwJps",cancelActionButton:"-esm-reports__run-report-form__cancelActionButton___RL5lz",unknownParameterTypeSpan:"-esm-reports__run-report-form__unknownParameterTypeSpan___mjYPL",tableIcon:"-esm-reports__run-report-form__tableIcon___jPBA3",reportButton:"-esm-reports__run-report-form__reportButton___sD3wN",rowCellEven:"-esm-reports__run-report-form__rowCellEven___S7DUG",rowCellOdd:"-esm-reports__run-report-form__rowCellOdd___JgAhh"};const u=l},5733:(e,r,t)=>{t.d(r,{Z:()=>v});var n=t(7410),o=t.n(n),a=t(4766),l=t.n(a),u=t(1991),i=t.n(u),s=t(3702),c=t.n(s),p=t(2434),m=t.n(p),A=t(1422),_=t.n(A),f=t(9880),d={};d.styleTagTransform=_(),d.setAttributes=c(),d.insert=i().bind(null,"head"),d.domAPI=l(),d.insertStyleElement=m(),o()(f.Z,d);const v=f.Z&&f.Z.locals?f.Z.locals:void 0},1326:(e,r,t)=>{t.r(r),t.d(r,{default:()=>b});var n=t(1672),o=t.n(n),a=t(3397),l=t(5733),u=t(1595),i=t(6134),s=t(2246),c=t(1132),p=t(8480);function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e,r,t,n,o,a,l){try{var u=e[a](l),i=u.value}catch(e){return void t(e)}u.done?r(i):Promise.resolve(i).then(n,o)}function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){_(e,r,t[r])}))}return e}function d(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],l=!0,u=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);l=!0);}catch(e){u=!0,o=e}finally{try{l||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const b=function(e){var r,t,m,b=e.closePanel,C=function(e){var r,t=e.target.name;r="checkbox"==e.target.type?e.target.checked:e.target.value,R((function(e){return d(f({},e),_({},t,r))}))},y=(0,a.useTranslation)().t,g=v((0,n.useState)([]),2),h=g[0],E=g[1],w=v((0,n.useState)(""),2),k=w[0],D=w[1],x=v((0,n.useState)(""),2),O=x[0],S=x[1],P=v((0,n.useState)(null),2),F=P[0],j=P[1],B=v((0,n.useState)({}),2),I=B[0],R=B[1],Z=v((0,n.useState)(!1),2),N=Z[0],T=Z[1],G=v((0,n.useState)(!1),2),M=G[0],Q=G[1],L="tablet"===(0,c.useLayoutType)();(0,n.useEffect)((function(){var e,r,t=(e=function(){var e,r;return function(e,r){var t,n,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,n=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=r.call(e,l)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,u.ob)(k)];case 1:return e=t.sent(),E(e),[3,3];case 2:return r=t.sent(),console.error("Error fetching data:",r),[3,3];case 3:return[2]}}))},r=function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function l(e){A(a,n,o,l,u,"next",e)}function u(e){A(a,n,o,l,u,"throw",e)}l(void 0)}))},function(){return r.apply(this,arguments)});t()}),[k]),(0,n.useEffect)((function(){var e,r,t,n=null===(e=F)||void 0===e?void 0:e.parameters.map((function(e){return e.type})),o=!(null===(r=n)||void 0===r?void 0:r.every((function(e){return Y.includes(e)}))),a=null===(t=F)||void 0===t?void 0:t.parameters.every((function(e){return!!I[e.name]&&"Invalid Date"!==I[e.name]}));T(!(o||!a||""===k||""===O))}),[I,k,O]);var Y=["java.util.Date","java.lang.String","java.lang.Integer","org.openmrs.Location"],J=(0,u.M3)().reportDefinitions,U=(0,u.JC)().locations,q=(0,n.useCallback)((function(e){e.preventDefault(),Q(!0);var r={reportDefinitionUuid:k,renderModeUuid:O,reportParameters:I},t=new AbortController;(0,u.lY)(r,t).pipe((0,p.P)()).subscribe((function(){setTimeout((function(){(0,c.showToast)({critical:!0,kind:"success",title:y("reportRunning","Report running"),description:y("reportRanSuccessfullyMsg","Report ran successfully")}),b(),Q(!1)}),500)}),(function(e){console.error(e),(0,c.showToast)({critical:!0,kind:"error",title:y("reportRunningErrorMsg","Error while running the report"),description:y("reportRunningErrorMsg","Error while running the report")}),Q(!1)}))}),[k,O,I]);return o().createElement(s.l09,{className:l.Z.desktopRunReport,onSubmit:q},o().createElement("div",{className:l.Z.runReportInnerDivElement},o().createElement(s.PhF,{id:"select-report",className:l.Z.basicInputElement,labelText:y("selectReportLabel","Report"),onChange:function(e){D(e.target.value),S(""),j(J.find((function(r){return r.uuid===e.target.value}))),R({})},value:k},o().createElement(s.QlF,{value:""}),(null===(r=J)||void 0===r?void 0:r.length)>0&&J.map((function(e){return o().createElement(s.QlF,{key:e.uuid,text:e.name,value:e.uuid},e.name)})))),o().createElement("div",{id:"reportParametersDiv"},F&&(null===(t=F.parameters)||void 0===t?void 0:t.map((function(e){return o().createElement("div",null,function(e){switch(e.type){case"java.util.Date":return o().createElement("div",{className:l.Z.runReportInnerDivElement},o().createElement(s.Mtg,{datePickerType:"single",name:e.name,onChange:function(r){var t=v(r,1)[0];return function(e,r){var t=new Date(r).toLocaleDateString();R((function(r){return d(f({},r),_({},e,t))}))}(e.name,t)},dateFormat:"Y-m-d",className:l.Z.datePicker},o().createElement(s.aj6,{id:e.name,name:e.name,labelText:e.label,type:"date"})));case"java.lang.String":case"java.lang.Integer":var r;return o().createElement("div",{className:l.Z.runReportInnerDivElement},o().createElement(s.oil,{id:e.name,name:e.name,labelText:e.label,className:l.Z.basicInputElement,onChange:function(e){return C(e)},value:null!==(r=I[e.name])&&void 0!==r?r:""}));case"org.openmrs.Location":var t,n;return o().createElement("div",{className:l.Z.runReportInnerDivElement},o().createElement(s.PhF,{id:e.name,name:e.name,labelText:e.label,className:l.Z.basicInputElement,onChange:function(e){return C(e)},value:null!==(n=I[e.name])&&void 0!==n?n:""},o().createElement(s.QlF,{value:""}),(null===(t=U)||void 0===t?void 0:t.length)>0&&U.map((function(e){return o().createElement(s.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)}))));default:return o().createElement("div",{className:l.Z.runReportInnerDivElement},o().createElement("span",{className:l.Z.unknownParameterTypeSpan},"Unknown parameter type: ".concat(e.type," for parameter: ").concat(e.label)))}}(e))})))),o().createElement("div",{className:l.Z.outputFormatDiv},o().createElement(s.PhF,{id:"output-format-select",className:l.Z.basicInputElement,labelText:y("outputFormat","Output format"),onChange:function(e){return S(e.target.value)},value:O},o().createElement(s.QlF,{value:""}),(null===(m=h)||void 0===m?void 0:m.length)>0&&h.map((function(e){return o().createElement(s.QlF,{key:e.uuid,text:e.name,value:e.uuid},e.name)})))),o().createElement("div",{className:l.Z.buttonsDiv},o().createElement(s.uVA,{className:L?l.Z.tablet:l.Z.desktop},o().createElement(s.zxk,{onClick:i.Km,kind:"secondary",size:"xl",className:l.Z.reportButton},y("cancel","Cancel")),o().createElement(s.zxk,{disabled:!N||M,size:"xl",className:l.Z.reportButton,kind:"primary",type:"submit"},y("run","Run")))))}},6134:(e,r,t)=>{t.d(r,{I8:()=>i,Ir:()=>c,Km:()=>s});var n=t(1132),o=t(1672);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l={isOverlayOpen:!1,header:""},u=function(){return(0,n.getGlobalStore)("reports-store",l)},i=function(e,r){u().setState({isOverlayOpen:!0,component:r,header:e})},s=function(){u().setState({component:null,isOverlayOpen:!1})},c=function(){var e,r,t=(e=(0,o.useState)(),r=2,function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],l=!0,u=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);l=!0);}catch(e){u=!0,o=e}finally{try{l||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=t[0],l=t[1],i=(0,o.useCallback)((function(e){l(e)}),[]);(0,o.useEffect)((function(){i(u().getState()),u().subscribe(i)}),[i]);var s=null!=n?n:{};return{isOverlayOpen:s.isOverlayOpen,component:s.component,header:s.header}}}}]);