(globalThis.webpackChunk_openmrs_esm_generic_patient_widgets_app=globalThis.webpackChunk_openmrs_esm_generic_patient_widgets_app||[]).push([[904],{8988:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.AlluvialChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},2313:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.StackedAreaChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},2409:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.AreaChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},9252:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.GroupedBarChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},5481:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.SimpleBarChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},8886:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.StackedBarChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},5899:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this,r=e.options,i=e.data;return r||console.error("Missing options!"),i||console.error("Missing data!"),n.data=e.data||[],n.options=e.options||{},Object.assign(n,n.chart),n}return i(e,t),e.prototype.shouldComponentUpdate=function(t){return this.props.data!==t.data||this.props.options!==t.options},e.prototype.componentDidUpdate=function(){this.chart.model.setData(this.props.data),this.chart.model.setOptions(this.props.options)},e}(s(n(7900)).default.Component);e.default=o},9076:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.BoxplotChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},2490:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.BubbleChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},4587:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.BulletChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},3439:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.CirclePackChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},176:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.ComboChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},7125:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.DonutChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},1965:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.GaugeChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},7768:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.HeatmapChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},5777:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.HistogramChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},419:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HeatmapChart=e.AlluvialChart=e.WordCloudChart=e.CirclePackChart=e.TreemapChart=e.TreeChart=e.ComboChart=e.RadarChart=e.MeterChart=e.ScatterChart=e.PieChart=e.LollipopChart=e.LineChart=e.HistogramChart=e.GaugeChart=e.DonutChart=e.BulletChart=e.BubbleChart=e.BoxplotChart=e.StackedBarChart=e.SimpleBarChart=e.GroupedBarChart=e.StackedAreaChart=e.AreaChart=void 0;var i=r(n(2409));e.AreaChart=i.default;var s=r(n(2313));e.StackedAreaChart=s.default;var o=r(n(9252));e.GroupedBarChart=o.default;var a=r(n(5481));e.SimpleBarChart=a.default;var l=r(n(8886));e.StackedBarChart=l.default;var c=r(n(9076));e.BoxplotChart=c.default;var u=r(n(2490));e.BubbleChart=u.default;var h=r(n(4587));e.BulletChart=h.default;var d=r(n(7125));e.DonutChart=d.default;var p=r(n(1965));e.GaugeChart=p.default;var f=r(n(5777));e.HistogramChart=f.default;var g=r(n(5998));e.LineChart=g.default;var m=r(n(4397));e.LollipopChart=m.default;var v=r(n(5108));e.PieChart=v.default;var y=r(n(4617));e.ScatterChart=y.default;var _=r(n(3064));e.MeterChart=_.default;var b=r(n(8507));e.RadarChart=b.default;var x=r(n(176));e.ComboChart=x.default;var E=r(n(7930));e.TreeChart=E.default;var w=r(n(1087));e.TreemapChart=w.default;var O=r(n(3439));e.CirclePackChart=O.default;var S=r(n(257));e.WordCloudChart=S.default;var T=r(n(8988));e.AlluvialChart=T.default;var M=r(n(7768));e.HeatmapChart=M.default},5998:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.LineChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},4397:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.LollipopChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},3064:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.MeterChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},5108:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.PieChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},8507:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.RadarChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},4617:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.ScatterChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},7930:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.TreeChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},1087:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.TreemapChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},6978:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasChartBeenInitialized=void 0,e.hasChartBeenInitialized=function(t){return!!t.querySelector("div.bx--cc--chart-wrapper")}},257:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(7900)),a=n(8132),l=s(n(5899)),c=n(6978),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){!1===c.hasChartBeenInitialized(this.chartRef)&&(this.chart=new a.WordCloudChart(this.chartRef,{data:this.props.data,options:this.props.options}))},e.prototype.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.chartRef=e},className:"chart-holder"})},e}(l.default);e.default=u},8132:function(t,e,n){t=n.nmd(t),function(e){"use strict";function r(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s(t){let e,n,s;function a(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<0?i=e+1:s=e}while(i<s)}return i}return 2!==t.length?(e=r,n=(e,n)=>r(t(e),n),s=(e,n)=>t(e)-n):(e=t===r||t===i?t:o,n=t,s=t),{left:a,center:function(t,e,n=0,r=t.length){const i=a(t,e,n,r-1);return i>n&&s(t[i-1],e)>-s(t[i],e)?i-1:i},right:function(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<=0?i=e+1:s=e}while(i<s)}return i}}}function o(){return 0}const a=s(r).right;s((function(t){return null===t?NaN:+t})).center;const l=a;function c(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(void 0===n?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class u{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],s=t+i,o=Math.abs(t)<Math.abs(i)?t-(s-i):i-(s-t);o&&(e[n++]=o),t=s}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,s=0;if(i>0){for(s=t[--i];i>0&&(e=s,n=t[--i],s=e+n,r=n-(s-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=s+n,n==e-s&&(s=e))}return s}}class h extends Map{constructor(t,e=p){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(d(this,t))}has(t){return super.has(d(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,t))}}function d({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function p(t){return null!==t&&"object"==typeof t?t.valueOf():t}function f(t){return t}function g(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var m=Array.prototype.slice;function v(t){return()=>t}const y=Math.sqrt(50),_=Math.sqrt(10),b=Math.sqrt(2);function x(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=y?10:s>=_?5:s>=b?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?x(t,e,2*n):[a,l,c]}function E(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,s,o]=r?x(e,t,n):x(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let t=0;t<a;++t)l[t]=(s-t)/-o;else for(let t=0;t<a;++t)l[t]=(s-t)*o;else if(o<0)for(let t=0;t<a;++t)l[t]=(i+t)/-o;else for(let t=0;t<a;++t)l[t]=(i+t)*o;return l}function w(t,e,n){return x(t=+t,e=+e,n=+n)[2]}function O(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?w(e,t,n):w(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function S(t){return Math.max(1,Math.ceil(Math.log(function(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}(t))/Math.LN2)+1)}function T(){var t=f,e=c,n=S;function r(r){Array.isArray(r)||(r=Array.from(r));var i,s,o,a=r.length,u=new Array(a);for(i=0;i<a;++i)u[i]=t(r[i],i,r);var h=e(u),d=h[0],p=h[1],f=n(u,d,p);if(!Array.isArray(f)){const t=p,n=+f;if(e===c&&([d,p]=function(t,e,n){let r;for(;;){const i=w(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}(d,p,n)),(f=E(d,p,n))[0]<=d&&(o=w(d,p,n)),f[f.length-1]>=p)if(t>=p&&e===c){const t=w(d,p,n);isFinite(t)&&(t>0?p=(Math.floor(p/t)+1)*t:t<0&&(p=(Math.ceil(p*-t)+1)/-t))}else f.pop()}for(var g=f.length,m=0,v=g;f[m]<=d;)++m;for(;f[v-1]>p;)--v;(m||v<g)&&(f=f.slice(m,v),g=v-m);var y,_=new Array(g+1);for(i=0;i<=g;++i)(y=_[i]=[]).x0=i>0?f[i-1]:d,y.x1=i<g?f[i]:p;if(isFinite(o)){if(o>0)for(i=0;i<a;++i)null!=(s=u[i])&&d<=s&&s<=p&&_[Math.min(g,Math.floor((s-d)/o))].push(r[i]);else if(o<0)for(i=0;i<a;++i)if(null!=(s=u[i])&&d<=s&&s<=p){const t=Math.floor((d-s)*o);_[Math.min(g,t+(f[t]<=s))].push(r[i])}}else for(i=0;i<a;++i)null!=(s=u[i])&&d<=s&&s<=p&&_[l(f,s,0,g)].push(r[i]);return _}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:v(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:v([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:v(Array.isArray(t)?m.call(t):t),r):n},r}function M(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function C(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function A(t,e,n=0,i=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(s=void 0===s?g:function(t=r){if(t===r)return g;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(s);i>n;){if(i-n>600){const r=i-n+1,o=e-n+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1);A(t,e,Math.max(n,Math.floor(e-o*l/r+c)),Math.min(i,Math.floor(e+(r-o)*l/r+c)),s)}const r=t[e];let o=n,a=i;for(D(t,n,e),s(t[i],r)>0&&D(t,n,i);o<a;){for(D(t,o,a),++o,--a;s(t[o],r)<0;)++o;for(;s(t[a],r)>0;)--a}0===s(t[n],r)?D(t,n,a):(++a,D(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function D(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function L(t,e,n){if((r=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return C(t);if(e>=1)return M(t);var r,i=(r-1)*e,s=Math.floor(i),o=M(A(t,s).subarray(0,s+1));return o+(C(t.subarray(s+1))-o)*(i-s)}}function R(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function k(t){return t}var I=1,P=2,N=3,B=4,U=1e-6;function V(t){return"translate("+t+",0)"}function $(t){return"translate(0,"+t+")"}function H(t){return e=>+t(e)}function j(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function G(){return!this.__axis}function z(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===I||t===B?-1:1,u=t===B||t===P?"x":"y",h=t===I||t===N?V:$;function d(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):k),g=Math.max(s,0)+a,m=e.range(),v=+m[0]+l,y=+m[m.length-1]+l,_=(e.bandwidth?j:H)(e.copy(),l),b=d.selection?d.selection():d,x=b.selectAll(".domain").data([null]),E=b.selectAll(".tick").data(p,e).order(),w=E.exit(),O=E.enter().append("g").attr("class","tick"),S=E.select("line"),T=E.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(O),S=S.merge(O.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),T=T.merge(O.append("text").attr("fill","currentColor").attr(u,c*g).attr("dy",t===I?"0em":t===N?"0.71em":"0.32em")),d!==b&&(x=x.transition(d),E=E.transition(d),S=S.transition(d),T=T.transition(d),w=w.transition(d).attr("opacity",U).attr("transform",(function(t){return isFinite(t=_(t))?h(t+l):this.getAttribute("transform")})),O.attr("opacity",U).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:_(t))+l)}))),w.remove(),x.attr("d",t===B||t===P?o?"M"+c*o+","+v+"H"+l+"V"+y+"H"+c*o:"M"+l+","+v+"V"+y:o?"M"+v+","+c*o+"V"+l+"H"+y+"V"+c*o:"M"+v+","+l+"H"+y),E.attr("opacity",1).attr("transform",(function(t){return h(_(t)+l)})),S.attr(u+"2",c*s),T.attr(u,c*g).text(f),b.filter(G).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===P?"start":t===B?"end":"middle"),b.each((function(){this.__axis=_}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(s=o=+t,d):s},d.tickSizeInner=function(t){return arguments.length?(s=+t,d):s},d.tickSizeOuter=function(t){return arguments.length?(o=+t,d):o},d.tickPadding=function(t){return arguments.length?(a=+t,d):a},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function F(t){return z(I,t)}function W(t){return z(P,t)}function q(t){return z(N,t)}function Z(t){return z(B,t)}var Y={value:()=>{}};function X(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new K(r)}function K(t){this._=t}function Q(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function J(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Y,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}K.prototype=X.prototype={constructor:K,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=J(r[n],t.name,e);else if(null==e)for(n in r)r[n]=J(r[n],t.name,null);return this}for(;++s<o;)if((n=(t=i[s]).type)&&(n=Q(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new K(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var tt="http://www.w3.org/1999/xhtml";const et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),et.hasOwnProperty(e)?{space:et[e],local:t}:t}function rt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function it(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function st(t){var e=nt(t);return(e.local?it:rt)(e)}function ot(){}function at(t){return null==t?ot:function(){return this.querySelector(t)}}function lt(){return[]}function ct(t){return null==t?lt:function(){return this.querySelectorAll(t)}}function ut(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function ht(t){return function(){return this.matches(t)}}function dt(t){return function(e){return e.matches(t)}}var pt=Array.prototype.find;function ft(){return this.firstElementChild}var gt=Array.prototype.filter;function mt(){return Array.from(this.children)}function vt(t){return new Array(t.length)}function yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function _t(t,e,n,r,i,s){for(var o,a=0,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new yt(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function bt(t,e,n,r,i,s,o){var a,l,c,u=new Map,h=e.length,d=s.length,p=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(p[a]=c=o.call(l,l.__data__,a,e)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=o.call(t,s[a],a,s)+"",(l=u.get(c))?(r[a]=l,l.__data__=s[a],u.delete(c)):n[a]=new yt(t,s[a]);for(a=0;a<h;++a)(l=e[a])&&u.get(p[a])===l&&(i[a]=l)}function xt(t){return t.__data__}function Et(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function wt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ot(t){return function(){this.removeAttribute(t)}}function St(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tt(t,e){return function(){this.setAttribute(t,e)}}function Mt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ct(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function At(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Dt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Lt(t){return function(){this.style.removeProperty(t)}}function Rt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function kt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function It(t,e){return t.style.getPropertyValue(e)||Dt(t).getComputedStyle(t,null).getPropertyValue(e)}function Pt(t){return function(){delete this[t]}}function Nt(t,e){return function(){this[t]=e}}function Bt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ut(t){return t.trim().split(/^|\s+/)}function Vt(t){return t.classList||new $t(t)}function $t(t){this._node=t,this._names=Ut(t.getAttribute("class")||"")}function Ht(t,e){for(var n=Vt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function jt(t,e){for(var n=Vt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Gt(t){return function(){Ht(this,t)}}function zt(t){return function(){jt(this,t)}}function Ft(t,e){return function(){(e.apply(this,arguments)?Ht:jt)(this,t)}}function Wt(){this.textContent=""}function qt(t){return function(){this.textContent=t}}function Zt(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Yt(){this.innerHTML=""}function Xt(t){return function(){this.innerHTML=t}}function Kt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qt(){this.nextSibling&&this.parentNode.appendChild(this)}function Jt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function te(){return null}function ee(){var t=this.parentNode;t&&t.removeChild(this)}function ne(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function re(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ie(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function se(t,e,n){return function(){var r,i=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function oe(t,e,n){var r=Dt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ae(t,e){return function(){return oe(this,t,e)}}function le(t,e){return function(){return oe(this,t,e.apply(this,arguments))}}yt.prototype={constructor:yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},$t.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ce=[null];function ue(t,e){this._groups=t,this._parents=e}function he(){return new ue([[document.documentElement]],ce)}function de(t){return"string"==typeof t?new ue([[document.querySelector(t)]],[document.documentElement]):new ue([[t]],ce)}function pe(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}ue.prototype=he.prototype={constructor:ue,select:function(t){"function"!=typeof t&&(t=at(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),c[u]=o);return new ue(r,this._parents)},selectAll:function(t){t="function"==typeof t?ut(t):ct(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,c=0;c<l;++c)(o=a[c])&&(r.push(t.call(o,o.__data__,c,a)),i.push(o));return new ue(r,i)},selectChild:function(t){return this.select(null==t?ft:function(t){return function(){return pt.call(this.children,t)}}("function"==typeof t?t:dt(t)))},selectChildren:function(t){return this.selectAll(null==t?mt:function(t){return function(){return gt.call(this.children,t)}}("function"==typeof t?t:dt(t)))},filter:function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],c=0;c<a;++c)(s=o[c])&&t.call(s,s.__data__,c,o)&&l.push(s);return new ue(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,xt);var n=e?bt:_t,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],d=h.length,p=Et(t.call(u,u&&u.__data__,c,r)),f=p.length,g=a[c]=new Array(f),m=o[c]=new Array(f);n(u,h,g,m,l[c]=new Array(d),p,e);for(var v,y,_=0,b=0;_<f;++_)if(v=g[_]){for(_>=b&&(b=_+1);!(y=m[b])&&++b<f;);v._next=y||null}}return(o=new ue(o,r))._enter=a,o._exit=l,o},enter:function(){return new ue(this._enter||this._groups.map(vt),this._parents)},exit:function(){return new ue(this._exit||this._groups.map(vt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c,u=n[l],h=r[l],d=u.length,p=a[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<i;++l)a[l]=n[l];return new ue(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=wt);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],l=a.length,c=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(c[u]=o);c.sort(e)}return new ue(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=nt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?St:Ot:"function"==typeof e?n.local?At:Ct:n.local?Mt:Tt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Lt:"function"==typeof e?kt:Rt)(t,e,n??"")):It(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Pt:"function"==typeof e?Bt:Nt)(t,e)):this.node()[t]},classed:function(t,e){var n=Ut(t+"");if(arguments.length<2){for(var r=Vt(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Ft:e?Gt:zt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Wt:("function"==typeof t?Zt:qt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Yt:("function"==typeof t?Kt:Xt)(t)):this.node().innerHTML},raise:function(){return this.each(Qt)},lower:function(){return this.each(Jt)},append:function(t){var e="function"==typeof t?t:st(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:st(t),r=null==e?te:"function"==typeof e?e:at(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ee)},clone:function(t){return this.select(t?re:ne)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?se:ie,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?le:ae)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};const fe={capture:!0,passive:!1};function ge(t){t.preventDefault(),t.stopImmediatePropagation()}function me(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ve(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ye(){}var _e=.7,be=1/_e,xe="\\s*([+-]?\\d+)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oe=/^#([0-9a-f]{3,8})$/,Se=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Te=new RegExp(`^rgb\\(${we},${we},${we}\\)$`),Me=new RegExp(`^rgba\\(${xe},${xe},${xe},${Ee}\\)$`),Ce=new RegExp(`^rgba\\(${we},${we},${we},${Ee}\\)$`),Ae=new RegExp(`^hsl\\(${Ee},${we},${we}\\)$`),De=new RegExp(`^hsla\\(${Ee},${we},${we},${Ee}\\)$`),Le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Re(){return this.rgb().formatHex()}function ke(){return this.rgb().formatRgb()}function Ie(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Oe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pe(e):3===n?new Ue(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ne(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ne(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Se.exec(t))?new Ue(e[1],e[2],e[3],1):(e=Te.exec(t))?new Ue(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Me.exec(t))?Ne(e[1],e[2],e[3],e[4]):(e=Ce.exec(t))?Ne(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ae.exec(t))?ze(e[1],e[2]/100,e[3]/100,1):(e=De.exec(t))?ze(e[1],e[2]/100,e[3]/100,e[4]):Le.hasOwnProperty(t)?Pe(Le[t]):"transparent"===t?new Ue(NaN,NaN,NaN,0):null}function Pe(t){return new Ue(t>>16&255,t>>8&255,255&t,1)}function Ne(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ue(t,e,n,r)}function Be(t,e,n,r){return 1===arguments.length?function(t){return t instanceof ye||(t=Ie(t)),t?new Ue((t=t.rgb()).r,t.g,t.b,t.opacity):new Ue}(t):new Ue(t,e,n,r??1)}function Ue(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ve(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}`}function $e(){const t=He(this.opacity);return`${1===t?"rgb(":"rgba("}${je(this.r)}, ${je(this.g)}, ${je(this.b)}${1===t?")":`, ${t})`}`}function He(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function je(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ge(t){return((t=je(t))<16?"0":"")+t.toString(16)}function ze(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qe(t,e,n,r)}function Fe(t){if(t instanceof qe)return new qe(t.h,t.s,t.l,t.opacity);if(t instanceof ye||(t=Ie(t)),!t)return new qe;if(t instanceof qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new qe(o,a,l,t.opacity)}function We(t,e,n,r){return 1===arguments.length?Fe(t):new qe(t,e,n,r??1)}function qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ze(t){return(t=(t||0)%360)<0?t+360:t}function Ye(t){return Math.max(0,Math.min(1,t||0))}function Xe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}me(ye,Ie,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Re,formatHex:Re,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fe(this).formatHsl()},formatRgb:ke,toString:ke}),me(Ue,Be,ve(ye,{brighter(t){return t=null==t?be:Math.pow(be,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?_e:Math.pow(_e,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ue(je(this.r),je(this.g),je(this.b),He(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatHex8:function(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}${Ge(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:$e,toString:$e})),me(qe,We,ve(ye,{brighter(t){return t=null==t?be:Math.pow(be,t),new qe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?_e:Math.pow(_e,t),new qe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ue(Xe(t>=240?t-240:t+120,i,r),Xe(t,i,r),Xe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qe(Ze(this.h),Ye(this.s),Ye(this.l),He(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=He(this.opacity);return`${1===t?"hsl(":"hsla("}${Ze(this.h)}, ${100*Ye(this.s)}%, ${100*Ye(this.l)}%${1===t?")":`, ${t})`}`}}));const Ke=t=>()=>t;function Qe(t){return 1==(t=+t)?Je:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ke(isNaN(e)?n:e)}}function Je(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ke(isNaN(t)?e:t)}const tn=function t(e){var n=Qe(e);function r(t,e){var r=n((t=Be(t)).r,(e=Be(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=Je(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function en(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(s){for(n=0;n<r;++n)i[n]=t[n]*(1-s)+e[n]*s;return i}}function nn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,s=new Array(i),o=new Array(r);for(n=0;n<i;++n)s[n]=un(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=s[n](t);return o}}function rn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function sn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function on(t,e){var n,r={},i={};for(n in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)n in t?r[n]=un(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ln=new RegExp(an.source,"g");function cn(t,e){var n,r,i,s=an.lastIndex=ln.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(n=an.exec(t))&&(r=ln.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:sn(n,r)})),s=ln.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})}function un(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ke(e):("number"===r?sn:"string"===r?(n=Ie(e))?(e=n,tn):cn:e instanceof Ie?tn:e instanceof Date?rn:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?en:Array.isArray(e)?nn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?on:sn)(t,e)}function hn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var dn,pn=180/Math.PI,fn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gn(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*pn,skewX:Math.atan(l)*pn,scaleX:o,scaleY:a}}function mn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],l=[];return s=t(s),o=t(o),function(t,r,i,s,o,a){if(t!==i||r!==s){var l=o.push("translate(",null,e,null,n);a.push({i:l-4,x:sn(t,i)},{i:l-2,x:sn(r,s)})}else(i||s)&&o.push("translate("+i+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:sn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(s.rotate,o.rotate,a,l),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:sn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(s.skewX,o.skewX,a,l),function(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:sn(t,n)},{i:a-2,x:sn(e,r)})}else(1!==n||1!==r)&&s.push(i(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,l),s=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var vn=mn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fn:gn(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),yn=mn((function(t){return null!=t&&(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),t=dn.transform.baseVal.consolidate())?gn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):fn}),", ",")",")");var _n,bn,xn=0,En=0,wn=0,On=1e3,Sn=0,Tn=0,Mn=0,Cn="object"==typeof performance&&performance.now?performance:Date,An="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dn(){return Tn||(An(Ln),Tn=Cn.now()+Mn)}function Ln(){Tn=0}function Rn(){this._call=this._time=this._next=null}function kn(t,e,n){var r=new Rn;return r.restart(t,e,n),r}function In(){Tn=(Sn=Cn.now())+Mn,xn=En=0;try{!function(){Dn(),++xn;for(var t,e=_n;e;)(t=Tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xn}()}finally{xn=0,function(){for(var t,e,n=_n,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:_n=e);bn=t,Nn(r)}(),Tn=0}}function Pn(){var t=Cn.now(),e=t-Sn;e>On&&(Mn-=e,Sn=t)}function Nn(t){xn||(En&&(En=clearTimeout(En)),t-Tn>24?(t<1/0&&(En=setTimeout(In,t-Cn.now()-Mn)),wn&&(wn=clearInterval(wn))):(wn||(Sn=Cn.now(),wn=setInterval(Pn,On)),xn=1,An(In)))}function Bn(t,e,n){var r=new Rn;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Rn.prototype=kn.prototype={constructor:Rn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dn():+n)+(null==e?0:+e),!this._next&&bn!==this&&(bn?bn._next=this:_n=this,bn=this),this._call=t,this._time=n,Nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nn())}};var Un=X("start","end","cancel","interrupt"),Vn=[],$n=0,Hn=1,jn=2,Gn=3,zn=4,Fn=5,Wn=6;function qn(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(t){n.state=Hn,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(s){var c,u,h,d;if(n.state!==Hn)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===Gn)return Bn(o);d.state===zn?(d.state=Wn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=Wn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(Bn((function(){n.state===Gn&&(n.state=zn,n.timer.restart(a,n.delay,n.time),a(s))})),n.state=jn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===jn){for(n.state=Gn,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=Fn,1),s=-1,o=r.length;++s<o;)r[s].call(t,i);n.state===Fn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Wn,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=kn(s,0,n.time)}(t,n,{name:e,index:r,group:i,on:Un,tween:Vn,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$n})}function Zn(t,e){var n=Xn(t,e);if(n.state>$n)throw new Error("too late; already scheduled");return n}function Yn(t,e){var n=Xn(t,e);if(n.state>Gn)throw new Error("too late; already running");return n}function Xn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kn(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>jn&&n.state<Fn,n.state=Wn,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}}function Qn(t,e){var n,r;return function(){var i=Yn(this,t),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Jn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=Yn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function tr(t,e,n){var r=t._id;return t.each((function(){var t=Yn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Xn(t,r).value[e]}}function er(t,e){var n;return("number"==typeof e?sn:e instanceof Ie?tn:(n=Ie(e))?(e=n,tn):cn)(t,e)}function nr(t){return function(){this.removeAttribute(t)}}function rr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ir(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function sr(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function or(t,e,n){var r,i,s;return function(){var o,a,l=n(this);return null==l?void this.removeAttribute(t):(o=this.getAttribute(t))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,l))}}function ar(t,e,n){var r,i,s;return function(){var o,a,l=n(this);return null==l?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,l))}}function lr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function cr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function ur(t,e){return function(){Zn(this,t).delay=+e.apply(this,arguments)}}function hr(t,e){return e=+e,function(){Zn(this,t).delay=e}}function dr(t,e){return function(){Yn(this,t).duration=+e.apply(this,arguments)}}function pr(t,e){return e=+e,function(){Yn(this,t).duration=e}}var fr=he.prototype.constructor;function gr(t){return function(){this.style.removeProperty(t)}}var mr=0;function vr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function yr(){return++mr}var _r=he.prototype;vr.prototype={constructor:vr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=at(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,c=r[o],u=c.length,h=s[o]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=t.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,qn(h[d],e,n,d,h,Xn(a,n)));return new vr(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ct(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=t.call(l,l.__data__,h,c),f=Xn(l,n),g=0,m=p.length;g<m;++g)(d=p[g])&&qn(d,e,n,g,p,f);s.push(p),o.push(l)}return new vr(s,o,e,n)},selectChild:_r.selectChild,selectChildren:_r.selectChildren,filter:function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],c=0;c<a;++c)(s=o[c])&&t.call(s,s.__data__,c,o)&&l.push(s);return new vr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l,c=e[a],u=n[a],h=c.length,d=o[a]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;a<r;++a)o[a]=e[a];return new vr(o,this._parents,this._name,this._id)},selection:function(){return new fr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=yr(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,c=0;c<l;++c)if(o=a[c]){var u=Xn(o,e);qn(o,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vr(r,this._parents,t,n)},call:_r.call,nodes:_r.nodes,node:_r.node,size:_r.size,empty:_r.empty,each:_r.each,on:function(t,e){var n=this._id;return arguments.length<2?Xn(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Zn:Yn;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=nt(t),r="transform"===n?yn:er;return this.attrTween(t,"function"==typeof e?(n.local?ar:or)(n,r,tr(this,"attr."+t,e)):null==e?(n.local?rr:nr)(n):(n.local?sr:ir)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=nt(t);return this.tween(n,(r.local?lr:cr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?vn:er;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=It(this,t),o=(this.style.removeProperty(t),It(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}(t,r)).on("end.style."+t,gr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var o=It(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=It(this,t)),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}(t,r,tr(this,"style."+t,e))).each(function(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var l=Yn(this,t),c=l.on,u=null==l.value[o]?s||(s=gr(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var o=It(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,s,n)),r}return s._value=e,s}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??""}}(tr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Xn(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?Qn:Jn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ur:hr)(e,t)):Xn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?dr:pr)(e,t)):Xn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Yn(this,t).ease=e}}(e,t)):Xn(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Yn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(s,o){var a={value:o},l={value:function(){0==--i&&s()}};n.each((function(){var n=Yn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===i&&s()}))},[Symbol.iterator]:_r[Symbol.iterator]};const br=t=>+t;function xr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Er={time:null,delay:0,duration:250,ease:xr};function wr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}he.prototype.interrupt=function(t){return this.each((function(){Kn(this,t)}))},he.prototype.transition=function(t){var e,n;t instanceof vr?(e=t._id,t=t._name):(e=yr(),(n=Er).time=Dn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,c=0;c<l;++c)(o=a[c])&&qn(o,t,e,c,a,n||wr(o,e));return new vr(r,this._parents,t,e)};const Or=t=>()=>t;function Sr(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Tr(t){t.preventDefault(),t.stopImmediatePropagation()}var Mr={name:"drag"},Cr={name:"space"},Ar={name:"handle"},Dr={name:"center"};const{abs:Lr,max:Rr,min:kr}=Math;function Ir(t){return[+t[0],+t[1]]}function Pr(t){return[Ir(t[0]),Ir(t[1])]}var Nr={name:"x",handles:["w","e"].map(Gr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Br={name:"y",handles:["n","s"].map(Gr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ur={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$r={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Hr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jr={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gr(t){return{type:t}}function zr(t){return!t.ctrlKey&&!t.button}function Fr(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Wr(){return navigator.maxTouchPoints||"ontouchstart"in this}function qr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Zr(){return function(t){var e,n=Fr,r=zr,i=Wr,s=!0,o=X("start","brush","end"),a=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([Gr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ur.overlay).merge(n).each((function(){var t=qr(this).extent;de(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Gr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ur.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Ur[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=de(this),e=qr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new h(t,e,n):r}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,o,a,l,h,d,p,f,g,m,v,y=this,_=n.target.__data__.type,b="selection"===(s&&n.metaKey?_="overlay":_)?Mr:s&&n.altKey?Dr:Ar,x=t===Br?null:Hr[_],E=t===Nr?null:jr[_],w=qr(y),O=w.extent,S=w.selection,T=O[0][0],M=O[0][1],C=O[1][0],A=O[1][1],D=0,L=0,R=x&&E&&s&&n.shiftKey,k=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=pe(t,y)).point0=t.slice(),t.identifier=e,t}));Kn(y);var I=u(y,arguments,!0).beforestart();if("overlay"===_){S&&(g=!0);const e=[k[0],k[1]||k[0]];w.selection=S=[[i=t===Br?T:kr(e[0][0],e[1][0]),a=t===Nr?M:kr(e[0][1],e[1][1])],[h=t===Br?C:Rr(e[0][0],e[1][0]),p=t===Nr?A:Rr(e[0][1],e[1][1])]],k.length>1&&V(n)}else i=S[0][0],a=S[0][1],h=S[1][0],p=S[1][1];o=i,l=a,d=h,f=p;var P=de(y).attr("pointer-events","none"),N=P.selectAll(".overlay").attr("cursor",Ur[_]);if(n.touches)I.moved=U,I.ended=$;else{var B=de(n.view).on("mousemove.brush",U,!0).on("mouseup.brush",$,!0);s&&B.on("keydown.brush",H,!0).on("keyup.brush",j,!0),function(t){var e=t.document.documentElement,n=de(t).on("dragstart.drag",ge,fe);"onselectstart"in e?n.on("selectstart.drag",ge,fe):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(n.view)}c.call(y),I.start(n,b.name)}function U(t){for(const e of t.changedTouches||[t])for(const t of k)t.identifier===e.identifier&&(t.cur=pe(e,y));if(R&&!m&&!v&&1===k.length){const t=k[0];Lr(t.cur[0]-t[0])>Lr(t.cur[1]-t[1])?v=!0:m=!0}for(const t of k)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,Tr(t),V(t)}function V(t){const e=k[0],n=e.point0;var r;switch(D=e[0]-n[0],L=e[1]-n[1],b){case Cr:case Mr:x&&(D=Rr(T-i,kr(C-h,D)),o=i+D,d=h+D),E&&(L=Rr(M-a,kr(A-p,L)),l=a+L,f=p+L);break;case Ar:k[1]?(x&&(o=Rr(T,kr(C,k[0][0])),d=Rr(T,kr(C,k[1][0])),x=1),E&&(l=Rr(M,kr(A,k[0][1])),f=Rr(M,kr(A,k[1][1])),E=1)):(x<0?(D=Rr(T-i,kr(C-i,D)),o=i+D,d=h):x>0&&(D=Rr(T-h,kr(C-h,D)),o=i,d=h+D),E<0?(L=Rr(M-a,kr(A-a,L)),l=a+L,f=p):E>0&&(L=Rr(M-p,kr(A-p,L)),l=a,f=p+L));break;case Dr:x&&(o=Rr(T,kr(C,i-D*x)),d=Rr(T,kr(C,h+D*x))),E&&(l=Rr(M,kr(A,a-L*E)),f=Rr(M,kr(A,p+L*E)))}d<o&&(x*=-1,r=i,i=h,h=r,r=o,o=d,d=r,_ in Vr&&N.attr("cursor",Ur[_=Vr[_]])),f<l&&(E*=-1,r=a,a=p,p=r,r=l,l=f,f=r,_ in $r&&N.attr("cursor",Ur[_=$r[_]])),w.selection&&(S=w.selection),m&&(o=S[0][0],d=S[1][0]),v&&(l=S[0][1],f=S[1][1]),(S[0][0]!==o||S[0][1]!==l||S[1][0]!==d||S[1][1]!==f)&&(w.selection=[[o,l],[d,f]],c.call(y),I.brush(t,b.name))}function $(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else(function(t,e){var n=t.document.documentElement,r=de(t).on("dragstart.drag",null);e&&(r.on("click.drag",ge,fe),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)})(t.view,g),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),N.attr("cursor",Ur.overlay),w.selection&&(S=w.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(S)&&(w.selection=null,c.call(y)),I.end(t,b.name)}function H(t){switch(t.keyCode){case 16:R=x&&E;break;case 18:b===Ar&&(x&&(h=d-D*x,i=o+D*x),E&&(p=f-L*E,a=l+L*E),b=Dr,V(t));break;case 32:(b===Ar||b===Dr)&&(x<0?h=d-D:x>0&&(i=o-D),E<0?p=f-L:E>0&&(a=l-L),b=Cr,N.attr("cursor",Ur.selection),V(t));break;default:return}Tr(t)}function j(t){switch(t.keyCode){case 16:R&&(m=v=R=!1,V(t));break;case 18:b===Dr&&(x<0?h=d:x>0&&(i=o),E<0?p=f:E>0&&(a=l),b=Ar,V(t));break;case 32:b===Cr&&(t.altKey?(x&&(h=d-D*x,i=o+D*x),E&&(p=f-L*E,a=l+L*E),b=Dr):(x<0?h=d:x>0&&(i=o),E<0?p=f:E>0&&(a=l),b=Ar),N.attr("cursor",Ur[_]),V(t));break;default:return}Tr(t)}}function p(t){u(this,arguments).moved(t)}function f(t){u(this,arguments).ended(t)}function g(){var e=this.__brush||{selection:null};return e.extent=Pr(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){u(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){u(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=u(e,arguments),s=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),a=un(s,o);function l(t){r.selection=1===t&&null===o?null:a(t),c.call(e),i.brush()}return null!==s&&null!==o?l:l(1)})):e.each((function(){var e=this,i=arguments,s=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,s.extent),a=u(e,i).beforestart();Kn(e),s.selection=null===o?null:o,c.call(e),a.start(r).brush(r).end(r)}))},l.clear=function(t,e){l.move(t,null,e)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=de(this.that).datum();o.call(e,this.that,new Sr(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:Or(Pr(t)),l):n},l.filter=function(t){return arguments.length?(r="function"==typeof t?t:Or(!!t),l):r},l.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Or(!!t),l):i},l.handleSize=function(t){return arguments.length?(a=+t,l):a},l.keyModifiers=function(t){return arguments.length?(s=!!t,l):s},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}(Nr)}const Yr=Math.PI,Xr=2*Yr,Kr=1e-6,Qr=Xr-Kr;function Jr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let ti=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Jr:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Jr;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,s){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+s}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>Kr)if(Math.abs(u*a-l*c)>Kr&&i){let d=n-s,p=r-o,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),v=Math.sqrt(h),y=i*Math.tan((Yr-Math.acos((f+h-g)/(2*m*v)))/2),_=y/v,b=y/m;Math.abs(_-1)>Kr&&this._append`L${t+_*c},${e+_*u}`,this._append`A${i},${i},0,0,${+(u*d>c*p)},${this._x1=t+b*a},${this._y1=e+b*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,s){if(t=+t,e=+e,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,h=s?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Kr||Math.abs(this._y1-c)>Kr)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%Xr+Xr),h>Qr?this._append`A${n},${n},0,1,${u},${t-o},${e-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>Kr&&this._append`A${n},${n},0,${+(h>=Yr)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function ei(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ni(t){return(t=ei(Math.abs(t)))?t[1]:NaN}var ri,ii=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function si(t){if(!(e=ii.exec(t)))throw new Error("invalid format: "+t);var e;return new oi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function oi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ai(t,e){var n=ei(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}si.prototype=oi.prototype,oi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const li={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ai(100*t,e),r:ai,s:function(t,e){var n=ei(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ri=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ei(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ci(t){return t}var ui,hi,di,pi=Array.prototype.map,fi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gi(t){var e=void 0===t.grouping||void 0===t.thousands?ci:function(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}(pi.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?ci:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(pi.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=si(t)).fill,u=t.align,h=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):li[y]||(void 0===m&&(m=12),v=!0,y="g"),(p||"0"===c&&"="===u)&&(p=!0,c="0",u="=");var _="$"===d?n:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?r:/[%p]/.test(y)?o:"",x=li[y],E=/[defgprs%]/.test(y);function w(t){var n,r,o,d=_,w=b;if("c"===y)w=x(t)+w,t="";else{var O=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),O&&0==+t&&"+"!==h&&(O=!1),d=(O?"("===h?h:a:"-"===h||"("===h?"":h)+d,w=("s"===y?fi[8+ri/3]:"")+w+(O&&"("===h?")":""),E)for(n=-1,r=t.length;++n<r;)if(48>(o=t.charCodeAt(n))||o>57){w=(46===o?i+t.slice(n+1):t.slice(n))+w,t=t.slice(0,n);break}}g&&!p&&(t=e(t,1/0));var S=d.length+t.length+w.length,T=S<f?new Array(f-S+1).join(c):"";switch(g&&p&&(t=e(T+t,T.length?f-w.length:1/0),T=""),u){case"<":t=d+t+w+T;break;case"=":t=d+T+t+w;break;case"^":t=T.slice(0,S=T.length>>1)+d+t+w+T.slice(S);break;default:t=T+d+t+w}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return t+""},w}return{format:c,formatPrefix:function(t,e){var n=c(((t=si(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ni(e)/3))),i=Math.pow(10,-r),s=fi[8+r/3];return function(t){return n(i*t)+s}}}}!function(t){ui=gi(t),hi=ui.format,di=ui.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var mi=1e-6,vi=1e-12,yi=Math.PI,_i=yi/2,bi=yi/4,xi=2*yi,Ei=180/yi,wi=yi/180,Oi=Math.abs,Si=Math.atan,Ti=Math.atan2,Mi=Math.cos,Ci=Math.exp,Ai=Math.log,Di=Math.sin,Li=Math.sign||function(t){return t>0?1:t<0?-1:0},Ri=Math.sqrt,ki=Math.tan;function Ii(t){return t>1?_i:t<-1?-_i:Math.asin(t)}function Pi(){}function Ni(t,e){t&&Ui.hasOwnProperty(t.type)&&Ui[t.type](t,e)}var Bi={Feature:function(t,e){Ni(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ni(n[r].geometry,e)}},Ui={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Vi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vi(n[r],e,0)},Polygon:function(t,e){$i(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$i(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ni(n[r],e)}};function Vi(t,e,n){var r,i=-1,s=t.length-n;for(e.lineStart();++i<s;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function $i(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Vi(t[n],e,1);e.polygonEnd()}function Hi(t,e){t&&Bi.hasOwnProperty(t.type)?Bi[t.type](t,e):Ni(t,e)}function ji(t){return[Ti(t[1],t[0]),Ii(t[2])]}function Gi(t){var e=t[0],n=t[1],r=Mi(n);return[r*Mi(e),r*Di(e),Di(n)]}function zi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fi(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Zi(t){var e=Ri(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Yi(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Xi(t,e){return Oi(t)>yi&&(t-=Math.round(t/xi)*xi),[t,e]}function Ki(t,e,n){return(t%=xi)?e||n?Yi(Ji(t),ts(e,n)):Ji(t):e||n?ts(e,n):Xi}function Qi(t){return function(e,n){return Oi(e+=t)>yi&&(e-=Math.round(e/xi)*xi),[e,n]}}function Ji(t){var e=Qi(t);return e.invert=Qi(-t),e}function ts(t,e){var n=Mi(t),r=Di(t),i=Mi(e),s=Di(e);function o(t,e){var o=Mi(e),a=Mi(t)*o,l=Di(t)*o,c=Di(e),u=c*n+a*r;return[Ti(l*i-u*s,a*n-c*r),Ii(u*i+l*s)]}return o.invert=function(t,e){var o=Mi(e),a=Mi(t)*o,l=Di(t)*o,c=Di(e),u=c*i-l*s;return[Ti(l*i+c*s,a*n+u*r),Ii(u*n-a*r)]},o}function es(t,e){(e=Gi(e))[0]-=t,Zi(e);var n=function(t){return t>1?0:t<-1?yi:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+xi-mi)%xi}function ns(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Pi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function rs(t,e){return Oi(t[0]-e[0])<mi&&Oi(t[1]-e[1])<mi}function is(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ss(t,e,n,r,i){var s,o,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(rs(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),s=0;s<e;++s)i.point((r=t[s])[0],r[1]);return void i.lineEnd()}o[0]+=2*mi}a.push(n=new is(r,t,null,!0)),l.push(n.o=new is(r,null,n,!1)),a.push(n=new is(o,t,null,!1)),l.push(n.o=new is(o,null,n,!0))}})),a.length){for(l.sort(e),os(a),os(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var c,u,h=a[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,o=c.length;s<o;++s)i.point((u=c[s])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(c=d.p.z,s=c.length-1;s>=0;--s)i.point((u=c[s])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function os(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function as(t){return Oi(t[0])<=yi?t[0]:Li(t[0])*((Oi(t[0])+yi)%xi-yi)}function ls(t,e,n,r){return function(i){var s,o,a,l=e(i),c=ns(),h=e(c),d=!1,p={point:f,lineStart:m,lineEnd:v,polygonStart:function(){p.point=y,p.lineStart=_,p.lineEnd=b,o=[],s=[]},polygonEnd:function(){p.point=f,p.lineStart=m,p.lineEnd=v,o=R(o);var t=function(t,e){var n=as(e),r=e[1],i=Di(r),s=[Di(n),-Mi(n),0],o=0,a=0,l=new u;1===i?r=_i+mi:-1===i&&(r=-_i-mi);for(var c=0,h=t.length;c<h;++c)if(p=(d=t[c]).length)for(var d,p,f=d[p-1],g=as(f),m=f[1]/2+bi,v=Di(m),y=Mi(m),_=0;_<p;++_,g=x,v=w,y=O,f=b){var b=d[_],x=as(b),E=b[1]/2+bi,w=Di(E),O=Mi(E),S=x-g,T=S>=0?1:-1,M=T*S,C=M>yi,A=v*w;if(l.add(Ti(A*T*Di(M),y*O+A*Mi(M))),o+=C?S+T*xi:S,C^g>=n^x>=n){var D=Fi(Gi(f),Gi(b));Zi(D);var L=Fi(s,D);Zi(L);var R=(C^S>=0?-1:1)*Ii(L[2]);(r>R||r===R&&(D[0]||D[1]))&&(a+=C^S>=0?1:-1)}}return(o<-mi||o<mi&&l<-vi)^1&a}(s,r);o.length?(d||(i.polygonStart(),d=!0),ss(o,us,t,n,i)):t&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),o=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(e,n){t(e,n)&&i.point(e,n)}function g(t,e){l.point(t,e)}function m(){p.point=g,l.lineStart()}function v(){p.point=f,l.lineEnd()}function y(t,e){a.push([t,e]),h.point(t,e)}function _(){h.lineStart(),a=[]}function b(){y(a[0][0],a[0][1]),h.lineEnd();var t,e,n,r,l=h.clean(),u=c.result(),p=u.length;if(a.pop(),s.push(a),a=null,p){if(1&l){if((e=(n=u[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}return}p>1&&2&l&&u.push(u.pop().concat(u.shift())),o.push(u.filter(cs))}}return p}}function cs(t){return t.length>1}function us(t,e){return((t=t.x)[0]<0?t[1]-_i-mi:_i-t[1])-((e=e.x)[0]<0?e[1]-_i-mi:_i-e[1])}Xi.invert=Xi;const hs=ls((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,o){var a=s>0?yi:-yi,l=Oi(s-n);Oi(l-yi)<mi?(t.point(n,r=(r+o)/2>0?_i:-_i),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(s,r),e=0):i!==a&&l>=yi&&(Oi(n-i)<mi&&(n-=i*mi),Oi(s-a)<mi&&(s-=a*mi),r=function(t,e,n,r){var i,s,o=Di(t-n);return Oi(o)>mi?Si((Di(e)*(s=Mi(r))*Di(n)-Di(r)*(i=Mi(e))*Di(t))/(i*s*o)):(e+r)/2}(n,r,s,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=s,r=o),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*_i,r.point(-yi,i),r.point(0,i),r.point(yi,i),r.point(yi,0),r.point(yi,-i),r.point(0,-i),r.point(-yi,-i),r.point(-yi,0),r.point(-yi,i);else if(Oi(t[0]-e[0])>mi){var s=t[0]<e[0]?yi:-yi;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}),[-yi,-_i]);function ds(t){var e=Mi(t),n=6*wi,r=e>0,i=Oi(e)>mi;function s(t,n){return Mi(t)*Mi(n)>e}function o(t,n,r){var i=[1,0,0],s=Fi(Gi(t),Gi(n)),o=zi(s,s),a=s[0],l=o-a*a;if(!l)return!r&&t;var c=e*o/l,u=-e*a/l,h=Fi(i,s),d=qi(i,c);Wi(d,qi(s,u));var p=h,f=zi(d,p),g=zi(p,p),m=f*f-g*(zi(d,d)-1);if(!(m<0)){var v=Ri(m),y=qi(p,(-f-v)/g);if(Wi(y,d),y=ji(y),!r)return y;var _,b=t[0],x=n[0],E=t[1],w=n[1];x<b&&(_=b,b=x,x=_);var O=x-b,S=Oi(O-yi)<mi;if(!S&&w<E&&(_=E,E=w,w=_),S||O<mi?S?E+w>0^y[1]<(Oi(y[0]-b)<mi?E:w):E<=y[1]&&y[1]<=w:O>yi^(b<=y[0]&&y[0]<=x)){var T=qi(p,(-f+v)/g);return Wi(T,d),[y,ji(T)]}}}function a(e,n){var i=r?t:yi-t,s=0;return e<-i?s|=1:e>i&&(s|=2),n<-i?s|=4:n>i&&(s|=8),s}return ls(s,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var p,f=[h,d],g=s(h,d),m=r?g?0:a(h,d):g?a(h+(h<0?yi:-yi),d):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(p=o(e,f))||rs(e,p)||rs(f,p))&&(f[2]=1),g!==l)u=0,g?(t.lineStart(),p=o(f,e),t.point(p[0],p[1])):(p=o(e,f),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^g){var v;!(m&n)&&(v=o(f,e,!0))&&(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}g&&(!e||!rs(e,f))&&t.point(f[0],f[1]),e=f,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,s){!function(t,e,n,r,i,s){if(n){var o=Mi(e),a=Di(e),l=r*n;null==i?(i=e+r*xi,s=e-l/2):(i=es(o,i),s=es(o,s),(r>0?i<s:i>s)&&(i+=r*xi));for(var c,u=i;r>0?u>s:u<s;u-=l)c=ji([o,-a*Mi(u),-a*Di(u)]),t.point(c[0],c[1])}}(s,t,n,i,e,r)}),r?[0,-t]:[-yi,t-yi])}var ps=1e9,fs=-ps;function gs(t,e,n,r){function i(i,s){return t<=i&&i<=n&&e<=s&&s<=r}function s(i,s,a,c){var u=0,h=0;if(null==i||(u=o(i,a))!==(h=o(s,a))||l(i,s)<0^a>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+a+4)%4)!==h);else c.point(s[0],s[1])}function o(r,i){return Oi(r[0]-t)<mi?i>0?0:3:Oi(r[0]-n)<mi?i>0?2:1:Oi(r[1]-e)<mi?i>0?1:0:i>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,h,d,p,f,g,m,v,y,_=o,b=ns(),x={point:E,lineStart:function(){x.point=w,c&&c.push(u=[]),v=!0,m=!1,f=g=NaN},lineEnd:function(){l&&(w(h,d),p&&m&&b.rejoin(),l.push(b.result())),x.point=E,m&&_.lineEnd()},polygonStart:function(){_=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var s,o,a=c[n],l=1,u=a.length,h=a[0],d=h[0],p=h[1];l<u;++l)s=d,o=p,d=(h=a[l])[0],p=h[1],o<=r?p>r&&(d-s)*(r-o)>(p-o)*(t-s)&&++e:p<=r&&(d-s)*(r-o)<(p-o)*(t-s)&&--e;return e}(),n=y&&e,i=(l=R(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),i&&ss(l,a,e,s,o),o.polygonEnd()),_=o,l=c=u=null}};function E(t,e){i(t,e)&&_.point(t,e)}function w(s,o){var a=i(s,o);if(c&&u.push([s,o]),v)h=s,d=o,p=a,v=!1,a&&(_.lineStart(),_.point(s,o));else if(a&&m)_.point(s,o);else{var l=[f=Math.max(fs,Math.min(ps,f)),g=Math.max(fs,Math.min(ps,g))],b=[s=Math.max(fs,Math.min(ps,s)),o=Math.max(fs,Math.min(ps,o))];!function(t,e,n,r,i,s){var o,a=t[0],l=t[1],c=0,u=1,h=e[0]-a,d=e[1]-l;if(o=n-a,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=i-a,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>c&&(c=o)}if(o=s-l,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=a+c*h,t[1]=l+c*d),u<1&&(e[0]=a+u*h,e[1]=l+u*d),!0}}}}}(l,b,t,e,n,r)?a&&(_.lineStart(),_.point(s,o),y=!1):(m||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),a||_.lineEnd(),y=!1)}f=s,g=o,m=a}return x}}const ms=t=>t;var vs,ys,_s,bs,xs=new u,Es=new u,ws={point:Pi,lineStart:Pi,lineEnd:Pi,polygonStart:function(){ws.lineStart=Os,ws.lineEnd=Ms},polygonEnd:function(){ws.lineStart=ws.lineEnd=ws.point=Pi,xs.add(Oi(Es)),Es=new u},result:function(){var t=xs/2;return xs=new u,t}};function Os(){ws.point=Ss}function Ss(t,e){ws.point=Ts,vs=_s=t,ys=bs=e}function Ts(t,e){Es.add(bs*t-_s*e),_s=t,bs=e}function Ms(){Ts(vs,ys)}const Cs=ws;var As=1/0,Ds=As,Ls=-As,Rs=Ls;const ks={point:function(t,e){t<As&&(As=t),t>Ls&&(Ls=t),e<Ds&&(Ds=e),e>Rs&&(Rs=e)},lineStart:Pi,lineEnd:Pi,polygonStart:Pi,polygonEnd:Pi,result:function(){var t=[[As,Ds],[Ls,Rs]];return Ls=Rs=-(Ds=As=1/0),t}};var Is,Ps,Ns,Bs,Us=0,Vs=0,$s=0,Hs=0,js=0,Gs=0,zs=0,Fs=0,Ws=0,qs={point:Zs,lineStart:Ys,lineEnd:Qs,polygonStart:function(){qs.lineStart=Js,qs.lineEnd=to},polygonEnd:function(){qs.point=Zs,qs.lineStart=Ys,qs.lineEnd=Qs},result:function(){var t=Ws?[zs/Ws,Fs/Ws]:Gs?[Hs/Gs,js/Gs]:$s?[Us/$s,Vs/$s]:[NaN,NaN];return Us=Vs=$s=Hs=js=Gs=zs=Fs=Ws=0,t}};function Zs(t,e){Us+=t,Vs+=e,++$s}function Ys(){qs.point=Xs}function Xs(t,e){qs.point=Ks,Zs(Ns=t,Bs=e)}function Ks(t,e){var n=t-Ns,r=e-Bs,i=Ri(n*n+r*r);Hs+=i*(Ns+t)/2,js+=i*(Bs+e)/2,Gs+=i,Zs(Ns=t,Bs=e)}function Qs(){qs.point=Zs}function Js(){qs.point=eo}function to(){no(Is,Ps)}function eo(t,e){qs.point=no,Zs(Is=Ns=t,Ps=Bs=e)}function no(t,e){var n=t-Ns,r=e-Bs,i=Ri(n*n+r*r);Hs+=i*(Ns+t)/2,js+=i*(Bs+e)/2,Gs+=i,zs+=(i=Bs*t-Ns*e)*(Ns+t),Fs+=i*(Bs+e),Ws+=3*i,Zs(Ns=t,Bs=e)}const ro=qs;function io(t){this._context=t}io.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,xi)}},result:Pi};var so,oo,ao,lo,co,uo=new u,ho={point:Pi,lineStart:function(){ho.point=po},lineEnd:function(){so&&fo(oo,ao),ho.point=Pi},polygonStart:function(){so=!0},polygonEnd:function(){so=null},result:function(){var t=+uo;return uo=new u,t}};function po(t,e){ho.point=fo,oo=lo=t,ao=co=e}function fo(t,e){lo-=t,co-=e,uo.add(Ri(lo*lo+co*co)),lo=t,co=e}const go=ho;let mo,vo,yo,_o;class bo{constructor(t){this._append=null==t?xo:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return xo;if(e!==mo){const t=10**e;mo=e,vo=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return vo}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==yo||this._append!==vo){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,yo=t,vo=this._append,_o=this._,this._=e}this._+=_o}}result(){const t=this._;return this._="",t.length?t:null}}function xo(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Eo(t){return function(e){var n=new wo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function wo(){}function Oo(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Hi(n,t.stream(ks)),e(ks.result()),null!=r&&t.clipExtent(r),t}function So(t,e,n){return Oo(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],s=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-s*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(i-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([o,a])}),n)}wo.prototype={constructor:wo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var To=16,Mo=Mi(30*wi);function Co(t,e){return+e?function(t,e){function n(r,i,s,o,a,l,c,u,h,d,p,f,g,m){var v=c-r,y=u-i,_=v*v+y*y;if(_>4*e&&g--){var b=o+d,x=a+p,E=l+f,w=Ri(b*b+x*x+E*E),O=Ii(E/=w),S=Oi(Oi(E)-1)<mi||Oi(s-h)<mi?(s+h)/2:Ti(x,b),T=t(S,O),M=T[0],C=T[1],A=M-r,D=C-i,L=y*A-v*D;(L*L/_>e||Oi((v*A+y*D)/_-.5)>.3||o*d+a*p+l*f<Mo)&&(n(r,i,s,o,a,l,M,C,S,b/=w,x/=w,E,g,m),m.point(M,C),n(M,C,S,b,x,E,c,u,h,d,p,f,g,m))}}return function(e){var r,i,s,o,a,l,c,u,h,d,p,f,g={point:m,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,g.point=y,e.lineStart()}function y(r,i){var s=Gi([r,i]),o=t(r,i);n(u,h,c,d,p,f,u=o[0],h=o[1],c=r,d=s[0],p=s[1],f=s[2],To,e),e.point(u,h)}function _(){g.point=m,e.lineEnd()}function b(){v(),g.point=x,g.lineEnd=E}function x(t,e){y(r=t,e),i=u,s=h,o=d,a=p,l=f,g.point=y}function E(){n(u,h,c,d,p,f,i,s,r,o,a,l,To,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return Eo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Ao=Eo({point:function(t,e){this.stream.point(t*wi,e*wi)}});function Do(t,e,n,r,i,s){if(!s)return function(t,e,n,r,i){function s(s,o){return[e+t*(s*=r),n-t*(o*=i)]}return s.invert=function(s,o){return[(s-e)/t*r,(n-o)/t*i]},s}(t,e,n,r,i);var o=Mi(s),a=Di(s),l=o*t,c=a*t,u=o/t,h=a/t,d=(a*n-o*e)/t,p=(a*e+o*n)/t;function f(t,s){return[l*(t*=r)-c*(s*=i)+e,n-c*t-l*s]}return f.invert=function(t,e){return[r*(u*t-h*e+d),i*(p-h*t-u*e)]},f}function Lo(t){return Ro((function(){return t}))()}function Ro(t){var e,n,r,i,s,o,a,l,c,u,h=150,d=480,p=250,f=0,g=0,m=0,v=0,y=0,_=0,b=1,x=1,E=null,w=hs,O=null,S=ms,T=.5;function M(t){return l(t[0]*wi,t[1]*wi)}function C(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Ei,t[1]*Ei]}function A(){var t=Do(h,0,0,b,x,_).apply(null,e(f,g)),r=Do(h,d-t[0],p-t[1],b,x,_);return n=Ki(m,v,y),a=Yi(e,r),l=Yi(n,a),o=Co(a,T),D()}function D(){return c=u=null,M}return M.stream=function(t){return c&&u===t?c:c=Ao(function(t){return Eo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(w(o(S(u=t)))))},M.preclip=function(t){return arguments.length?(w=t,E=void 0,D()):w},M.postclip=function(t){return arguments.length?(S=t,O=r=i=s=null,D()):S},M.clipAngle=function(t){return arguments.length?(w=+t?ds(E=t*wi):(E=null,hs),D()):E*Ei},M.clipExtent=function(t){return arguments.length?(S=null==t?(O=r=i=s=null,ms):gs(O=+t[0][0],r=+t[0][1],i=+t[1][0],s=+t[1][1]),D()):null==O?null:[[O,r],[i,s]]},M.scale=function(t){return arguments.length?(h=+t,A()):h},M.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],A()):[d,p]},M.center=function(t){return arguments.length?(f=t[0]%360*wi,g=t[1]%360*wi,A()):[f*Ei,g*Ei]},M.rotate=function(t){return arguments.length?(m=t[0]%360*wi,v=t[1]%360*wi,y=t.length>2?t[2]%360*wi:0,A()):[m*Ei,v*Ei,y*Ei]},M.angle=function(t){return arguments.length?(_=t%360*wi,A()):_*Ei},M.reflectX=function(t){return arguments.length?(b=t?-1:1,A()):b<0},M.reflectY=function(t){return arguments.length?(x=t?-1:1,A()):x<0},M.precision=function(t){return arguments.length?(o=Co(a,T=t*t),D()):Ri(T)},M.fitExtent=function(t,e){return So(M,t,e)},M.fitSize=function(t,e){return function(t,e,n){return So(t,[[0,0],e],n)}(M,t,e)},M.fitWidth=function(t,e){return function(t,e,n){return Oo(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),s=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([s,o])}),n)}(M,t,e)},M.fitHeight=function(t,e){return function(t,e,n){return Oo(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),s=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([s,o])}),n)}(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&C,A()}}function ko(t){var e=0,n=yi/3,r=Ro(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*wi,n=t[1]*wi):[e*Ei,n*Ei]},i}function Io(t,e){var n=Di(t),r=(n+Di(e))/2;if(Oi(r)<mi)return function(t){var e=Mi(t);function n(t,n){return[t*e,Di(n)/e]}return n.invert=function(t,n){return[t/e,Ii(n*e)]},n}(t);var i=1+n*(2*r-n),s=Ri(i)/r;function o(t,e){var n=Ri(i-2*r*Di(e))/r;return[n*Di(t*=r),s-n*Mi(t)]}return o.invert=function(t,e){var n=s-e,o=Ti(t,Oi(n))*Li(n);return n*r<0&&(o-=yi*Li(t)*Li(n)),[o/r,Ii((i-(t*t+n*n)*r*r)/(2*r))]},o}function Po(){return ko(Io).scale(155.424).center([0,33.6442])}function No(t,e){return[t,Ai(ki((_i+e)/2))]}function Bo(){return function(t){var e,n,r,i=Lo(t),s=i.center,o=i.scale,a=i.translate,l=i.clipExtent,c=null;function u(){var s=yi*o(),a=i(function(t){function e(e){return(e=t(e[0]*wi,e[1]*wi))[0]*=Ei,e[1]*=Ei,e}return t=Ki(t[0]*wi,t[1]*wi,t.length>2?t[2]*wi:0),e.invert=function(e){return(e=t.invert(e[0]*wi,e[1]*wi))[0]*=Ei,e[1]*=Ei,e},e}(i.rotate()).invert([0,0]));return l(null==c?[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]:t===No?[[Math.max(a[0]-s,c),e],[Math.min(a[0]+s,n),r]]:[[c,Math.max(a[1]-s,e)],[n,Math.min(a[1]+s,r)]])}return i.scale=function(t){return arguments.length?(o(t),u()):o()},i.translate=function(t){return arguments.length?(a(t),u()):a()},i.center=function(t){return arguments.length?(s(t),u()):s()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[n,r]]},u()}(No).scale(961/xi)}function Uo(t,e){return[t,e]}function Vo(t,e){var n=Mi(t),r=t===e?Di(t):(n-Mi(e))/(e-t),i=n/r+t;if(Oi(r)<mi)return Uo;function s(t,e){var n=i-e,s=r*t;return[n*Di(s),i-n*Mi(s)]}return s.invert=function(t,e){var n=i-e,s=Ti(t,Oi(n))*Li(n);return n*r<0&&(s-=yi*Li(t)*Li(n)),[s/r,i-Li(r)*Ri(t*t+n*n)]},s}No.invert=function(t,e){return[t,2*Si(Ci(e))-_i]},Uo.invert=Uo;var $o=1.340264,Ho=-.081106,jo=893e-6,Go=.003796,zo=Ri(3)/2;function Fo(t,e){var n=Ii(zo*Di(e)),r=n*n,i=r*r*r;return[t*Mi(n)/(zo*($o+3*Ho*r+i*(7*jo+9*Go*r))),n*($o+Ho*r+i*(jo+Go*r))]}function Wo(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function qo(t,e){return t.parent===e.parent?1:2}function Zo(t,e){return t+e.x}function Yo(t,e){return Math.max(t,e.y)}function Xo(){var t=qo,e=1,n=1,r=!1;function i(i){var s,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Zo,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Yo,0)}(n)):(e.x=s?o+=t(e,s):0,e.y=0,s=e)}));var a=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=a.x-t(a,l)/2,u=l.x+t(l,a)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Ko(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Qo(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=ta)):void 0===e&&(e=Jo);for(var n,r,i,s,o,a=new ra(t),l=[a];n=l.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,s=o-1;s>=0;--s)l.push(r=i[s]=new ra(i[s])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(na)}function Jo(t){return t.children}function ta(t){return Array.isArray(t)?t[1]:null}function ea(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function na(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function ra(t){this.data=t,this.depth=this.height=0,this.parent=null}function ia(t){if("function"!=typeof t)throw new Error;return t}function sa(){return 0}function oa(t){return function(){return t}}Fo.invert=function(t,e){for(var n,r=e,i=r*r,s=i*i*i,o=0;o<12&&(s=(i=(r-=n=(r*($o+Ho*i+s*(jo+Go*i))-e)/($o+3*Ho*i+s*(7*jo+9*Go*i)))*r)*i*i,!(Oi(n)<vi));++o);return[zo*t*($o+3*Ho*i+s*(7*jo+9*Go*i))/Mi(r),Ii(Di(r)/zo)]},Wo.invert=function(t,e){var n,r=e,i=25;do{var s=r*r,o=s*s;r-=n=(r*(1.007226+s*(.015085+o*(.028874*s-.044475-.005916*o)))-e)/(1.007226+s*(.045255+o*(.259866*s-.311325-.005916*11*o)))}while(Oi(n)>mi&&--i>0);return[t/(.8707+(s=r*r)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),r]},ra.prototype=Qo.prototype={constructor:ra,count:function(){return this.eachAfter(Ko)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,s=this,o=[s],a=[],l=-1;s=o.pop();)if(a.push(s),n=s.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;s=a.pop();)t.call(e,s,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,s=[i],o=-1;i=s.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)s.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Qo(this).eachBefore(ea)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,s=[i];do{for(t=s.reverse(),s=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)s.push(e[n])}while(s.length)}};const aa=1664525,la=1013904223,ca=4294967296;function ua(t,e){var n,r;if(pa(e,t))return[e];for(n=0;n<t.length;++n)if(ha(e,t[n])&&pa(ga(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ha(ga(t[n],t[r]),e)&&ha(ga(t[n],e),t[r])&&ha(ga(t[r],e),t[n])&&pa(ma(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ha(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function da(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function pa(t,e){for(var n=0;n<e.length;++n)if(!da(t,e[n]))return!1;return!0}function fa(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return ga(t[0],t[1]);case 3:return ma(t[0],t[1],t[2])}}function ga(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,o=e.y,a=e.r,l=s-n,c=o-r,u=a-i,h=Math.sqrt(l*l+c*c);return{x:(n+s+l/h*u)/2,y:(r+o+c/h*u)/2,r:(h+i+a)/2}}function ma(t,e,n){var r=t.x,i=t.y,s=t.r,o=e.x,a=e.y,l=e.r,c=n.x,u=n.y,h=n.r,d=r-o,p=r-c,f=i-a,g=i-u,m=l-s,v=h-s,y=r*r+i*i-s*s,_=y-o*o-a*a+l*l,b=y-c*c-u*u+h*h,x=p*f-d*g,E=(f*b-g*_)/(2*x)-r,w=(g*m-f*v)/x,O=(p*_-d*b)/(2*x)-i,S=(d*v-p*m)/x,T=w*w+S*S-1,M=2*(s+E*w+O*S),C=E*E+O*O-s*s,A=-(Math.abs(T)>1e-6?(M+Math.sqrt(M*M-4*T*C))/(2*T):C/M);return{x:r+E+w*A,y:i+O+S*A,r:A}}function va(t,e,n){var r,i,s,o,a=t.x-e.x,l=t.y-e.y,c=a*a+l*l;c?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),s=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*a-s*l,n.y=t.y-r*l+s*a):(r=(c+i-o)/(2*c),s=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*a-s*l,n.y=e.y+r*l+s*a)):(n.x=e.x+n.r,n.y=e.y)}function ya(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function _a(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function ba(t){this._=t,this.next=null,this.previous=null}function xa(t,e){if(!(s=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,s,o,a,l,c,u,h,d;if((n=t[0]).x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;va(r,n,i=t[2]),n=new ba(n),r=new ba(r),i=new ba(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<s;++l){va(n._,r._,i=t[l]),i=new ba(i),c=r.next,u=n.previous,h=r._.r,d=n._.r;do{if(h<=d){if(ya(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue t}h+=c._.r,c=c.next}else{if(ya(u._,i._)){(n=u).next=r,r.previous=n,--l;continue t}d+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=_a(n);(i=i.next)!==r;)(a=_a(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=function(t,e){for(var n,r,i=0,s=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,o=[];i<s;)n=t[i],r&&da(r,n)?++i:(r=fa(o=ua(o,n)),i=0);return r}(n,e),l=0;l<s;++l)(n=t[l]).x-=i.x,n.y-=i.y;return i.r}function Ea(t){return Math.sqrt(t.value)}function wa(){var t=null,e=1,n=1,r=sa;function i(i){const s=function(){let t=1;return()=>(t=(aa*t+la)%ca)/ca}();return i.x=e/2,i.y=n/2,t?i.eachBefore(Oa(t)).eachAfter(Sa(r,.5,s)).eachBefore(Ta(1)):i.eachBefore(Oa(Ea)).eachAfter(Sa(sa,1,s)).eachAfter(Sa(r,i.r/Math.min(e,n),s)).eachBefore(Ta(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=function(t){return null==t?null:ia(t)}(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:oa(+t),i):r},i}function Oa(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Sa(t,e,n){return function(r){if(i=r.children){var i,s,o,a=i.length,l=t(r)*e||0;if(l)for(s=0;s<a;++s)i[s].r+=l;if(o=xa(i,n),l)for(s=0;s<a;++s)i[s].r-=l;r.r=o+l}}}function Ta(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Ma(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ca(t,e,n,r,i){for(var s,o=t.children,a=-1,l=o.length,c=t.value&&(r-e)/t.value;++a<l;)(s=o[a]).y0=n,s.y1=i,s.x0=e,s.x1=e+=s.value*c}function Aa(t,e){return t.parent===e.parent?1:2}function Da(t){var e=t.children;return e?e[0]:t.t}function La(t){var e=t.children;return e?e[e.length-1]:t.t}function Ra(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ka(t,e,n){return t.a.parent===e.parent?t.a:n}function Ia(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Pa(){var t=Aa,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,s,o=new Ia(t,0),a=[o];e=a.pop();)if(r=e._.children)for(e.children=new Array(s=r.length),i=s-1;i>=0;--i)a.push(n=e.children[i]=new Ia(r[i],i)),n.parent=e;return(o.parent=new Ia(null,0)).children=[o],o}(i);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(a);else{var c=i,u=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)}));var d=c===u?1:t(c,u)/2,p=d-c.x,f=e/(u.x+d+p),g=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*f,t.y=t.depth*g}))}return i}function s(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,s=i.length;--s>=0;)(e=i[s]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var s=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-s):e.z=s}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,s=e,o=e,a=n,l=s.parent.children[0],c=s.m,u=o.m,h=a.m,d=l.m;a=La(a),s=Da(s),a&&s;)l=Da(l),(o=La(o)).a=e,(i=a.z+h-s.z-c+t(a._,s._))>0&&(Ra(ka(a,e,r),e,i),c+=i,u+=i),h+=a.m,c+=s.m,d+=l.m,u+=o.m;a&&!La(o)&&(o.t=a,o.m+=h-u),s&&!Da(l)&&(l.t=s,l.m+=c-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Na(t,e,n,r,i){for(var s,o=t.children,a=-1,l=o.length,c=t.value&&(i-n)/t.value;++a<l;)(s=o[a]).x0=e,s.x1=r,s.y0=n,s.y1=n+=s.value*c}Ia.prototype=Object.create(ra.prototype);const Ba=function t(e){function n(t,n,r,i,s){!function(t,e,n,r,i,s){for(var o,a,l,c,u,h,d,p,f,g,m,v=[],y=e.children,_=0,b=0,x=y.length,E=e.value;_<x;){l=i-n,c=s-r;do{u=y[b++].value}while(!u&&b<x);for(h=d=u,m=u*u*(g=Math.max(c/l,l/c)/(E*t)),f=Math.max(d/m,m/h);b<x;++b){if(u+=a=y[b].value,a<h&&(h=a),a>d&&(d=a),m=u*u*g,(p=Math.max(d/m,m/h))>f){u-=a;break}f=p}v.push(o={value:u,dice:l<c,children:y.slice(_,b)}),o.dice?Ca(o,n,r,i,E?r+=c*u/E:s):Na(o,n,r,E?n+=l*u/E:i,s),E-=u,_=b}}(e,t,n,r,i,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2);function Ua(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Va=Symbol("implicit");function $a(){var t=new h,e=[],n=[],r=Va;function i(i){let s=t.get(i);if(void 0===s){if(r!==Va)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new h;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return $a(e,n).unknown(r)},Ua.apply(i,arguments),i}function Ha(){var t,e,n=$a().unknown(void 0),r=n.domain,i=n.range,s=0,o=1,a=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=o<s,d=h?o:s,p=h?s:o;t=(p-d)/Math.max(1,n-l+2*c),a&&(t=Math.floor(t)),d+=(p-d-t*(n-l))*u,e=t*(1-l),a&&(d=Math.round(d),e=Math.round(e));var f=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(i);++r<i;)s[r]=t+r*n;return s}(n).map((function(e){return d+t*e}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([s,o]=t,s=+s,o=+o,h()):[s,o]},n.rangeRound=function(t){return[s,o]=t,s=+s,o=+o,a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Ha(r(),[s,o]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ua.apply(h(),arguments)}function ja(t){return+t}var Ga=[0,1];function za(t){return t}function Fa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Wa(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Fa(i,r),s=n(o,s)):(r=Fa(r,i),s=n(s,o)),function(t){return s(r(t))}}function qa(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Fa(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=l(t,e,1,r)-1;return s[n](i[n](e))}}function Za(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ya(){var t,e,n,r,i,s,o=Ga,a=Ga,l=un,c=za;function u(){var t=Math.min(o.length,a.length);return c!==za&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?qa:Wa,i=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),a,l)))(t(c(e)))}return h.invert=function(n){return c(e((s||(s=r(a,o.map(t),sn)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,ja),u()):o.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=hn,u()},h.clamp=function(t){return arguments.length?(c=!!t||za,u()):c!==za},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Xa(){return Ya()(za,za)}function Ka(t,e,n,r){var i,s=O(t,e,n);switch((r=si(r??",f")).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ni(e)/3)))-ni(Math.abs(t)))}(s,o))&&(r.precision=i),di(r,o);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ni(e)-ni(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(i=function(t){return Math.max(0,-ni(Math.abs(t)))}(s))&&(r.precision=i-2*("%"===r.type))}return hi(r)}function Qa(t){var e=t.domain;return t.ticks=function(t){var n=e();return E(n[0],n[n.length-1],t??10)},t.tickFormat=function(t,n){var r=e();return Ka(r[0],r[r.length-1],t??10,n)},t.nice=function(n){null==n&&(n=10);var r,i,s=e(),o=0,a=s.length-1,l=s[o],c=s[a],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=a,a=i);u-- >0;){if((i=w(l,c,n))===r)return s[o]=l,s[a]=c,e(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Ja(){var t=Xa();return t.copy=function(){return Za(t,Ja())},Ua.apply(t,arguments),Qa(t)}function tl(t,e){var n,r=0,i=(t=t.slice()).length-1,s=t[r],o=t[i];return o<s&&(n=r,r=i,i=n,n=s,s=o,o=n),t[r]=e.floor(s),t[i]=e.ceil(o),t}function el(t){return Math.log(t)}function nl(t){return Math.exp(t)}function rl(t){return-Math.log(-t)}function il(t){return-Math.exp(-t)}function sl(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ol(t){return(e,n)=>-t(-e,n)}function al(t){const e=t(el,nl),n=e.domain;let r,i,s=10;function o(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(s),i=function(t){return 10===t?sl:t===Math.E?Math.exp:e=>Math.pow(t,e)}(s),n()[0]<0?(r=ol(r),i=ol(i),t(rl,il)):t(el,nl),e}return e.base=function(t){return arguments.length?(s=+t,o()):s},e.domain=function(t){return arguments.length?(n(t),o()):n()},e.ticks=t=>{const e=n();let o=e[0],a=e[e.length-1];const l=a<o;l&&([o,a]=[a,o]);let c,u,h=r(o),d=r(a);const p=null==t?10:+t;let f=[];if(!(s%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(c=1;c<s;++c)if(u=h<0?c/i(-h):c*i(h),!(u<o)){if(u>a)break;f.push(u)}}else for(;h<=d;++h)for(c=s-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<o)){if(u>a)break;f.push(u)}2*f.length<p&&(f=E(o,a,p))}else f=E(h,d,Math.min(d-h,p)).map(i);return l?f.reverse():f},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(!(s%1)&&null==(n=si(n)).precision&&(n.trim=!0),n=hi(n)),t===1/0)return n;const o=Math.max(1,s*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*s<s-.5&&(e*=s),e<=o?n(t):""}},e.nice=()=>n(tl(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function ll(){const t=al(Ya()).domain([1,10]);return t.copy=()=>Za(t,ll()).base(t.base()),Ua.apply(t,arguments),t}function cl(){var t,e=0,n=1,r=1,i=[.5],s=[0,1];function o(e){return null!=e&&e<=e?s[l(i,e,0,r)]:t}function a(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,a()):[e,n]},o.range=function(t){return arguments.length?(r=(s=Array.from(t)).length-1,a()):s.slice()},o.invertExtent=function(t){var o=s.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length&&(t=e),o},o.thresholds=function(){return i.slice()},o.copy=function(){return cl().domain([e,n]).range(s).unknown(t)},Ua.apply(Qa(o),arguments)}const ul=new Date,hl=new Date;function dl(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,s)=>{const o=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r&&s>0))return o;let a;do{o.push(a=new Date(+n)),e(n,s),t(n)}while(a<n&&n<r);return o},i.filter=n=>dl((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(ul.setTime(+e),hl.setTime(+r),t(ul),t(hl),Math.floor(n(ul,hl))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const pl=dl((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));pl.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?dl((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):pl:null),pl.range;const fl=1e3,gl=6e4,ml=60*gl,vl=24*ml,yl=7*vl,_l=30*vl,bl=365*vl,xl=dl((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*fl)}),((t,e)=>(e-t)/fl),(t=>t.getUTCSeconds()));xl.range;const El=dl((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fl)}),((t,e)=>{t.setTime(+t+e*gl)}),((t,e)=>(e-t)/gl),(t=>t.getMinutes()));El.range,dl((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*gl)}),((t,e)=>(e-t)/gl),(t=>t.getUTCMinutes())).range;const wl=dl((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fl-t.getMinutes()*gl)}),((t,e)=>{t.setTime(+t+e*ml)}),((t,e)=>(e-t)/ml),(t=>t.getHours()));wl.range,dl((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*ml)}),((t,e)=>(e-t)/ml),(t=>t.getUTCHours())).range;const Ol=dl((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gl)/vl),(t=>t.getDate()-1));Ol.range;const Sl=dl((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/vl),(t=>t.getUTCDate()-1));function Tl(t){return dl((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gl)/yl))}Sl.range,dl((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/vl),(t=>Math.floor(t/vl))).range;const Ml=Tl(0),Cl=Tl(1),Al=Tl(2),Dl=Tl(3),Ll=Tl(4),Rl=Tl(5),kl=Tl(6);function Il(t){return dl((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/yl))}Ml.range,Cl.range,Al.range,Dl.range,Ll.range,Rl.range,kl.range;const Pl=Il(0),Nl=Il(1),Bl=Il(2),Ul=Il(3),Vl=Il(4),$l=Il(5),Hl=Il(6);Pl.range,Nl.range,Bl.range,Ul.range,Vl.range,$l.range,Hl.range;const jl=dl((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));jl.range,dl((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())).range;const Gl=dl((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Gl.every=t=>isFinite(t=Math.floor(t))&&t>0?dl((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Gl.range;const zl=dl((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));zl.every=t=>isFinite(t=Math.floor(t))&&t>0?dl((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,zl.range;const[Fl,Wl]=function(t,e,n,r,i,o){const a=[[xl,1,fl],[xl,5,5e3],[xl,15,15e3],[xl,30,3e4],[o,1,gl],[o,5,5*gl],[o,15,15*gl],[o,30,30*gl],[i,1,ml],[i,3,3*ml],[i,6,6*ml],[i,12,12*ml],[r,1,vl],[r,2,2*vl],[n,1,yl],[e,1,_l],[e,3,3*_l],[t,1,bl]];function l(e,n,r){const i=Math.abs(n-e)/r,o=s((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(O(e/bl,n/bl,r));if(0===o)return pl.every(Math.max(O(e,n,r),1));const[l,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return l.every(c)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:l(t,e,n),s=i?i.range(t,+e+1):[];return r?s.reverse():s},l]}(Gl,jl,Ml,Ol,wl,El);function ql(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Yl(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Xl,Kl,Ql={"-":"",_:" ",0:"0"},Jl=/^\s*\d+/,tc=/^%/,ec=/[\\^$*+?|[\]().{}]/g;function nc(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function rc(t){return t.replace(ec,"\\$&")}function ic(t){return new RegExp("^(?:"+t.map(rc).join("|")+")","i")}function sc(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function oc(t,e,n){var r=Jl.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ac(t,e,n){var r=Jl.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function lc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function cc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function uc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function hc(t,e,n){var r=Jl.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function dc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pc(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fc(t,e,n){var r=Jl.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function gc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function mc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function vc(t,e,n){var r=Jl.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _c(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function bc(t,e,n){var r=Jl.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xc(t,e,n){var r=Jl.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ec(t,e,n){var r=Jl.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wc(t,e,n){var r=tc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Oc(t,e,n){var r=Jl.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sc(t,e,n){var r=Jl.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Tc(t,e){return nc(t.getDate(),e,2)}function Mc(t,e){return nc(t.getHours(),e,2)}function Cc(t,e){return nc(t.getHours()%12||12,e,2)}function Ac(t,e){return nc(1+Ol.count(Gl(t),t),e,3)}function Dc(t,e){return nc(t.getMilliseconds(),e,3)}function Lc(t,e){return Dc(t,e)+"000"}function Rc(t,e){return nc(t.getMonth()+1,e,2)}function kc(t,e){return nc(t.getMinutes(),e,2)}function Ic(t,e){return nc(t.getSeconds(),e,2)}function Pc(t){var e=t.getDay();return 0===e?7:e}function Nc(t,e){return nc(Ml.count(Gl(t)-1,t),e,2)}function Bc(t){var e=t.getDay();return e>=4||0===e?Ll(t):Ll.ceil(t)}function Uc(t,e){return t=Bc(t),nc(Ll.count(Gl(t),t)+(4===Gl(t).getDay()),e,2)}function Vc(t){return t.getDay()}function $c(t,e){return nc(Cl.count(Gl(t)-1,t),e,2)}function Hc(t,e){return nc(t.getFullYear()%100,e,2)}function jc(t,e){return nc((t=Bc(t)).getFullYear()%100,e,2)}function Gc(t,e){return nc(t.getFullYear()%1e4,e,4)}function zc(t,e){var n=t.getDay();return nc((t=n>=4||0===n?Ll(t):Ll.ceil(t)).getFullYear()%1e4,e,4)}function Fc(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+nc(e/60|0,"0",2)+nc(e%60,"0",2)}function Wc(t,e){return nc(t.getUTCDate(),e,2)}function qc(t,e){return nc(t.getUTCHours(),e,2)}function Zc(t,e){return nc(t.getUTCHours()%12||12,e,2)}function Yc(t,e){return nc(1+Sl.count(zl(t),t),e,3)}function Xc(t,e){return nc(t.getUTCMilliseconds(),e,3)}function Kc(t,e){return Xc(t,e)+"000"}function Qc(t,e){return nc(t.getUTCMonth()+1,e,2)}function Jc(t,e){return nc(t.getUTCMinutes(),e,2)}function tu(t,e){return nc(t.getUTCSeconds(),e,2)}function eu(t){var e=t.getUTCDay();return 0===e?7:e}function nu(t,e){return nc(Pl.count(zl(t)-1,t),e,2)}function ru(t){var e=t.getUTCDay();return e>=4||0===e?Vl(t):Vl.ceil(t)}function iu(t,e){return t=ru(t),nc(Vl.count(zl(t),t)+(4===zl(t).getUTCDay()),e,2)}function su(t){return t.getUTCDay()}function ou(t,e){return nc(Nl.count(zl(t)-1,t),e,2)}function au(t,e){return nc(t.getUTCFullYear()%100,e,2)}function lu(t,e){return nc((t=ru(t)).getUTCFullYear()%100,e,2)}function cu(t,e){return nc(t.getUTCFullYear()%1e4,e,4)}function uu(t,e){var n=t.getUTCDay();return nc((t=n>=4||0===n?Vl(t):Vl.ceil(t)).getUTCFullYear()%1e4,e,4)}function hu(){return"+0000"}function du(){return"%"}function pu(t){return+t}function fu(t){return Math.floor(+t/1e3)}function gu(t){return new Date(t)}function mu(t){return t instanceof Date?+t:+new Date(+t)}function vu(t,e,n,r,i,s,o,a,l,c){var u=Xa(),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),_=c("%B"),b=c("%Y");function x(t){return(l(t)<t?p:a(t)<t?f:o(t)<t?g:s(t)<t?m:r(t)<t?i(t)<t?v:y:n(t)<t?_:b)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,mu)):d().map(gu)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],e??10)},u.tickFormat=function(t,e){return null==e?x:c(e)},u.nice=function(t){var n=d();return(!t||"function"!=typeof t.range)&&(t=e(n[0],n[n.length-1],t??10)),t?d(tl(n,t)):u},u.copy=function(){return Za(u,vu(t,e,n,r,i,s,o,a,l,c))},u}function yu(){return Ua.apply(vu(Fl,Wl,Gl,jl,Ml,Ol,wl,El,xl,Kl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _u(t){return function(){return t}}!function(t){Xl=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=ic(i),u=sc(i),h=ic(s),d=sc(s),p=ic(o),f=sc(o),g=ic(a),m=sc(a),v=ic(l),y=sc(l),_={a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Tc,e:Tc,f:Lc,g:jc,G:zc,H:Mc,I:Cc,j:Ac,L:Dc,m:Rc,M:kc,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:pu,s:fu,S:Ic,u:Pc,U:Nc,V:Uc,w:Vc,W:$c,x:null,X:null,y:Hc,Y:Gc,Z:Fc,"%":du},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Wc,e:Wc,f:Kc,g:lu,G:uu,H:qc,I:Zc,j:Yc,L:Xc,m:Qc,M:Jc,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:pu,s:fu,S:tu,u:eu,U:nu,V:iu,w:su,W:ou,x:null,X:null,y:au,Y:cu,Z:hu,"%":du},x={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return O(t,e,n,r)},d:mc,e:mc,f:Ec,g:dc,G:hc,H:yc,I:yc,j:vc,L:xc,m:gc,M:_c,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:fc,Q:Oc,s:Sc,S:bc,u:ac,U:lc,V:cc,w:oc,W:uc,x:function(t,e,r){return O(t,n,e,r)},X:function(t,e,n){return O(t,r,e,n)},y:dc,Y:hc,Z:pc,"%":wc};function E(t,e){return function(n){var r,i,s,o=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(o.push(t.slice(l,a)),null!=(i=Ql[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(s=e[r])&&(r=s(n,i)),o.push(r),l=a+1);return o.push(t.slice(l,a)),o.join("")}}function w(t,e){return function(n){var r,i,s=Yl(1900,void 0,1);if(O(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(i=(r=Zl(Yl(s.y,0,1))).getUTCDay(),r=i>4||0===i?Nl.ceil(r):Nl(r),r=Sl.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(i=(r=ql(Yl(s.y,0,1))).getDay(),r=i>4||0===i?Cl.ceil(r):Cl(r),r=Ol.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?Zl(Yl(s.y,0,1)).getUTCDay():ql(Yl(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Zl(s)):ql(s)}}function O(t,e,n,r){for(var i,s,o=0,a=e.length,l=n.length;o<a;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(s=x[i in Ql?e.charAt(o++):i])||(r=s(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=E(n,_),_.X=E(r,_),_.c=E(e,_),b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),{format:function(t){var e=E(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=E(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}(t),Kl=Xl.format,Xl.parse,Xl.utcFormat,Xl.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const bu=Math.abs,xu=Math.atan2,Eu=Math.cos,wu=Math.max,Ou=Math.min,Su=Math.sin,Tu=Math.sqrt,Mu=1e-12,Cu=Math.PI,Au=Cu/2,Du=2*Cu;function Lu(t){return t>=1?Au:t<=-1?-Au:Math.asin(t)}function Ru(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new ti(e)}function ku(t){return t.innerRadius}function Iu(t){return t.outerRadius}function Pu(t){return t.startAngle}function Nu(t){return t.endAngle}function Bu(t){return t&&t.padAngle}function Uu(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/Tu(a*a+l*l),u=c*l,h=-c*a,d=t+u,p=e+h,f=n+u,g=r+h,m=(d+f)/2,v=(p+g)/2,y=f-d,_=g-p,b=y*y+_*_,x=i-s,E=d*g-f*p,w=(_<0?-1:1)*Tu(wu(0,x*x*b-E*E)),O=(E*_-y*w)/b,S=(-E*y-_*w)/b,T=(E*_+y*w)/b,M=(-E*y+_*w)/b,C=O-m,A=S-v,D=T-m,L=M-v;return C*C+A*A>D*D+L*L&&(O=T,S=M),{cx:O,cy:S,x01:-u,y01:-h,x11:O*(i/x-1),y11:S*(i/x-1)}}function Vu(){var t=ku,e=Iu,n=_u(0),r=null,i=Pu,s=Nu,o=Bu,a=null,l=Ru(c);function c(){var c,u,h=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-Au,f=s.apply(this,arguments)-Au,g=bu(f-p),m=f>p;if(a||(a=c=l()),d<h&&(u=d,d=h,h=u),d>Mu)if(g>Du-Mu)a.moveTo(d*Eu(p),d*Su(p)),a.arc(0,0,d,p,f,!m),h>Mu&&(a.moveTo(h*Eu(f),h*Su(f)),a.arc(0,0,h,f,p,m));else{var v,y,_=p,b=f,x=p,E=f,w=g,O=g,S=o.apply(this,arguments)/2,T=S>Mu&&(r?+r.apply(this,arguments):Tu(h*h+d*d)),M=Ou(bu(d-h)/2,+n.apply(this,arguments)),C=M,A=M;if(T>Mu){var D=Lu(T/h*Su(S)),L=Lu(T/d*Su(S));(w-=2*D)>Mu?(x+=D*=m?1:-1,E-=D):(w=0,x=E=(p+f)/2),(O-=2*L)>Mu?(_+=L*=m?1:-1,b-=L):(O=0,_=b=(p+f)/2)}var R=d*Eu(_),k=d*Su(_),I=h*Eu(E),P=h*Su(E);if(M>Mu){var N,B=d*Eu(b),U=d*Su(b),V=h*Eu(x),$=h*Su(x);if(g<Cu)if(N=function(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,h=a-s,d=h*l-u*c;if(!(d*d<Mu))return[t+(d=(u*(e-s)-h*(t-i))/d)*l,e+d*c]}(R,k,V,$,B,U,I,P)){var H=R-N[0],j=k-N[1],G=B-N[0],z=U-N[1],F=1/Su(function(t){return t>1?0:t<-1?Cu:Math.acos(t)}((H*G+j*z)/(Tu(H*H+j*j)*Tu(G*G+z*z)))/2),W=Tu(N[0]*N[0]+N[1]*N[1]);C=Ou(M,(h-W)/(F-1)),A=Ou(M,(d-W)/(F+1))}else C=A=0}O>Mu?A>Mu?(v=Uu(V,$,R,k,d,A,m),y=Uu(B,U,I,P,d,A,m),a.moveTo(v.cx+v.x01,v.cy+v.y01),A<M?a.arc(v.cx,v.cy,A,xu(v.y01,v.x01),xu(y.y01,y.x01),!m):(a.arc(v.cx,v.cy,A,xu(v.y01,v.x01),xu(v.y11,v.x11),!m),a.arc(0,0,d,xu(v.cy+v.y11,v.cx+v.x11),xu(y.cy+y.y11,y.cx+y.x11),!m),a.arc(y.cx,y.cy,A,xu(y.y11,y.x11),xu(y.y01,y.x01),!m))):(a.moveTo(R,k),a.arc(0,0,d,_,b,!m)):a.moveTo(R,k),h>Mu&&w>Mu?C>Mu?(v=Uu(I,P,B,U,h,-C,m),y=Uu(R,k,V,$,h,-C,m),a.lineTo(v.cx+v.x01,v.cy+v.y01),C<M?a.arc(v.cx,v.cy,C,xu(v.y01,v.x01),xu(y.y01,y.x01),!m):(a.arc(v.cx,v.cy,C,xu(v.y01,v.x01),xu(v.y11,v.x11),!m),a.arc(0,0,h,xu(v.cy+v.y11,v.cx+v.x11),xu(y.cy+y.y11,y.cx+y.x11),m),a.arc(y.cx,y.cy,C,xu(y.y11,y.x11),xu(y.y01,y.x01),!m))):a.arc(0,0,h,E,x,m):a.lineTo(I,P)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Cu/2;return[Eu(r)*n,Su(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:_u(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:_u(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:_u(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:_u(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:_u(+t),c):i},c.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:_u(+t),c):s},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:_u(+t),c):o},c.context=function(t){return arguments.length?(a=t??null,c):a},c}var $u=Array.prototype.slice;function Hu(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ju(t){this._context=t}function Gu(t){return new ju(t)}function zu(t){return t[0]}function Fu(t){return t[1]}function Wu(t,e){var n=_u(!0),r=null,i=Gu,s=null,o=Ru(a);function a(a){var l,c,u,h=(a=Hu(a)).length,d=!1;for(null==r&&(s=i(u=o())),l=0;l<=h;++l)!(l<h&&n(c=a[l],l,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(c,l,a),+e(c,l,a));if(u)return s=null,u+""||null}return t="function"==typeof t?t:void 0===t?zu:_u(t),e="function"==typeof e?e:void 0===e?Fu:_u(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:_u(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:_u(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:_u(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(s=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=s=null:s=i(r=t),a):r},a}function qu(t,e,n){var r=null,i=_u(!0),s=null,o=Gu,a=null,l=Ru(c);function c(c){var u,h,d,p,f,g=(c=Hu(c)).length,m=!1,v=new Array(g),y=new Array(g);for(null==s&&(a=o(f=l())),u=0;u<=g;++u){if(!(u<g&&i(p=c[u],u,c))===m)if(m=!m)h=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=u-1;d>=h;--d)a.point(v[d],y[d]);a.lineEnd(),a.areaEnd()}m&&(v[u]=+t(p,u,c),y[u]=+e(p,u,c),a.point(r?+r(p,u,c):v[u],n?+n(p,u,c):y[u]))}if(f)return a=null,f+""||null}function u(){return Wu().defined(i).curve(o).context(s)}return t="function"==typeof t?t:void 0===t?zu:_u(+t),e="function"==typeof e?e:_u(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?Fu:_u(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:_u(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:_u(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:_u(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:_u(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:_u(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:_u(+t),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:_u(!!t),c):i},c.curve=function(t){return arguments.length?(o=t,null!=s&&(a=o(s)),c):o},c.context=function(t){return arguments.length?(null==t?s=a=null:a=o(s=t),c):s},c}function Zu(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Yu(t){return t}ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Xu=Qu(Gu);function Ku(t){this._curve=t}function Qu(t){function e(e){return new Ku(t(e))}return e._curve=t,e}function Ju(){return function(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Qu(t)):e()._curve},t}(Wu().curve(Xu))}Ku.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class th{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function eh(t){return new th(t,!0)}function nh(t){return t.source}function rh(t){return t.target}function ih(){return function(t){let e=nh,n=rh,r=zu,i=Fu,s=null,o=null,a=Ru(l);function l(){let l;const c=$u.call(arguments),u=e.apply(this,c),h=n.apply(this,c);if(null==s&&(o=t(l=a())),o.lineStart(),c[0]=u,o.point(+r.apply(this,c),+i.apply(this,c)),c[0]=h,o.point(+r.apply(this,c),+i.apply(this,c)),o.lineEnd(),l)return o=null,l+""||null}return l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.x=function(t){return arguments.length?(r="function"==typeof t?t:_u(+t),l):r},l.y=function(t){return arguments.length?(i="function"==typeof t?t:_u(+t),l):i},l.context=function(e){return arguments.length?(null==e?s=o=null:o=t(s=e),l):s},l}(eh)}function sh(){}function oh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ah(t){this._context=t}function lh(t){return new ah(t)}function ch(t){this._context=t}function uh(t){return new ch(t)}function hh(t){this._context=t}function dh(t){return new hh(t)}function ph(t,e){this._basis=new ah(t),this._beta=e}ah.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ch.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:oh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},hh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:oh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ph.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],s=e[0],o=t[n]-i,a=e[n]-s,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(s+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const fh=function t(e){function n(t){return 1===e?new ah(t):new ph(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function gh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function mh(t,e){this._context=t,this._k=(1-e)/6}mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:gh(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:gh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vh=function t(e){function n(t){return new mh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function yh(t,e){this._context=t,this._k=(1-e)/6}yh.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:gh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _h=function t(e){function n(t){return new yh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function bh(t,e){this._context=t,this._k=(1-e)/6}bh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const xh=function t(e){function n(t){return new bh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Eh(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Mu){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Mu){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function wh(t,e){this._context=t,this._alpha=e}wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Eh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Oh=function t(e){function n(t){return e?new wh(t,e):new mh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Sh(t,e){this._context=t,this._alpha=e}Sh.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Eh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Th=function t(e){function n(t){return e?new Sh(t,e):new yh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Mh(t,e){this._context=t,this._alpha=e}Mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Eh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ch=function t(e){function n(t){return e?new Mh(t,e):new bh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ah(t){this._context=t}function Dh(t){return new Ah(t)}function Lh(t){return t<0?-1:1}function Rh(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Lh(s)+Lh(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function kh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ih(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Ph(t){this._context=t}function Nh(t){this._context=new Bh(t)}function Bh(t){this._context=t}function Uh(t){return new Ph(t)}function Vh(t){return new Nh(t)}function $h(t){this._context=t}function Hh(t){var e,n,r=t.length-1,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function jh(t){return new $h(t)}function Gh(t,e){this._context=t,this._t=e}function zh(t){return new Gh(t,.5)}function Fh(t){return new Gh(t,0)}function Wh(t){return new Gh(t,1)}function qh(t,e){if((i=t.length)>1)for(var n,r,i,s=1,o=t[e[0]],a=o.length;s<i;++s)for(r=o,o=t[e[s]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Zh(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Yh(t,e){return t[e]}function Xh(t){const e=[];return e.key=t,e}function Kh(){var t=_u([]),e=Zh,n=qh,r=Yh;function i(i){var s,o,a=Array.from(t.apply(this,arguments),Xh),l=a.length,c=-1;for(const t of i)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(t,a[s].key,c,i)]).data=t;for(s=0,o=Hu(e(a));s<l;++s)a[o[s]].index=s;return n(a,o),a}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:_u(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:_u(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Zh:"function"==typeof t?t:_u(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=t??qh,i):n},i}function Qh(t,e){if((a=t.length)>0)for(var n,r,i,s,o,a,l=0,c=t[e[0]].length;l<c;++l)for(s=o=0,n=0;n<a;++n)(i=(r=t[e[n]][l])[1]-r[0])>0?(r[0]=s,r[1]=s+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function Jh(t,e,n){this.k=t,this.x=e,this.y=n}Ah.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ih(this,this._t0,kh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ih(this,kh(this,n=Rh(this,t,e)),n);break;default:Ih(this,this._t0,n=Rh(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Nh.prototype=Object.create(Ph.prototype)).point=function(t,e){Ph.prototype.point.call(this,e,t)},Bh.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}},$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Hh(t),i=Hh(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Jh.prototype={constructor:Jh,scale:function(t){return 1===t?this:new Jh(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Jh(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Jh.prototype;const td="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;var ed="object"==typeof self&&self&&self.Object===Object&&self;const nd=td||ed||Function("return this")(),rd=nd.Symbol;var id=Object.prototype,sd=id.hasOwnProperty,od=id.toString,ad=rd?rd.toStringTag:void 0;var ld=Object.prototype.toString;var cd="[object Null]",ud="[object Undefined]",hd=rd?rd.toStringTag:void 0;function dd(t){return null==t?void 0===t?ud:cd:hd&&hd in Object(t)?function(t){var e=sd.call(t,ad),n=t[ad];try{t[ad]=void 0;var r=!0}catch{}var i=od.call(t);return r&&(e?t[ad]=n:delete t[ad]),i}(t):function(t){return ld.call(t)}(t)}function pd(t){return null!=t&&"object"==typeof t}var fd="[object Symbol]";function gd(t){return"symbol"==typeof t||pd(t)&&dd(t)==fd}function md(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}const vd=Array.isArray;var yd=1/0,_d=rd?rd.prototype:void 0,bd=_d?_d.toString:void 0;function xd(t){if("string"==typeof t)return t;if(vd(t))return md(t,xd)+"";if(gd(t))return bd?bd.call(t):"";var e=t+"";return"0"==e&&1/t==-yd?"-0":e}var Ed=/\s/;var wd=/^\s+/;function Od(t){return t&&t.slice(0,function(t){for(var e=t.length;e--&&Ed.test(t.charAt(e)););return e}(t)+1).replace(wd,"")}function Sd(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Td=NaN,Md=/^[-+]0x[0-9a-f]+$/i,Cd=/^0b[01]+$/i,Ad=/^0o[0-7]+$/i,Dd=parseInt;function Ld(t){if("number"==typeof t)return t;if(gd(t))return Td;if(Sd(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sd(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Od(t);var n=Cd.test(t);return n||Ad.test(t)?Dd(t.slice(2),n?2:8):Md.test(t)?Td:+t}function Rd(t){return t}var kd="[object AsyncFunction]",Id="[object Function]",Pd="[object GeneratorFunction]",Nd="[object Proxy]";function Bd(t){if(!Sd(t))return!1;var e=dd(t);return e==Id||e==Pd||e==kd||e==Nd}const Ud=nd["__core-js_shared__"];var Vd,$d=(Vd=/[^.]+$/.exec(Ud&&Ud.keys&&Ud.keys.IE_PROTO||""))?"Symbol(src)_1."+Vd:"";var Hd=Function.prototype.toString;function jd(t){if(null!=t){try{return Hd.call(t)}catch{}try{return t+""}catch{}}return""}var Gd=/^\[object .+?Constructor\]$/,zd=Function.prototype,Fd=Object.prototype,Wd=zd.toString,qd=Fd.hasOwnProperty,Zd=RegExp("^"+Wd.call(qd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yd(t){return!(!Sd(t)||function(t){return!!$d&&$d in t}(t))&&(Bd(t)?Zd:Gd).test(jd(t))}function Xd(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Yd(n)?n:void 0}const Kd=Xd(nd,"WeakMap");var Qd=Object.create;const Jd=function(){function t(){}return function(e){if(!Sd(e))return{};if(Qd)return Qd(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function tp(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var ep=Date.now;function np(t){return function(){return t}}const rp=function(){try{var t=Xd(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ip=function(t){var e=0,n=0;return function(){var r=ep(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(rp?function(t,e){return rp(t,"toString",{configurable:!0,enumerable:!1,value:np(e),writable:!0})}:Rd);function sp(t){return t!=t}function op(t,e){return!(null==t||!t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}(t,sp,n)}(t,e,0)>-1}var ap=9007199254740991,lp=/^(?:0|[1-9]\d*)$/;function cp(t,e){var n=typeof t;return!!(e=e??ap)&&("number"==n||"symbol"!=n&&lp.test(t))&&t>-1&&t%1==0&&t<e}function up(t,e,n){"__proto__"==e&&rp?rp(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function hp(t,e){return t===e||t!=t&&e!=e}var dp=Object.prototype.hasOwnProperty;function pp(t,e,n){var r=t[e];(!dp.call(t,e)||!hp(r,n)||void 0===n&&!(e in t))&&up(t,e,n)}function fp(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),i?up(n,a,l):pp(n,a,l)}return n}var gp=Math.max;function mp(t,e){return ip(function(t,e,n){return e=gp(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=gp(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,Rd),t+"")}var vp=9007199254740991;function yp(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=vp}function _p(t){return null!=t&&yp(t.length)&&!Bd(t)}function bp(t,e,n){if(!Sd(n))return!1;var r=typeof e;return!!("number"==r?_p(n)&&cp(e,n.length):"string"==r&&e in n)&&hp(n[e],t)}var xp=Object.prototype;function Ep(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xp)}function wp(t){return pd(t)&&"[object Arguments]"==dd(t)}var Op=Object.prototype,Sp=Op.hasOwnProperty,Tp=Op.propertyIsEnumerable,Mp=wp(function(){return arguments}())?wp:function(t){return pd(t)&&Sp.call(t,"callee")&&!Tp.call(t,"callee")};const Cp=Mp;var Ap="object"==typeof e&&e&&!e.nodeType&&e,Dp=Ap&&t&&!t.nodeType&&t,Lp=Dp&&Dp.exports===Ap?nd.Buffer:void 0;const Rp=(Lp?Lp.isBuffer:void 0)||function(){return!1};var kp={};function Ip(t){return function(e){return t(e)}}kp["[object Float32Array]"]=kp["[object Float64Array]"]=kp["[object Int8Array]"]=kp["[object Int16Array]"]=kp["[object Int32Array]"]=kp["[object Uint8Array]"]=kp["[object Uint8ClampedArray]"]=kp["[object Uint16Array]"]=kp["[object Uint32Array]"]=!0,kp["[object Arguments]"]=kp["[object Array]"]=kp["[object ArrayBuffer]"]=kp["[object Boolean]"]=kp["[object DataView]"]=kp["[object Date]"]=kp["[object Error]"]=kp["[object Function]"]=kp["[object Map]"]=kp["[object Number]"]=kp["[object Object]"]=kp["[object RegExp]"]=kp["[object Set]"]=kp["[object String]"]=kp["[object WeakMap]"]=!1;var Pp="object"==typeof e&&e&&!e.nodeType&&e,Np=Pp&&t&&!t.nodeType&&t,Bp=Np&&Np.exports===Pp&&td.process;const Up=function(){try{return Np&&Np.require&&Np.require("util").types||Bp&&Bp.binding&&Bp.binding("util")}catch{}}();var Vp=Up&&Up.isTypedArray;const $p=Vp?Ip(Vp):function(t){return pd(t)&&yp(t.length)&&!!kp[dd(t)]};var Hp=Object.prototype.hasOwnProperty;function jp(t,e){var n=vd(t),r=!n&&Cp(t),i=!n&&!r&&Rp(t),s=!n&&!r&&!i&&$p(t),o=n||r||i||s,a=o?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=a.length;for(var c in t)(e||Hp.call(t,c))&&(!o||!("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||cp(c,l)))&&a.push(c);return a}function Gp(t,e){return function(n){return t(e(n))}}const zp=Gp(Object.keys,Object);var Fp=Object.prototype.hasOwnProperty;function Wp(t){if(!Ep(t))return zp(t);var e=[];for(var n in Object(t))Fp.call(t,n)&&"constructor"!=n&&e.push(n);return e}function qp(t){return _p(t)?jp(t):Wp(t)}var Zp=Object.prototype.hasOwnProperty;function Yp(t){if(!Sd(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Ep(t),n=[];for(var r in t)"constructor"==r&&(e||!Zp.call(t,r))||n.push(r);return n}function Xp(t){return _p(t)?jp(t,!0):Yp(t)}var Kp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qp=/^\w*$/;function Jp(t,e){if(vd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!gd(t))||Qp.test(t)||!Kp.test(t)||null!=e&&t in Object(e)}const tf=Xd(Object,"create");var ef=Object.prototype.hasOwnProperty;var nf=Object.prototype.hasOwnProperty;function rf(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sf(t,e){for(var n=t.length;n--;)if(hp(t[n][0],e))return n;return-1}rf.prototype.clear=function(){this.__data__=tf?tf(null):{},this.size=0},rf.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},rf.prototype.get=function(t){var e=this.__data__;if(tf){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ef.call(e,t)?e[t]:void 0},rf.prototype.has=function(t){var e=this.__data__;return tf?void 0!==e[t]:nf.call(e,t)},rf.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tf&&void 0===e?"__lodash_hash_undefined__":e,this};var of=Array.prototype.splice;function af(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}af.prototype.clear=function(){this.__data__=[],this.size=0},af.prototype.delete=function(t){var e=this.__data__,n=sf(e,t);return!(n<0||(n==e.length-1?e.pop():of.call(e,n,1),--this.size,0))},af.prototype.get=function(t){var e=this.__data__,n=sf(e,t);return n<0?void 0:e[n][1]},af.prototype.has=function(t){return sf(this.__data__,t)>-1},af.prototype.set=function(t,e){var n=this.__data__,r=sf(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const lf=Xd(nd,"Map");function cf(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function uf(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uf.prototype.clear=function(){this.size=0,this.__data__={hash:new rf,map:new(lf||af),string:new rf}},uf.prototype.delete=function(t){var e=cf(this,t).delete(t);return this.size-=e?1:0,e},uf.prototype.get=function(t){return cf(this,t).get(t)},uf.prototype.has=function(t){return cf(this,t).has(t)},uf.prototype.set=function(t,e){var n=cf(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var hf="Expected a function";function df(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(hf);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(df.Cache||uf),n}df.Cache=uf;var pf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ff=/\\(\\)?/g;const gf=function(t){var e=df(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(pf,(function(t,n,r,i){e.push(r?i.replace(ff,"$1"):n||t)})),e}));function mf(t){return null==t?"":xd(t)}function vf(t,e){return vd(t)?t:Jp(t,e)?[t]:gf(mf(t))}var yf=1/0;function _f(t){if("string"==typeof t||gd(t))return t;var e=t+"";return"0"==e&&1/t==-yf?"-0":e}function bf(t,e){for(var n=0,r=(e=vf(e,t)).length;null!=t&&n<r;)t=t[_f(e[n++])];return n&&n==r?t:void 0}function xf(t,e,n){var r=null==t?void 0:bf(t,e);return void 0===r?n:r}function Ef(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var wf=rd?rd.isConcatSpreadable:void 0;function Of(t){return vd(t)||Cp(t)||!!(wf&&t&&t[wf])}function Sf(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Of),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Sf(a,e-1,n,r,i):Ef(i,a):r||(i[i.length]=a)}return i}function Tf(t){return null!=t&&t.length?Sf(t,1):[]}const Mf=Gp(Object.getPrototypeOf,Object);var Cf="[object Object]",Af=Function.prototype,Df=Object.prototype,Lf=Af.toString,Rf=Df.hasOwnProperty,kf=Lf.call(Object);function If(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}(t,e,n)}var Pf=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Nf(t){return Pf.test(t)}var Bf="\\ud800-\\udfff",Uf="["+Bf+"]",Vf="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",$f="\\ud83c[\\udffb-\\udfff]",Hf="[^"+Bf+"]",jf="(?:\\ud83c[\\udde6-\\uddff]){2}",Gf="[\\ud800-\\udbff][\\udc00-\\udfff]",zf="(?:"+Vf+"|"+$f+")?",Ff="[\\ufe0e\\ufe0f]?",Wf=Ff+zf+("(?:\\u200d(?:"+[Hf,jf,Gf].join("|")+")"+Ff+zf+")*"),qf="(?:"+[Hf+Vf+"?",Vf,jf,Gf,Uf].join("|")+")",Zf=RegExp($f+"(?="+$f+")|"+qf+Wf,"g");function Yf(t){return Nf(t)?function(t){return t.match(Zf)||[]}(t):function(t){return t.split("")}(t)}const Xf=function(t){return function(e){var n=Nf(e=mf(e))?Yf(e):void 0,r=n?n[0]:e.charAt(0),i=n?If(n,1).join(""):e.slice(1);return r[t]()+i}}("toUpperCase");const Kf=function(t){return function(e){return null==t?void 0:t[e]}}({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});var Qf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jf=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var tg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var eg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var ng="\\ud800-\\udfff",rg="\\u2700-\\u27bf",ig="a-z\\xdf-\\xf6\\xf8-\\xff",sg="A-Z\\xc0-\\xd6\\xd8-\\xde",og="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ag="["+og+"]",lg="\\d+",cg="["+rg+"]",ug="["+ig+"]",hg="[^"+ng+og+lg+rg+ig+sg+"]",dg="(?:\\ud83c[\\udde6-\\uddff]){2}",pg="[\\ud800-\\udbff][\\udc00-\\udfff]",fg="["+sg+"]",gg="(?:"+ug+"|"+hg+")",mg="(?:"+fg+"|"+hg+")",vg="(?:['’](?:d|ll|m|re|s|t|ve))?",yg="(?:['’](?:D|LL|M|RE|S|T|VE))?",_g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",bg="[\\ufe0e\\ufe0f]?",xg=bg+_g+("(?:\\u200d(?:"+["[^"+ng+"]",dg,pg].join("|")+")"+bg+_g+")*"),Eg="(?:"+[cg,dg,pg].join("|")+")"+xg,wg=RegExp([fg+"?"+ug+"+"+vg+"(?="+[ag,fg,"$"].join("|")+")",mg+"+"+yg+"(?="+[ag,fg+gg,"$"].join("|")+")",fg+"?"+gg+"+"+vg,fg+"+"+yg,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lg,Eg].join("|"),"g");function Og(t,e,n){return t=mf(t),void 0===(e=n?void 0:e)?function(t){return eg.test(t)}(t)?function(t){return t.match(wg)||[]}(t):function(t){return t.match(tg)||[]}(t):t.match(e)||[]}var Sg=RegExp("['’]","g");function Tg(t){return function(e){return function(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}(Og(function(t){return(t=mf(t))&&t.replace(Qf,Kf).replace(Jf,"")}(e).replace(Sg,"")),t,"")}}const Mg=Tg((function(t,e,n){return e=e.toLowerCase(),t+(n?function(t){return Xf(mf(t).toLowerCase())}(e):e)}));function Cg(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Ld(n))==n?n:0),void 0!==e&&(e=(e=Ld(e))==e?e:0),function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}(Ld(t),e,n)}function Ag(t){var e=this.__data__=new af(t);this.size=e.size}Ag.prototype.clear=function(){this.__data__=new af,this.size=0},Ag.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ag.prototype.get=function(t){return this.__data__.get(t)},Ag.prototype.has=function(t){return this.__data__.has(t)},Ag.prototype.set=function(t,e){var n=this.__data__;if(n instanceof af){var r=n.__data__;if(!lf||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new uf(r)}return n.set(t,e),this.size=n.size,this};var Dg="object"==typeof e&&e&&!e.nodeType&&e,Lg=Dg&&t&&!t.nodeType&&t,Rg=Lg&&Lg.exports===Dg?nd.Buffer:void 0,kg=Rg?Rg.allocUnsafe:void 0;function Ig(t,e){if(e)return t.slice();var n=t.length,r=kg?kg(n):new t.constructor(n);return t.copy(r),r}function Pg(){return[]}var Ng=Object.prototype.propertyIsEnumerable,Bg=Object.getOwnPropertySymbols;const Ug=Bg?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}(Bg(t),(function(e){return Ng.call(t,e)})))}:Pg;const Vg=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ef(e,Ug(t)),t=Mf(t);return e}:Pg;function $g(t,e,n){var r=e(t);return vd(t)?r:Ef(r,n(t))}function Hg(t){return $g(t,qp,Ug)}function jg(t){return $g(t,Xp,Vg)}const Gg=Xd(nd,"DataView"),zg=Xd(nd,"Promise"),Fg=Xd(nd,"Set");var Wg="[object Map]",qg="[object Promise]",Zg="[object Set]",Yg="[object WeakMap]",Xg="[object DataView]",Kg=jd(Gg),Qg=jd(lf),Jg=jd(zg),tm=jd(Fg),em=jd(Kd),nm=dd;(Gg&&nm(new Gg(new ArrayBuffer(1)))!=Xg||lf&&nm(new lf)!=Wg||zg&&nm(zg.resolve())!=qg||Fg&&nm(new Fg)!=Zg||Kd&&nm(new Kd)!=Yg)&&(nm=function(t){var e=dd(t),n="[object Object]"==e?t.constructor:void 0,r=n?jd(n):"";if(r)switch(r){case Kg:return Xg;case Qg:return Wg;case Jg:return qg;case tm:return Zg;case em:return Yg}return e});const rm=nm;var im=Object.prototype.hasOwnProperty;const sm=nd.Uint8Array;function om(t){var e=new t.constructor(t.byteLength);return new sm(e).set(new sm(t)),e}var am=/\w*$/;var lm=rd?rd.prototype:void 0,cm=lm?lm.valueOf:void 0;function um(t,e){var n=e?om(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var hm="[object Boolean]",dm="[object Date]",pm="[object Map]",fm="[object Number]",gm="[object RegExp]",mm="[object Set]",vm="[object String]",ym="[object Symbol]",_m="[object ArrayBuffer]",bm="[object DataView]",xm="[object Float32Array]",Em="[object Float64Array]",wm="[object Int8Array]",Om="[object Int16Array]",Sm="[object Int32Array]",Tm="[object Uint8Array]",Mm="[object Uint8ClampedArray]",Cm="[object Uint16Array]",Am="[object Uint32Array]";function Dm(t,e,n){var r=t.constructor;switch(e){case _m:return om(t);case hm:case dm:return new r(+t);case bm:return function(t,e){var n=e?om(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case xm:case Em:case wm:case Om:case Sm:case Tm:case Mm:case Cm:case Am:return um(t,n);case pm:return new r;case fm:case vm:return new r(t);case gm:return function(t){var e=new t.constructor(t.source,am.exec(t));return e.lastIndex=t.lastIndex,e}(t);case mm:return new r;case ym:return function(t){return cm?Object(cm.call(t)):{}}(t)}}function Lm(t){return"function"!=typeof t.constructor||Ep(t)?{}:Jd(Mf(t))}var Rm=Up&&Up.isMap;const km=Rm?Ip(Rm):function(t){return pd(t)&&"[object Map]"==rm(t)};var Im=Up&&Up.isSet;const Pm=Im?Ip(Im):function(t){return pd(t)&&"[object Set]"==rm(t)};var Nm=1,Bm=2,Um=4,Vm="[object Arguments]",$m="[object Function]",Hm="[object GeneratorFunction]",jm="[object Object]",Gm={};function zm(t,e,n,r,i,s){var o,a=e&Nm,l=e&Bm,c=e&Um;if(n&&(o=i?n(t,r,i,s):n(t)),void 0!==o)return o;if(!Sd(t))return t;var u=vd(t);if(u){if(o=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&im.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!a)return tp(t,o)}else{var h=rm(t),d=h==$m||h==Hm;if(Rp(t))return Ig(t,a);if(h==jm||h==Vm||d&&!i){if(o=l||d?{}:Lm(t),!a)return l?function(t,e){return fp(t,Vg(t),e)}(t,function(t,e){return t&&fp(e,Xp(e),t)}(o,t)):function(t,e){return fp(t,Ug(t),e)}(t,function(t,e){return t&&fp(e,qp(e),t)}(o,t))}else{if(!Gm[h])return i?t:{};o=Dm(t,h,a)}}s||(s=new Ag);var p=s.get(t);if(p)return p;s.set(t,o),Pm(t)?t.forEach((function(r){o.add(zm(r,e,n,r,t,s))})):km(t)&&t.forEach((function(r,i){o.set(i,zm(r,e,n,i,t,s))}));var f=u?void 0:(c?l?jg:Hg:l?Xp:qp)(t);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(f||t,(function(r,i){f&&(r=t[i=r]),pp(o,i,zm(r,e,n,i,t,s))})),o}Gm[Vm]=Gm["[object Array]"]=Gm["[object ArrayBuffer]"]=Gm["[object DataView]"]=Gm["[object Boolean]"]=Gm["[object Date]"]=Gm["[object Float32Array]"]=Gm["[object Float64Array]"]=Gm["[object Int8Array]"]=Gm["[object Int16Array]"]=Gm["[object Int32Array]"]=Gm["[object Map]"]=Gm["[object Number]"]=Gm[jm]=Gm["[object RegExp]"]=Gm["[object Set]"]=Gm["[object String]"]=Gm["[object Symbol]"]=Gm["[object Uint8Array]"]=Gm["[object Uint8ClampedArray]"]=Gm["[object Uint16Array]"]=Gm["[object Uint32Array]"]=!0,Gm["[object Error]"]=Gm[$m]=Gm["[object WeakMap]"]=!1;var Fm=1,Wm=4;function qm(t){return zm(t,Fm|Wm)}function Zm(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new uf;++e<n;)this.add(t[e])}function Ym(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Xm(t,e){return t.has(e)}Zm.prototype.add=Zm.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Zm.prototype.has=function(t){return this.__data__.has(t)};var Km=1,Qm=2;function Jm(t,e,n,r,i,s){var o=n&Km,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,p=n&Qm?new Zm:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var f=t[h],g=e[h];if(r)var m=o?r(g,f,h,e,t,s):r(f,g,h,t,e,s);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!Ym(e,(function(t,e){if(!Xm(p,e)&&(f===t||i(f,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(f!==g&&!i(f,g,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function tv(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ev(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var nv=1,rv=2,iv="[object Boolean]",sv="[object Date]",ov="[object Error]",av="[object Map]",lv="[object Number]",cv="[object RegExp]",uv="[object Set]",hv="[object String]",dv="[object Symbol]",pv="[object ArrayBuffer]",fv="[object DataView]",gv=rd?rd.prototype:void 0,mv=gv?gv.valueOf:void 0;var vv=1,yv=Object.prototype.hasOwnProperty;var _v=1,bv="[object Arguments]",xv="[object Array]",Ev="[object Object]",wv=Object.prototype.hasOwnProperty;function Ov(t,e,n,r,i,s){var o=vd(t),a=vd(e),l=o?xv:rm(t),c=a?xv:rm(e),u=(l=l==bv?Ev:l)==Ev,h=(c=c==bv?Ev:c)==Ev,d=l==c;if(d&&Rp(t)){if(!Rp(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new Ag),o||$p(t)?Jm(t,e,n,r,i,s):function(t,e,n,r,i,s,o){switch(n){case fv:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case pv:return!(t.byteLength!=e.byteLength||!s(new sm(t),new sm(e)));case iv:case sv:case lv:return hp(+t,+e);case ov:return t.name==e.name&&t.message==e.message;case cv:case hv:return t==e+"";case av:var a=tv;case uv:var l=r&nv;if(a||(a=ev),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=rv,o.set(t,e);var u=Jm(a(t),a(e),r,i,s,o);return o.delete(t),u;case dv:if(mv)return mv.call(t)==mv.call(e)}return!1}(t,e,l,n,r,i,s);if(!(n&_v)){var p=u&&wv.call(t,"__wrapped__"),f=h&&wv.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,m=f?e.value():e;return s||(s=new Ag),i(g,m,n,r,s)}}return!!d&&(s||(s=new Ag),function(t,e,n,r,i,s){var o=n&vv,a=Hg(t),l=a.length;if(l!=Hg(e).length&&!o)return!1;for(var c=l;c--;){var u=a[c];if(!(o?u in e:yv.call(e,u)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var f=o;++c<l;){var g=t[u=a[c]],m=e[u];if(r)var v=o?r(m,g,u,e,t,s):r(g,m,u,t,e,s);if(!(void 0===v?g===m||i(g,m,n,r,s):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,i,s))}function Sv(t,e,n,r,i){return t===e||(null==t||null==e||!pd(t)&&!pd(e)?t!=t&&e!=e:Ov(t,e,n,r,Sv,i))}var Tv=1,Mv=2;function Cv(t){return t==t&&!Sd(t)}function Av(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function Dv(t){var e=function(t){for(var e=qp(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Cv(i)]}return e}(t);return 1==e.length&&e[0][2]?Av(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,s=i,o=!r;if(null==t)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){var l=(a=n[i])[0],c=t[l],u=a[1];if(o&&a[2]){if(void 0===c&&!(l in t))return!1}else{var h=new Ag;if(r)var d=r(c,u,l,t,e,h);if(!(void 0===d?Sv(u,c,Tv|Mv,r,h):d))return!1}}return!0}(n,t,e)}}function Lv(t,e){return null!=t&&e in Object(t)}function Rv(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=vf(e,t)).length,s=!1;++r<i;){var o=_f(e[r]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++r!=i?s:!!(i=null==t?0:t.length)&&yp(i)&&cp(o,i)&&(vd(t)||Cp(t))}(t,e,Lv)}var kv=1,Iv=2;function Pv(t){return Jp(t)?function(t){return function(e){return null==e?void 0:e[t]}}(_f(t)):function(t){return function(e){return bf(e,t)}}(t)}function Nv(t){return"function"==typeof t?t:null==t?Rd:"object"==typeof t?vd(t)?function(t,e){return Jp(t)&&Cv(e)?Av(_f(t),e):function(n){var r=xf(n,t);return void 0===r&&r===e?Rv(n,t):Sv(e,r,kv|Iv)}}(t[0],t[1]):Dv(t):Pv(t)}function Bv(t,e,n,r){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}const Uv=function(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(!1===n(s[l],l,s))break}return e}}();const Vv=function(t,e){return function(n,r){if(null==n)return n;if(!_p(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&!1!==r(o[s],s,o););return n}}((function(t,e){return t&&Uv(t,e,qp)}));function $v(t,e,n,r){return Vv(t,(function(t,i,s){e(r,t,n(t),s)})),r}const Hv=function(){return nd.Date.now()};var jv=Math.max,Gv=Math.min;function zv(t,e,n){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,s=i;return r=i=void 0,c=e,o=t.apply(s,n)}function f(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-c>=s}function g(){var t=Hv();if(f(t))return m(t);a=setTimeout(g,function(t){var n=e-(t-l);return h?Gv(n,s-(t-c)):n}(t))}function m(t){return a=void 0,d&&r?p(t):(r=i=void 0,o)}function v(){var t=Hv(),n=f(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return function(t){return c=t,a=setTimeout(g,e),u?p(t):o}(l);if(h)return clearTimeout(a),a=setTimeout(g,e),p(l)}return void 0===a&&(a=setTimeout(g,e)),o}return e=Ld(e)||0,Sd(n)&&(u=!!n.leading,s=(h="maxWait"in n)?jv(Ld(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},v.flush=function(){return void 0===a?o:m(Hv())},v}function Fv(t,e,n){(void 0!==n&&!hp(t[e],n)||void 0===n&&!(e in t))&&up(t,e,n)}function Wv(t){return pd(t)&&_p(t)}function qv(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Zv(t,e,n,r,i,s,o){var a=qv(t,n),l=qv(e,n),c=o.get(l);if(c)Fv(t,n,c);else{var u=s?s(a,l,n+"",t,e,o):void 0,h=void 0===u;if(h){var d=vd(l),p=!d&&Rp(l),f=!d&&!p&&$p(l);u=l,d||p||f?vd(a)?u=a:Wv(a)?u=tp(a):p?(h=!1,u=Ig(l,!0)):f?(h=!1,u=um(l,!0)):u=[]:function(t){if(!pd(t)||dd(t)!=Cf)return!1;var e=Mf(t);if(null===e)return!0;var n=Rf.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lf.call(n)==kf}(l)||Cp(l)?(u=a,Cp(a)?u=function(t){return fp(t,Xp(t))}(a):(!Sd(a)||Bd(a))&&(u=Lm(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Fv(t,n,u)}}function Yv(t,e,n,r,i){t!==e&&Uv(e,(function(s,o){if(i||(i=new Ag),Sd(s))Zv(t,e,o,n,Yv,r,i);else{var a=r?r(qv(t,o),s,o+"",t,e,i):void 0;void 0===a&&(a=s),Fv(t,o,a)}}),Xp)}function Xv(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Kv(t,e){var n=-1,r=_p(t)?Array(t.length):[];return Vv(t,(function(t,i,s){r[++n]=e(t,i,s)})),r}function Qv(t,e){return(vd(t)?md:Kv)(t,Nv(e))}var Jv=Object.prototype.hasOwnProperty;const ty=function(t,e){return function(n,r){var i=vd(n)?Bv:$v,s=e?e():{};return i(n,t,Nv(r),s)}}((function(t,e,n){Jv.call(t,n)?t[n].push(e):up(t,n,[e])}));var ey="[object Map]",ny="[object Set]",ry=Object.prototype.hasOwnProperty;function iy(t){if(null==t)return!0;if(_p(t)&&(vd(t)||"string"==typeof t||"function"==typeof t.splice||Rp(t)||$p(t)||Cp(t)))return!t.length;var e=rm(t);if(e==ey||e==ny)return!t.size;if(Ep(t))return!Wp(t).length;for(var n in t)if(ry.call(t,n))return!1;return!0}function sy(t,e){return Sv(t,e)}const oy=Tg((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),ay=function(t){return mp((function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(i--,s):void 0,o&&bp(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e}))}((function(t,e,n){Yv(t,e,n)}));function ly(t,e){var n;return Vv(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function cy(t,e,n){var r=vd(t)?Ym:ly;return n&&bp(t,e,n)&&(e=void 0),r(t,Nv(e))}const uy=Fg&&1/ev(new Fg([,-0]))[1]==1/0?function(t){return new Fg(t)}:function(){};var hy=200;function dy(t,e,n){var r=-1,i=op,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=Xv;else if(s>=hy){var c=e?null:uy(t);if(c)return ev(c);o=!1,i=Xm,l=new Zm}else l=e?[]:a;t:for(;++r<s;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}const py=mp((function(t){var e=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}(t);return Wv(e)&&(e=void 0),dy(Sf(t,1,Wv,!0),Nv(e))}));function fy(t){return t&&t.length?dy(t):[]}var gy=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(gy||{}),my=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(my||{}),vy=(t=>(t.UPDATE="model-update",t))(vy||{}),yy=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t))(yy||{}),_y=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(_y||{}),by=(t=>(t.CHANGE="zoom-domain-change",t))(by||{}),xy=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(xy||{}),Ey=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(Ey||{}),wy=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(wy||{}),Oy=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(Oy||{}),Sy=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(Sy||{}),Ty=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(Ty||{}),My=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(My||{}),Cy=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(Cy||{}),Ay=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(Ay||{}),Dy=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Dy||{}),Ly=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(Ly||{}),Ry=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(Ry||{}),ky=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(ky||{}),Iy=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Iy||{}),Py=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(Py||{}),Ny=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(Ny||{}),By=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(By||{}),Uy=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(Uy||{}),Vy=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Vy||{}),$y=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))($y||{}),Hy=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(Hy||{});const jy=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Uy,Area:wy,Axis:Ey,Bar:My,Boxplot:Cy,CanvasZoom:xy,Chart:gy,Choropleth:Hy,CirclePack:By,Gauge:Ty,Heatmap:$y,Legend:Ny,Line:Dy,Meter:Vy,Modal:my,Model:vy,Pie:Sy,Radar:Ly,Scatter:Ay,Threshold:Py,Toolbar:yy,Tooltip:Iy,Tree:Ry,Treemap:ky,WordCloud:Oy,ZoomBar:_y,ZoomDomain:by},Symbol.toStringTag,{value:"Module"}));var Gy=(t=>(t.HTML="html",t.SVG="svg",t))(Gy||{}),zy=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(zy||{}),Fy=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Fy||{}),Wy=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(Wy||{}),qy=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(qy||{}),Zy=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(Zy||{}),Yy=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(Yy||{}),Xy=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(Xy||{}),Ky=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Ky||{}),Qy=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(Qy||{}),Jy=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Jy||{}),t_=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(t_||{}),e_=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(e_||{}),n_=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(n_||{}),r_=(t=>(t.CENTER="center",t))(r_||{}),i_=(t=>(t.LEFT="left",t.RIGHT="right",t))(i_||{}),s_=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(s_||{}),o_=(t=>(t.START="start",t.MIDDLE="middle",t.END="end",t))(o_||{}),a_=(t=>(t.BASELINE="baseline",t.MIDDLE="middle",t.HANGING="hanging",t))(a_||{}),l_=(t=>(t.SEMI="semi",t.FULL="full",t))(l_||{}),c_=(t=>(t.UP="up",t.DOWN="down",t))(c_||{}),u_=(t=>(t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger",t))(u_||{}),h_=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(h_||{}),d_=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(d_||{}),p_=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(p_||{}),f_=(t=>(t.LEFT="left",t.RIGHT="right",t))(f_||{}),g_=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(g_||{}),m_=(t=>(t.LINEAR="linear",t.QUANTIZE="quantize",t))(m_||{}),v_=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(v_||{}),y_=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(y_||{}),__=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(__||{});const b_="cds",x_={unselected:.05,selected:.4},E_={number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},w_={reference:"value",compareTo:"marker"},O_=.1,S_={rectanglePadding:4},T_={duration:1e3,ease:xr,zoomLevel:3},M_={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},C_={"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1},A_={radius:4,opacity:{hovered:1,default:.3}},D_={opacity:{hovered:.5,default:.3}},L_={default:1,thicker:2},R_={defaultBins:10},k_={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},I_={unselected:.3,selected:1},P_={selected:2,unselected:1},N_={paddingRight:5},B_={indicatorSize:16,paddingLeft:15},U_={paddingLeft:36,paddingRight:24},V_={default:8,proportional:16},$_=2,H_=-15,j_=2,G_=.007,z_={outerRadiusOffset:3},F_=30,W_=20,q_=10,Z_={minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2},Y_={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},X_=4,K_=24,Q_={unfocus:.3,default:.8,selected:1},J_=16,tb={size:24},eb={horizontalOffset:10},nb={default:{duration:300},pie_slice_mouseover:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},rb={height:{[qy.GRAPH_VIEW]:32,[qy.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},ib=[{type:g_.RADIUS,name:"Radius"},{type:g_.AREA,name:"Poor area"},{type:g_.AREA,name:"Satisfactory area"},{type:g_.AREA,name:"Great area"},{type:g_.QUARTILE,name:"Quartiles"}];function sb(t,e){var n;const r=qm(t),i=Object.keys(e.axes||{});null!=(n=null==e?void 0:e.toolbar)&&n.controls&&delete r.toolbar.controls,0===i.length&&delete r.axes;for(const t in r.axes)if(i.includes(t)){const n=e.axes[t];if((n.primary||n.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format"),null==n.mapsTo){const t=n.scaleType;null==t?n.mapsTo="value":t===Xy.TIME?n.mapsTo="date":t===Xy.LABELS&&(n.mapsTo="key")}}else delete r.axes[t];return ub(r,e),ay(r,e)}function ob(t){if(!t)return;const e=t.getAttribute("transform").match(/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/);if(!e)return null;if(e[0]){const t=e[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:t[0],ty:t[1]}}return null}function ab(t){const e=/\(([^)]+)\)/.exec(t);if(e&&e.length>1){const t=e[1].split(",");if(t.length>1)return{x:parseFloat(t[0]),y:parseFloat(t[1])}}return{x:0,y:0}}function lb(t,e,n="value",r=!1){const i=t/e.reduce(((t,e)=>t+e[n]),0)*100;return r?i:i%1!=0?parseFloat(i.toFixed(1)):i}function cb(t,e,n){return n>t.length?t:e===Zy.MID_LINE?t.substr(0,n/2)+"..."+t.substr(-n/2):e===Zy.FRONT_LINE?"..."+t.substr(-n):e===Zy.END_LINE?t.substr(0,n)+"...":void 0}function ub(t,e){const n=hb(t,"legend","additionalItems"),r=hb(e,"legend","additionalItems");if(n&&r){const i=r.map((t=>t.type)),s=n.map((t=>t.type)),o=ib.filter((t=>s.includes(t.type)&&!i.includes(t.type)));t.legend.additionalItems=o,e.legend.additionalItems=py(o,r,"name")}}const hb=(t,...e)=>{let n=t;if(n){for(const t of e){if(null===n[t]||void 0===n[t])return null;n=n[t]}return n}return null},db=(t,e)=>e===Yy.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,pb=(t,e)=>{const{x0:n,x1:r,y0:i,y1:s}=db(t,e);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function fb(t,e,n){return n===Yy.VERTICAL?[t,e]:[e,t]}function gb(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function mb(t){return function(e,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,s=null!=n&&n.width?String(n.width):i;r=t.formattingValues[s]||t.formattingValues[i]}else{var o=t.defaultWidth,a=null!=n&&n.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[o]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function vb(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o,a=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}(l,(function(t){return t.test(a)})):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(l,(function(t){return t.test(a)}));return o=t.valueCallback?t.valueCallback(c):c,{value:o=n.valueCallback?n.valueCallback(o):o,rest:e.slice(a.length)}}}function yb(t){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _b(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function bb(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function xb(t){bb(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===yb(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):(("string"==typeof t||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Eb(t,e){bb(2,arguments);var n=xb(t),r=_b(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function wb(t,e){bb(2,arguments);var n=xb(t),r=_b(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());return s.setMonth(n.getMonth()+r+1,0),i>=s.getDate()?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function Ob(t,e){bb(2,arguments);var n=xb(t).getTime(),r=_b(e);return new Date(n+r)}var Sb=36e5;function Tb(t,e){return bb(2,arguments),Ob(t,_b(e)*Sb)}var Mb={};function Cb(){return Mb}function Ab(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Db(t){bb(1,arguments);var e=xb(t);return e.setHours(0,0,0,0),e}var Lb=864e5;var Rb=6e4;function kb(t,e){return bb(2,arguments),Ob(t,_b(e)*Rb)}function Ib(t,e){return bb(2,arguments),Ob(t,1e3*_b(e))}function Pb(t,e){return bb(2,arguments),wb(t,12*_b(e))}function Nb(t,e){bb(2,arguments);var n=xb(t),r=xb(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}var Bb=6e4,Ub=36e5;function Vb(t){if(bb(1,arguments),!function(t){return bb(1,arguments),t instanceof Date||"object"===yb(t)&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;var e=xb(t);return!isNaN(Number(e))}function $b(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Hb(t,e){bb(2,arguments);var n=xb(t),r=xb(e),i=$b(n,r),s=Math.abs(function(t,e){bb(2,arguments);var n=Db(t),r=Db(e),i=n.getTime()-Ab(n),s=r.getTime()-Ab(r);return Math.round((i-s)/Lb)}(n,r));n.setDate(n.getDate()-i*s);var o=i*(s-+($b(n,r)===-i));return 0===o?0:o}function jb(t,e){return bb(2,arguments),xb(t).getTime()-xb(e).getTime()}var Gb={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},zb="trunc";function Fb(t){return t?Gb[t]:Gb[zb]}function Wb(t,e,n){bb(2,arguments);var r=jb(t,e)/Bb;return Fb(null==n?void 0:n.roundingMethod)(r)}function qb(t){bb(1,arguments);var e=xb(t);return function(t){bb(1,arguments);var e=xb(t);return e.setHours(23,59,59,999),e}(e).getTime()===function(t){bb(1,arguments);var e=xb(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}(e).getTime()}function Zb(t,e){bb(2,arguments);var n,r=xb(t),i=xb(e),s=Nb(r,i),o=Math.abs(function(t,e){bb(2,arguments);var n=xb(t),r=xb(e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(o<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*o);var a=Nb(r,i)===-s;qb(xb(t))&&1===o&&1===Nb(t,i)&&(a=!1),n=s*(o-Number(a))}return 0===n?0:n}function Yb(t,e,n){bb(2,arguments);var r=jb(t,e)/1e3;return Fb(null==n?void 0:n.roundingMethod)(r)}function Xb(t,e){bb(2,arguments);var n=xb(t),r=xb(e),i=Nb(n,r),s=Math.abs(function(t,e){bb(2,arguments);var n=xb(t),r=xb(e);return n.getFullYear()-r.getFullYear()}(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=Nb(n,r)===-i,a=i*(s-Number(o));return 0===a?0:a}function Kb(t){bb(1,arguments);var e=xb(t),n=e.getUTCDay(),r=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function Qb(t){bb(1,arguments);var e=xb(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Kb(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Kb(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Jb(t){bb(1,arguments);var e=xb(t),n=Kb(e).getTime()-function(t){bb(1,arguments);var e=Qb(t),n=new Date(0);return n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0),Kb(n)}(e).getTime();return Math.round(n/6048e5)+1}function tx(t,e){var n,r,i,s,o,a,l,c;bb(1,arguments);var u=Cb(),h=_b(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=xb(t),p=d.getUTCDay(),f=(p<h?7:0)+p-h;return d.setUTCDate(d.getUTCDate()-f),d.setUTCHours(0,0,0,0),d}function ex(t,e){var n,r,i,s,o,a,l,c;bb(1,arguments);var u=xb(t),h=u.getUTCFullYear(),d=Cb(),p=_b(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:d.firstWeekContainsDate)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(h+1,0,p),f.setUTCHours(0,0,0,0);var g=tx(f,e),m=new Date(0);m.setUTCFullYear(h,0,p),m.setUTCHours(0,0,0,0);var v=tx(m,e);return u.getTime()>=g.getTime()?h+1:u.getTime()>=v.getTime()?h:h-1}function nx(t,e){bb(1,arguments);var n=xb(t),r=tx(n,e).getTime()-function(t,e){var n,r,i,s,o,a,l,c;bb(1,arguments);var u=Cb(),h=_b(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),d=ex(t,e),p=new Date(0);return p.setUTCFullYear(d,0,h),p.setUTCHours(0,0,0,0),tx(p,e)}(n,e).getTime();return Math.round(r/6048e5)+1}function rx(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const ix=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return rx("yy"===e?r%100:r,e.length)},sx=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):rx(n+1,2)},ox=function(t,e){return rx(t.getUTCDate(),e.length)},ax=function(t,e){return rx(t.getUTCHours()%12||12,e.length)},lx=function(t,e){return rx(t.getUTCHours(),e.length)},cx=function(t,e){return rx(t.getUTCMinutes(),e.length)},ux=function(t,e){return rx(t.getUTCSeconds(),e.length)},hx=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return rx(Math.floor(r*Math.pow(10,n-3)),e.length)};var dx="midnight",px="noon",fx="morning",gx="afternoon",mx="evening",vx="night";function yx(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var o=e||"";return n+String(i)+o+rx(s,2)}function _x(t,e){return t%60==0?(t>0?"-":"+")+rx(Math.abs(t)/60,2):bx(t,e)}function bx(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+rx(Math.floor(i/60),2)+n+rx(i%60,2)}const xx={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ix(t,e)},Y:function(t,e,n,r){var i=ex(t,r),s=i>0?i:1-i;return"YY"===e?rx(s%100,2):"Yo"===e?n.ordinalNumber(s,{unit:"year"}):rx(s,e.length)},R:function(t,e){return rx(Qb(t),e.length)},u:function(t,e){return rx(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return rx(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return rx(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return sx(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return rx(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=nx(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):rx(i,e.length)},I:function(t,e,n){var r=Jb(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):rx(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):ox(t,e)},D:function(t,e,n){var r=function(t){bb(1,arguments);var e=xb(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=n-e.getTime();return Math.floor(r/864e5)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):rx(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return rx(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return rx(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return rx(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?px:0===i?dx:i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?mx:i>=12?gx:i>=4?fx:vx,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ax(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):lx(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):rx(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):rx(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):cx(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ux(t,e)},S:function(t,e){return hx(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return _x(i);case"XXXX":case"XX":return bx(i);default:return bx(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return _x(i);case"xxxx":case"xx":return bx(i);default:return bx(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+yx(i,":");default:return"GMT"+bx(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+yx(i,":");default:return"GMT"+bx(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return rx(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return rx((r._originalDate||t).getTime(),e.length)}};var Ex=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},wx=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const Ox={p:wx,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Ex(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Ex(i,e)).replace("{{time}}",wx(s,e))}};var Sx=["D","DD"],Tx=["YY","YYYY"];function Mx(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Cx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Ax={date:gb({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:gb({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:gb({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Dx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const Lx={ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:mb({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:mb({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:mb({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:mb({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:mb({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};var Rx={ordinalNumber:function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:e.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:vb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:vb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:vb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:vb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:vb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const kx={code:"en-US",formatDistance:function(t,e,n){var r,i=Cx[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Ax,formatRelative:function(t,e,n,r){return Dx[t]},localize:Lx,match:Rx,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ix=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Px=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nx=/^'([^]*?)'?$/,Bx=/''/g,Ux=/[a-zA-Z]/;function Vx(t,e,n){var r,i,s,o,a,l,c,u,h,d,p,f,g,m,v,y,_,b;bb(2,arguments);var x=String(e),E=Cb(),w=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:E.locale)&&void 0!==r?r:kx,O=_b(null!==(s=null!==(o=null!==(a=null!==(l=null==n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null==n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:E.firstWeekContainsDate)&&void 0!==o?o:null===(h=E.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=_b(null!==(p=null!==(f=null!==(g=null!==(m=null==n?void 0:n.weekStartsOn)&&void 0!==m?m:null==n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==g?g:E.weekStartsOn)&&void 0!==f?f:null===(_=E.locale)||void 0===_||null===(b=_.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var T=xb(t);if(!Vb(T))throw new RangeError("Invalid time value");var M=function(t,e){return bb(2,arguments),Ob(t,-_b(e))}(T,Ab(T)),C={firstWeekContainsDate:O,weekStartsOn:S,locale:w,_originalDate:T};return x.match(Px).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Ox[e])(t,w.formatLong):t})).join("").match(Ix).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(t){var e=t.match(Nx);return e?e[1].replace(Bx,"'"):t}(r);var s=xx[i];if(s)return!(null!=n&&n.useAdditionalWeekYearTokens)&&function(t){return-1!==Tx.indexOf(t)}(r)&&Mx(r,e,String(t)),!(null!=n&&n.useAdditionalDayOfYearTokens)&&function(t){return-1!==Sx.indexOf(t)}(r)&&Mx(r,e,String(t)),s(M,r,w.localize,C);if(i.match(Ux))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function $x(t,e){return bb(2,arguments),Eb(t,-_b(e))}function Hx(t,e){return bb(2,arguments),wb(t,-_b(e))}function jx(t,e){return bb(2,arguments),Tb(t,-_b(e))}function Gx(t,e){return bb(2,arguments),kb(t,-_b(e))}function zx(t,e){return bb(2,arguments),Ib(t,-_b(e))}function Fx(t,e){return bb(2,arguments),Pb(t,-_b(e))}const Wx={type:Zy.END_LINE,threshold:16,numCharacter:14},qx={enabled:!0,position:Ky.BOTTOM,clickable:!0,truncation:Wx,alignment:Qy.LEFT,order:null,additionalItems:[]},Zx={enabled:!0,showTotal:!0,truncation:Wx,groupLabel:"Group"},Yx={top:{visible:!0,includeZero:!0,truncation:Wx},bottom:{visible:!0,includeZero:!0,truncation:Wx},left:{visible:!0,includeZero:!0,truncation:Wx},right:{visible:!0,includeZero:!0,truncation:Wx}},Xx={addSpaceOnEdges:1,showDayName:!1,localeObject:kx,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},Kx=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),Qx={width:null,height:null,resizable:!0,theme:zy.WHITE,tooltip:Zx,legend:qx,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:p_.SHOW_AS_DATATABLE},...Kx?[{type:p_.MAKE_FULLSCREEN}]:[],{type:p_.EXPORT_CSV},{type:p_.EXPORT_PNG},{type:p_.EXPORT_JPG}]}},Jx=ay({},Qx,{thematic:{projection:__.geoNaturalEarth1}}),tE=ay({},Qx,{axes:Yx,timeScale:Xx,grid:{x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},ruler:{enabled:!0},zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:qy.GRAPH_VIEW}}}),eE=ay({},tE,{bars:{maxWidth:16,spacingFactor:.25},timeScale:ay(Xx,{addSpaceOnEdges:1})}),nE=ay({},eE,{}),rE=ay({},eE,{}),iE=ay({},eE,{bars:ay({},eE.bars,{dividerSize:1.5})}),sE=ay({},eE,{}),oE=ay({},tE,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),aE=oE,lE=ay({},oE,{points:{radius:3,filled:!1,enabled:!0}}),cE=ay({},lE,{timeScale:ay(Xx,{addSpaceOnEdges:0})}),uE=cE,hE=ay({},tE,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[3*e/400,25*e/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:g_.RADIUS,name:"Radius"}]}}),dE=ay({},tE,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:g_.AREA,name:"Poor area"},{type:g_.AREA,name:"Satisfactory area"},{type:g_.AREA,name:"Great area"},{type:g_.QUARTILE,name:"Quartiles"}]}}),pE=ay({},eE,{bars:{dividerSize:1.5},timeScale:ay(Xx,{addSpaceOnEdges:0})}),fE=ay({},Qx,{tooltip:ay({},Zx,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[20*e/400,75*e/400]},wordMapsTo:"word"}}),gE=ay({},Qx,{pie:{labels:{formatter:null,enabled:!0},alignment:Qy.LEFT,sortFunction:null,valueMapsTo:"value"}}),mE=ay({},Qx,{legend:{enabled:!1},gauge:{type:l_.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,numberFormatter:t=>Number(t.toFixed(2))%1!=0?t.toFixed(2).toLocaleString():t.toFixed().toLocaleString(),alignment:Qy.LEFT}}),vE=ay({},gE,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20),numberFormatter:t=>Math.floor(t).toLocaleString()},alignment:Qy.LEFT}}),yE=ay({},Qx,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),_E=ay({},yE,{legend:{enabled:!0}}),bE=ay({},Qx,{radar:{axes:{angle:"key",value:"value"},alignment:Qy.LEFT},tooltip:{gridline:{enabled:!0},valueFormatter:t=>t??"N/A"}}),xE=ay({},eE,{comboChartTypes:[]}),EE=ay({tree:{type:t_.TREE}},Qx,{}),wE=ay({},Qx,{data:ay(Qx.data,{groupMapsTo:"name"})}),OE=ay({},Qx,M_,{data:ay(Qx.data,{groupMapsTo:"name"})}),SE=ay({},Qx,{alluvial:{data:ay(Qx.data,{groupMapsTo:"source"}),nodeAlignment:Qy.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),TE=ay({},Qx,{axes:Yx,heatmap:{divider:{state:v_.AUTO},colorLegend:{type:"linear"}}}),ME={alluvialChart:SE,areaChart:cE,axisChart:tE,boxplotChart:sE,bubbleChart:hE,bulletChart:dE,chart:Qx,circlePackChart:OE,choroplethChart:ay({},Jx,{choropleth:{colorLegend:{type:"linear"}}}),comboChart:xE,donutChart:vE,gaugeChart:mE,groupedBarChart:rE,heatmapChart:TE,histogramChart:pE,lineChart:lE,lollipopChart:aE,meterChart:yE,pieChart:gE,proportionalMeterChart:_E,radarChart:bE,scatterChart:oE,simpleBarChart:nE,stackedAreaChart:uE,stackedBarChart:iE,thematicChart:Jx,treeChart:EE,treemapChart:wE,wordCloudChart:fE};var CE=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(CE||{});const AE=[["15seconds",15e3],["minute",6e4],["30minutes",18e5],["hourly",36e5],["daily",864e5],["monthly",2592e6],["quarterly",7776e6],["yearly",31104e6]];function DE(t,e,n,r,i){const s=0===e,o=2===Number(Vx(new Date(t),"c")),a=1===Number(Vx(new Date(t),"q")),l=0!==e?n[e-1]:null;switch(r){case"15seconds":case"minute":case"30minutes":case"hourly":return s||function(t){const{s:e,m:n,H:r}=RE(t);return 0===r&&0===n&&0===e}(t)||IE(t,l)||PE(t);case"daily":return i?s||o||PE(t):s||IE(t,l)||PE(t);case"weekly":return s||o||PE(t);case"monthly":return s||PE(t);case"quarterly":return s||a;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function LE(t,e,n,r,i){const s=i.showDayName,o="daily"===r&&s?"weekly":r,a=new Date(t),l=hb(i,"timeIntervalFormats")[o],c=hb(l,"primary"),u=hb(l,"secondary");let h=DE(t,e,n,r,s)?c:u;return"15seconds"===r&&0!==a.getMilliseconds()&&(h=h.replace("pp","h:mm:ss.SSS a")),Vx(a,h,{locale:i.localeObject})}function RE(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function kE(t,e){return CE[e]?e:1===t.length?"15seconds":function(t){const e=AE.reduce(((e,[,n],r)=>{const i=AE[e][1];return Math.abs(i-t)<Math.abs(n-t)?e:r}),0);return AE[e][0]}(C(function(t){if(t)return t.slice(1).map(((e,n)=>e-t[n]))}(t)))}function IE(t,e){return RE(t).M!==RE(e).M}function PE(t){const{M:e,d:n,s:r,m:i,H:s}=RE(t);return 1===e&&1===n&&0===s&&0===i&&0===r}function NE(t){return void 0===t?"":t.toISOString()}class BE{constructor(t){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=t}getAllDataFromDomain(t){if(!this.getData())return null;const e=this.getOptions();let n=this.getData();const r=this.getDataGroups(),{groupMapsTo:i}=hb(e,"data"),s=hb(e,"axes");return t&&(n=n.filter((e=>t.includes(e[i])))),s&&Object.keys(s).forEach((t=>{const e=s[t].mapsTo,r=s[t].scaleType;if((r===Xy.LINEAR||r===Xy.LOG)&&(n=n.map((t=>({...t,[e]:null===t[e]?t[e]:Number(t[e])})))),e&&s[t].domain)if(r===Xy.LABELS)n=n.filter((n=>s[t].domain.includes(n[e])));else{const[r,i]=s[t].domain;n=n.filter((t=>!(e in t)||t[e]>=r&&t[e]<=i))}})),n.filter((t=>r.find((e=>e.name===t[i]))))}getDisplayData(t){if(!this.get("data"))return null;const{ACTIVE:e}=k_.items.status,n=this.getDataGroups(t),{groupMapsTo:r}=this.getOptions().data;return this.getAllDataFromDomain(t).filter((t=>n.find((n=>n.name===t[r]&&n.status===e))))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(t){const e=this.sanitize(qm(t)),n=this.generateDataGroups(e);return this.set({data:e,dataGroups:n}),e}getDataGroups(t){return hb(this.getOptions(),"data","loading")?[]:t?this.get("dataGroups").filter((e=>t.includes(e.name))):this.get("dataGroups")}getActiveDataGroups(t){const{ACTIVE:e}=k_.items.status;return this.getDataGroups(t).filter((t=>t.status===e))}getDataGroupNames(t){return this.getDataGroups(t).map((t=>t.name))}getActiveDataGroupNames(t){return this.getActiveDataGroups(t).map((t=>t.name))}aggregateBinDataByGroup(t){return ty(t,"group")}getBinConfigurations(){const t=this.getDisplayData(),e=this.getOptions(),n=this.services.cartesianScales.getMainXAxisPosition(),r=this.services.cartesianScales.getDomainIdentifier(),i=e.axes[n],{groupMapsTo:s}=e.data,{bins:o=R_.defaultBins}=i,a=Array.isArray(o),l=T().value((t=>t[r])).thresholds(o)(t);if(a)l[l.length-1].x1=o[o.length-1];else{const t=l[0].x1-l[0].x0;l[l.length-1].x1=+l[l.length-1].x0+t}const c=a?[o[0],o[o.length-1]]:[l[0].x0,l[l.length-1].x1],u=Array.from(new Set(t.map((t=>t[s])))),h=[];return l.forEach((t=>{const e=`${t.x0}-${t.x1}`,n=this.aggregateBinDataByGroup(t);u.forEach((r=>{h.push({group:r,key:e,value:n[r]||0,bin:t.x0})}))})),{bins:l,binsDomain:c}}getBinnedStackedData(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this.getActiveDataGroupNames(),{bins:r}=this.getBinConfigurations(),i=this.getDataValuesGroupedByKeys({bins:r});return Kh().keys(n)(i).map(((t,r)=>Object.keys(t).filter((t=>!isNaN(t))).map((i=>{const s=t[i];return s[e]=n[r],s}))))}getGroupedData(t){const e=this.getDisplayData(t),n={},{groupMapsTo:r}=this.getOptions().data;return e.map((t=>{const e=t[r];null!==n[e]&&void 0!==n[e]?n[e].push(t):n[e]=[t]})),Object.keys(n).map((t=>({name:t,data:n[t]})))}getStackKeys({bins:t=null,groups:e=null}={bins:null,groups:null}){const n=this.getOptions(),r=this.getDisplayData(e);let i;i=t?t.map((t=>`${t.x0}-${t.x1}`)):fy(r.map((t=>{const e=this.services.cartesianScales.getDomainIdentifier(t);return t[e]instanceof Date?NE(t[e]):t[e]&&"function"==typeof t[e].toString?t[e].toString():t[e]})));const s=this.services.cartesianScales.domainAxisPosition,o=n.axes[s].scaleType;return o===Xy.TIME?i.sort(((t,e)=>new Date(t)-new Date(e))):(o===Xy.LOG||o===Xy.LINEAR)&&i.sort(((t,e)=>t-e)),i}getDataValuesGroupedByKeys({bins:t=null,groups:e=null}){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getDisplayData(e),s=this.getDataGroupNames(),o=this.getStackKeys({bins:t,groups:e});return t?o.map((e=>{const[n,i]=e.split("-"),o={x0:n,x1:i},a=t.find((t=>t.x0.toString()===n.toString()));return s.forEach((t=>{o[t]=a.filter((e=>e[r]===t)).length})),o})):o.map((t=>{const e={sharedStackKey:t};return s.forEach((n=>{const s=i.find((e=>{const i=this.services.cartesianScales.getDomainIdentifier(e);return e[r]===n&&Object.prototype.hasOwnProperty.call(e,i)&&(e[i]instanceof Date?NE(e[i])===t:e[i].toString()===t)})),o=this.services.cartesianScales.getRangeIdentifier(e);e[n]=s?s[o]:null})),e}))}getStackedData({percentage:t=!1,groups:e=null,divergent:n=!1}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getActiveDataGroupNames(e),o=this.getDataValuesGroupedByKeys({groups:e});if(t){const t=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}(o.map((t=>[t.sharedStackKey,0])));o.forEach((e=>{s.forEach((n=>{t[e.sharedStackKey]+=e[n]}))})),o.forEach((e=>{s.forEach((n=>{const r=t[e.sharedStackKey];t[e.sharedStackKey]?e[n]=e[n]/r*100:e[n]=0}))}))}return(n?Kh().offset(Qh):Kh()).keys(s)(o).map(((t,e)=>Object.keys(t).filter((t=>!isNaN(t))).map((n=>{const r=t[n];return r[i]=s[e],r}))))}getOptions(){return this.state.options}set(t,e){this.state=Object.assign({},this.state,t);const n=Object.assign({skipUpdate:!1,animate:!0},e);n.skipUpdate||this.update(n.animate)}get(t){return t?this.state[t]:this.state}setOptions(t){const e=this.getOptions();ub(e,t),this.set({options:ay(e,t)})}update(t=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(jy.Model.UPDATE,{animate:t}))}toggleDataLabel(t){const{ACTIVE:e,DISABLED:n}=k_.items.status,r=this.getDataGroups(),i=r.some((t=>t.status===n)),s=r.filter((t=>t.status===e));if(i)if(1===s.length&&s[0].name===t)r.forEach(((t,n)=>{r[n].status=e}));else{const i=r.findIndex((e=>e.name===t));r[i].status=r[i].status===n?e:n}else r.forEach(((i,s)=>{r[s].status=i.name===t?e:n}));const o=r.filter((t=>t.status===e)),a=this.getOptions();r.some((t=>t.status===n))?a.data.selectedGroups=o.map((t=>t.name)):a.data.selectedGroups=[],this.services.events.dispatchEvent(jy.Legend.ITEMS_UPDATE,{dataGroups:r}),this.set({dataGroups:r})}getIsFilled(t,e,n,r){const i=this.getOptions();return i.getIsFilled?i.getIsFilled(t,e,n,r):r}getFillColor(t,e,n){const r=this.getOptions(),i=hb(this.colorScale,t);return r.getFillColor?r.getFillColor(t,e,n,i):i}getStrokeColor(t,e,n){const r=this.getOptions(),i=hb(this.colorScale,t);return r.getStrokeColor?r.getStrokeColor(t,e,n,i):i}isUserProvidedColorScaleValid(){const t=hb(this.getOptions(),"color","scale"),e=this.getDataGroups();return null!=t&&0!=Object.keys(t).length&&e.some((e=>Object.keys(t).includes(e.name)))}getColorClassName(t){const e=this.colorClassNames(t.dataGroupName);let n=t.originalClassName;return t.classNameTypes.forEach((r=>n=t.originalClassName?`${n} ${r}-${e}`:`${r}-${e}`)),n||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(t){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");const e=[],{datasets:n,labels:r}=t;return n.forEach((t=>{t.data.forEach(((n,i)=>{let s;const o=hb(t,"label");if(null===o){s=hb(r,i)||"Ungrouped"}else s=o;const a={group:s,key:r[i]};isNaN(n)?(a.value=n.value,a.date=n.date):a.value=n,e.push(a)}))})),e}getTabularDataArray(){return[]}exportToCSV(){const t=this.getTabularDataArray().map((t=>t.map((t=>`"${"&ndash;"===t?"–":t}"`))));let e="",n="";t.forEach((function(r,i){n=r.join(","),e+=i<t.length?n+"\n":n}));const r=this.getOptions();let i="myChart";const s=hb(r,"fileDownload","fileName");"function"==typeof s?i=s("csv"):"string"==typeof s&&(i=s),this.services.files.downloadCSV(e,`${i}.csv`)}getTabularData(t){return Array.isArray(t)?t:this.transformToTabularData(t)}sanitize(t){return this.getTabularData(t)}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach((t=>{-1===this.allDataGroups.indexOf(t)&&this.allDataGroups.push(t)})):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(t){const{groupMapsTo:e}=this.getOptions().data,{ACTIVE:n,DISABLED:r}=k_.items.status,i=this.getOptions(),s=fy(t.map((t=>t[e])));i.data.selectedGroups.length&&(i.data.selectedGroups.every((t=>s.includes(t)))||(i.data.selectedGroups=[]));const o=t=>!i.data.selectedGroups.length||i.data.selectedGroups.includes(t)?n:r;return s.map((t=>({name:t,status:o(t)})))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const t=this.getOptions(),e=hb(t,"color","scale");Object.keys(e).forEach((t=>{this.allDataGroups.includes(t)||console.warn(`"${t}" does not exist in data groups.`)})),this.allDataGroups.filter((t=>e[t])).forEach((t=>this.colorScale[t]=e[t]))}setColorClassNames(){const t=hb(this.getOptions(),"color","pairing");let e=hb(t,"numberOfVariants");(!e||e<this.allDataGroups.length)&&(e=this.allDataGroups.length);let n=hb(t,"option");const r=e>5?14:e;n=n<=C_[`${r}-color`]?n:1;const i=this.allDataGroups.map(((t,e)=>`${r}-${n}-${e%14+1}`));this.colorClassNames=$a().range(i).domain(this.allDataGroups)}}const UE=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${t}`)})();function VE(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function $E(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function HE(t){const e=$E(t,"border-left-width"),n=$E(t,"border-right-width");return t.clientWidth+e+n}function jE(t){const e=$E(t,"border-top-width"),n=$E(t,"border-bottom-width");return t.clientHeight+e+n}function GE(t,e={}){return{width:e.width||HE(t),height:e.height||jE(t)}}const zE=16384;function FE(t){return new Promise(((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function WE(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(i)}const qE=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||qE(n,e))};function ZE(t,e,n){const r=`.${t}:${e}`,i=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return VE(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}function YE(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const s=UE();try{e.className=`${e.className} ${s}`}catch{return}const o=document.createElement("style");o.appendChild(ZE(s,n,r)),e.appendChild(o)}const XE="application/font-woff",KE="image/jpeg",QE={woff:XE,woff2:XE,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:KE,jpeg:KE,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function JE(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return QE[e]||""}function tw(t){return-1!==t.search(/^(data:)/)}function ew(t,e){return`data:${e};base64,${t}`}async function nw(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise(((t,e)=>{const s=new FileReader;s.onerror=e,s.onloadend=()=>{try{t(n({res:r,result:s.result}))}catch(t){e(t)}},s.readAsDataURL(i)}))}const rw={};async function iw(t,e,n){const r=function(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=rw[r])return rw[r];let i;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{i=ew(await nw(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n)))),e)}catch(e){i=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${t}`;e&&(r="string"==typeof e?e:e.message),r&&console.warn(r)}return rw[r]=i,i}async function sw(t,e){return qE(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):FE(e)}(t):qE(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),FE(e.toDataURL())}const n=t.poster,r=JE(n);return FE(await iw(n,r,e))}(t,e):qE(t,HTMLIFrameElement)?async function(t){var e;try{if(null!==(e=null==t?void 0:t.contentDocument)&&void 0!==e&&e.body)return await lw(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const ow=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function aw(t,e){return qE(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):VE(r).forEach((i=>{let s=r.getPropertyValue(i);"font-size"===i&&s.endsWith("px")&&(s=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1+"px"),qE(t,HTMLIFrameElement)&&"display"===i&&"inline"===s&&(s="block"),"d"===i&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))}))}(t,e),function(t,e){YE(t,e,":before"),YE(t,e,":after")}(t,e),function(t,e){qE(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),qE(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(qE(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}(t,e)),e}async function lw(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>sw(t,e))).then((n=>async function(t,e,n){var r,i;let s=[];return s=ow(t)&&t.assignedNodes?VE(t.assignedNodes()):qE(t,HTMLIFrameElement)&&null!==(r=t.contentDocument)&&void 0!==r&&r.body?VE(t.contentDocument.body.childNodes):VE((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===s.length||qE(t,HTMLVideoElement)||await s.reduce(((t,r)=>t.then((()=>lw(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>aw(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let i=0;i<n.length;i++){const s=n[i].getAttribute("xlink:href");if(s){const n=t.querySelector(s),i=document.querySelector(s);!n&&i&&!r[s]&&(r[s]=await lw(i,e,!0))}}const i=Object.values(r);if(i.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<i.length;t++)r.appendChild(i[t]);t.appendChild(n)}return t}(t,e))):null}const cw=/url\((['"]?)([^'"]+?)\1\)/g,uw=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,hw=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function dw(t,e,n,r,i){try{const s=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}(e,n):e,o=JE(e);let a;return a=i?ew(await i(s),o):await iw(s,o,r),t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${a}$3`)}catch{}return t}function pw(t){return-1!==t.search(cw)}async function fw(t,e,n){if(!pw(t))return t;const r=function(t,{preferredFontFormat:e}){return e?t.replace(hw,(t=>{for(;;){const[n,,r]=uw.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}(t,n);return function(t){const e=[];return t.replace(cw,((t,n,r)=>(e.push(r),t))),e.filter((t=>!tw(t)))}(r).reduce(((t,r)=>t.then((t=>dw(t,r,e,n)))),Promise.resolve(r))}async function gw(t,e,n){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(i){const r=await fw(i,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function mw(t,e){qE(t,Element)&&(await async function(t,e){await gw("background",t,e)||await gw("background-image",t,e),await gw("mask",t,e)||await gw("mask-image",t,e)}(t,e),await async function(t,e){const n=qE(t,HTMLImageElement);if((!n||tw(t.src))&&(!qE(t,SVGImageElement)||tw(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await iw(r,JE(r),e);await new Promise(((e,r)=>{t.onload=e,t.onerror=r;const s=t;s.decode&&(s.decode=e),"lazy"===s.loading&&(s.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i}))}(t,e),await async function(t,e){const n=VE(t.childNodes).map((t=>mw(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const vw={};async function yw(t){let e=vw[t];return null!=e||(e={url:t,cssText:await(await fetch(t)).text()},vw[t]=e),e}async function _w(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map((async i=>{let s=i.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,t.url).href),nw(s,e.fetchRequestInit,(({result:t})=>(n=n.replace(i,`url(${t})`),[i,t])))}));return Promise.all(i).then((()=>n))}function bw(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=r.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=i.exec(n);if(null===t){if(t=s.exec(n),null===t)break;i.lastIndex=s.lastIndex}else s.lastIndex=i.lastIndex;e.push(t[0])}return e}async function xw(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=VE(t.ownerDocument.styleSheets);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>pw(t.style.getPropertyValue("src"))))}(await async function(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{VE(n.cssRules||[]).forEach(((t,i)=>{if(t.type===CSSRule.IMPORT_RULE){let s=i+1;const o=yw(t.href).then((t=>_w(t,e))).then((t=>bw(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?s+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(o)}}))}catch(i){const s=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(yw(n.href).then((t=>_w(t,e))).then((t=>bw(t).forEach((t=>{s.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",i)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{VE(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e))}async function Ew(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await async function(t,e){const n=await xw(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return fw(t.cssText,n,e)})))).join("\n")}(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}async function ww(t,e={}){const{width:n,height:r}=GE(t,e),i=await lw(t,e,!0);return await Ew(i,e),await mw(i,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]}))}(i,e),await WE(i,n,r)}async function Ow(t,e={}){const{width:n,height:r}=GE(t,e),i=await ww(t,e),s=await FE(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||function(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),c=e.canvasWidth||n,u=e.canvasHeight||r;return o.width=c*l,o.height=u*l,e.skipAutoScale||function(t){(t.width>zE||t.height>zE)&&(t.width>zE&&t.height>zE?t.width>t.height?(t.height*=zE/t.width,t.width=zE):(t.width*=zE/t.height,t.height=zE):t.width>zE?(t.height*=zE/t.width,t.width=zE):(t.width*=zE/t.height,t.height=zE))}(o),o.style.width=`${c}`,o.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}class Sw{constructor(t,e){this.model=t,this.services=e,this.init()}init(){}update(){}setModel(t){this.model=t}setServices(t){this.services=t}}class Tw extends Sw{constructor(t,e){super(t,e),this.chartID=""}static getHTMLElementSize(t){return{width:t.clientWidth,height:t.clientHeight}}static getSVGElementSize(t,e={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){t.attr||(t=de(t));const n={width:0,height:0},r=t=>{t&&Object.keys(n).forEach((e=>{if(t[e]){const r=t[e],i=parseFloat(r);r&&i>n[e]&&-1===(""+r).indexOf("%")&&(n[e]=i)}}))},i={width:t.attr("width"),height:t.attr("height")},s=t.node();let o,a,l,c,u;try{"function"==typeof s.getBBox&&(o=s.getBBox(),a={width:o.width,height:o.height})}catch(t){console.error(t)}try{"function"==typeof(null==s?void 0:s.getBoundingClientRect)&&(l=s.getBoundingClientRect(),c={width:l.width,height:l.height})}catch(t){console.error(t)}if(s instanceof SVGSVGElement&&(u={width:s.clientWidth,height:s.clientHeight}),e){if(e.useAttrs&&(r(i),n.width>0&&n.height>0))return n;if(e.useClientDimensions&&(r(u),n.width>0&&n.height>0))return u;if(e.useBBox&&(r(a),n.width>0&&n.height>0))return a;if(e.useBoundingRect&&(r(c),n.width>0&&n.height>0))return c}try{r({width:hb(t.node(),"width","baseVal","value"),height:hb(t.node(),"height","baseVal","value")})}catch{r(u),r(a),r(i)}return n}static appendOrSelect(t,e){const n=t.select(`${e}`);if(n.empty()){let n,r,i=e.split("#");return 2===i.length?(n=i[0],i=i[1].split("."),r=i[0]):(i=e.split("."),n=i[0]),t.append(n).attr("id",r).attr("class",i.slice(1).join(" "))}return n}init(){this.styleHolderElement(),this.initializeID(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}generateElementIDString(t){return`chart-${this.chartID}-${t}`}initializeID(){this.chartID=Math.floor(281474976710656*(1+Math.random())).toString(16)}addMainContainer(){const t=this.model.getOptions(),e=hb(t,"style","prefix"),n=de(this.getHolder()).append("div").classed(`${b_}--${e}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");n.append("g").attr("class","DONT_STYLE_ME_css_styles_verifier"),this.mainContainer=n.node()}update(){this.styleHolderElement()}styleHolderElement(){const t=this.getHolder(),{width:e,height:n,theme:r}=this.model.getOptions();e!==this.width&&(t.style.width=e,this.width=e),n!==this.height&&(t.style.height=n,this.height=n),de(this.getHolder()).classed(`${b_}--chart-holder`,!0).attr("data-carbon-theme",r)}getHolder(){return this.model.get("holder")}exportToJPG(){const t=this,e=this.model.getOptions(),n=de(this.getHolder());n.classed("filled",!0),async function(t,e={}){return(await Ow(t,e)).toDataURL("image/jpeg",e.quality||1)}(this.getMainContainer(),{quality:1,filter:t=>!(t.classList&&t.classList.contains("cds--cc--toolbar"))}).then((function(r){var i;let s="myChart";const o=hb(e,"fileDownload","fileName");"function"==typeof o?s=o("jpg"):"string"==typeof o&&(s=o),null==(i=t.services.files)||i.downloadImage(r,`${s}.jpg`),n.classed("filled",!1)}))}exportToPNG(){const t=this,e=this.model.getOptions(),n=de(this.getHolder());n.classed("filled",!0),async function(t,e={}){return(await Ow(t,e)).toDataURL()}(this.getMainContainer(),{quality:1,filter:t=>!(t.classList&&t.classList.contains("cds--cc--toolbar"))}).then((function(r){var i;let s="myChart";const o=hb(e,"fileDownload","fileName");"function"==typeof o?s=o("png"):"string"==typeof o&&(s=o),null==(i=t.services.files)||i.downloadImage(r,`${s}.png`),n.classed("filled",!1)})).catch((function(t){console.error("oops, something went wrong!",t)}))}toggleFullscreen(){const t=this.getHolder();de(t).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",(()=>{const t=de(this.getHolder()),e=t.classed("fullscreen");t.classed("fullscreen",!e)}))}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:t}=Tw.getSVGElementSize(de(this.mainContainer),{useBBox:!0}),e=de(this.mainContainer).attr("class"),n=de(this.mainContainer).selectAll(`.${e} > svg`);let r=0;n.nodes().forEach((function(t){r+=Number(Tw.getSVGElementSize(de(t),{useBBox:!0}).height)})),r<=t?de(this.mainContainer).attr("height",r):de(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const t=this.getHolder();t&&de(t).on("mouseover",(()=>{var t;null==(t=this.services.events)||t.dispatchEvent(jy.Chart.MOUSEOVER)})).on("mouseout",(()=>{var t;null==(t=this.services.events)||t.dispatchEvent(jy.Chart.MOUSEOUT)}))}addResizeListener(){const t=this.getHolder();if(!t)return;let e=t.clientWidth,n=t.clientHeight;const r=zv((()=>{var r;t&&(Math.abs(e-t.clientWidth)>1||Math.abs(n-t.clientHeight)>1)&&(e=t.clientWidth,n=t.clientHeight,null==(r=this.services.events)||r.dispatchEvent(jy.Chart.RESIZE))}),12.5);new ResizeObserver(r).observe(t)}}class Mw{constructor(t,e,n){if(this.type="",this.renderType=Gy.HTML,this.id="",this.parent=void 0,this.configs={},this.model=t,this.services=e,n&&(this.configs=n,this.configs.id)){const t=hb(this.model.getOptions(),"style","prefix");this.id=`${t}--${this.configs.id}`}this.parent||this.setParent(de(this.services.domUtils.getMainContainer()))}init(){}render(t=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(t){this.model=t}setServices(t){this.services=t}setParent(t){var e;const n=this.parent;if(this.parent=t,(!n||n.node()!==t.node())&&this.type){const t=hb(this.model.getOptions(),"style","prefix");null==(e=this.parent)||e.classed(`${b_}--${t}--${this.type}`,!0),n&&n.classed(`${b_}--${t}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(t={withinChartClip:!1}){if(this.type){const e=hb(this.model.getOptions(),"style","prefix"),n=this.id?`#${this.id}`:"",r=Tw.appendOrSelect(this.parent,`${this.renderType===Gy.SVG?"svg":"div"}${n}.${b_}--${e}--${this.type}`);if(t.withinChartClip){const t=this.model.get("chartClipId");if(t){const e=de(`#${t}`).select("rect");0!==e.size()&&parseFloat(e.attr("height"))>0&&r.attr("clip-path",`url(#${t})`)}}return r.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?ay({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}const Cw=class t extends Mw{constructor(){super(...arguments),this.type="toolbar",this.renderType=Gy.HTML}init(){const t=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(jy.Toolbar.SHOW_OVERFLOW_MENU,(()=>{this.renderOverflowMenu(),document.body.addEventListener("click",t)})),this.services.events.addEventListener(jy.Toolbar.HIDE_OVERFLOW_MENU,(()=>{document.body.removeEventListener("click",t)}))}render(t=!0){const e=this.getComponentContainer().attr("role","toolbar").attr("aria-label",`chart-${this.services.domUtils.getChartID()} toolbar`);if(hb(this.getOptions(),"data","loading"))e.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=e.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:t,overflowMenuItemList:n}=this.getControlConfigs();n&&t.push(this.getOverflowButtonConfig());const r=e.selectAll("div.toolbar-control").data(t,(t=>t.id));r.exit().remove();const i=r.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu").attr("role","button"),s=this;i.merge(r).classed("disabled",(t=>t.shouldBeDisabled())).attr("aria-disabled",(t=>t.shouldBeDisabled())).attr("aria-label",(t=>t.title)).html((t=>`\n\t\t\t<button\n\t\t\t\tclass="cds--overflow-menu__trigger cds--overflow-menu__trigger"\n\t\t\t\taria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${t.id}`)}" aria-label="${t.title}">\n\t\t\t\t<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">\n\t\t\t\t\t${t.iconSVG.content}\n\t\t\t\t</svg>\n\t\t\t</button>`)).each((function(t,e){de(this).select("svg").style("will-change","transform").style("width",void 0!==t.iconSVG.width?t.iconSVG.width:"20px").style("height",void 0!==t.iconSVG.height?t.iconSVG.height:"20px"),de(this).select("button").on("click",(e=>{t.shouldBeDisabled()||s.triggerFunctionAndEvent(t,e,this)})).on("keydown",(n=>{n.key&&"Enter"===n.key||" "===n.key?(n.preventDefault(),s.triggerFunctionAndEvent(t,n,this)):n.key&&"ArrowLeft"===n.key?s.focusOnPreviousEnabledToolbarItem(e):n.key&&"ArrowRight"===n.key&&s.focusOnNextEnabledToolbarItem(e)}))})),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:t}=this.getControlConfigs(),e=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(t,(t=>hb(t,"id")));e.exit().remove();const n=e.enter().append("li").attr("id",(t=>this.services.domUtils.generateElementIDString(`control-${t.id}`))).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);n.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),n.merge(e).classed("cds--overflow-menu-options__option--disabled",(t=>t.shouldBeDisabled())).classed("cds--overflow-menu-options__option--disabled",(t=>t.shouldBeDisabled())).attr("aria-disabled",(t=>t.shouldBeDisabled())).selectAll("button").text((t=>t.text))}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(t){this.overflowMenu&&(this.overflowMenu.classed("is-open",t),this.overflowButton&&(this.overflowButton.attr("aria-expanded",t),de(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",t).classed("cds--overflow-menu--open",t)),t?this.services.events.dispatchEvent(jy.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(jy.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(t){const e=this.getToolbarButtonItems();let n=e.length;for(let r=t-1;r>=0;r--)if(!e[r].shouldBeDisabled()){n=r;break}if(n<e.length){const t=de(`button#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)}`).node();"focus"in t&&t.focus()}}focusOnNextEnabledToolbarItem(t){const e=this.getToolbarButtonItems();let n=-1;for(let r=t+1;r<e.length;r++)if(!e[r].shouldBeDisabled()){n=r;break}if(n>-1){const t=de(`button#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)}`).node();"focus"in t&&t.focus()}}focusOnPreviousEnabledMenuItem(t){const e=this.getOverflowMenuItems();let n=e.length;for(let r=t-1;r>=0;r--)if(!e[r].shouldBeDisabled()){n=r;break}if(n<e.length){const t=de(`#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)} button`).node();"focus"in t&&t.focus()}}focusOnNextEnabledMenuItem(t){const e=this.getOverflowMenuItems();let n=-1;for(let r=t+1;r<e.length;r++)if(!e[r].shouldBeDisabled()){n=r;break}if(n>-1){const t=de(`#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)} button`).node();"focus"in t&&t.focus()}}toggleOverflowMenu(t){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const e=this;this.getOverflowMenuItems().forEach(((n,r)=>{const i=de(`#${this.services.domUtils.generateElementIDString(`control-${n.id}`)}`);null!==i&&(i.on("click",(()=>{e.triggerFunctionAndEvent(n,t,i.node()),e.updateOverflowMenu(!1)})),i.on("keydown",(s=>{s&&"Enter"===s.key?e.triggerFunctionAndEvent(n,t,i.node()):s&&"ArrowUp"===s.key?e.focusOnPreviousEnabledMenuItem(r):s&&"ArrowDown"===s.key?e.focusOnNextEnabledMenuItem(r):s&&"Escape"===s.key&&e.updateOverflowMenu(!1),s.preventDefault()})))})),e.focusOnNextEnabledMenuItem(-1)}t&&t.stopImmediatePropagation()}triggerFunctionAndEvent(t,e,n){"function"==typeof t.shouldBeDisabled&&t.shouldBeDisabled()||("function"==typeof t.clickFunction&&t.clickFunction(e),this.services.events.dispatchEvent(jy.Toolbar.BUTTON_CLICK,{control:t,event:e,element:n}))}getControlConfigs(){const e=hb(this.getOptions(),"toolbar","numberOfIcons")-1,n=hb(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach((n=>{let o=null;n.type===p_.CUSTOM?(null===hb(n,"id")&&(n.id="toolbar-button-"+t.buttonID++),null===hb(n,"shouldBeDisabled")&&(n.shouldBeDisabled=()=>!1),o=n):o=this.getControlConfigByType(n.type),o&&(o.text=n.text?n.text:n.type,-1!==o.id.indexOf("toolbar-export")?r.push(o):i.length<e?null===hb(o,"iconSVG","content")?s.push(o):i.push(o):s.push(o))})),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:t,overflowMenuItemList:e}=this.getControlConfigs();return e&&t.push(this.getOverflowButtonConfig()),t||[]}getOverflowMenuItems(){const{overflowMenuItemList:t}=this.getControlConfigs();return t||[]}getOverflowButtonConfig(){return{id:"toolbar-overflow-menu",title:"More options",shouldBeDisabled:()=>!1,iconSVG:{content:'<circle cx="16" cy="8" r="2"></circle>\n\t\t\t\t<circle cx="16" cy="16" r="2"></circle>\n\t\t\t\t<circle cx="16" cy="24" r="2"></circle>'},clickFunction:t=>this.toggleOverflowMenu(t)}}getControlConfigByType(t){const e=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),n=this.model.getDisplayData();let r;switch(t){case p_.ZOOM_IN:e&&(r={id:"toolbar-zoomIn",title:"Zoom in",shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomIn()});break;case p_.ZOOM_OUT:e&&(r={id:"toolbar-zoomOut",title:"Zoom out",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomOut()});break;case p_.RESET_ZOOM:e&&(r={id:"toolbar-resetZoom",title:"Reset zoom",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case p_.MAKE_FULLSCREEN:r={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(t),width:"15px",height:"15px"},title:"Make fullscreen",shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case p_.SHOW_AS_DATATABLE:r={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(t)},title:"Show as table",shouldBeDisabled:()=>0===n.length,clickFunction:()=>this.services.events.dispatchEvent(jy.Modal.SHOW)};break;case p_.EXPORT_CSV:r={id:"toolbar-export-CSV",title:"Export as CSV",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.model.exportToCSV()};break;case p_.EXPORT_PNG:r={id:"toolbar-export-PNG",title:"Export as PNG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case p_.EXPORT_JPG:r={id:"toolbar-export-JPG",title:"Export as JPG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+t)}return r}getControlIconByType(t){switch(t){case p_.ZOOM_IN:return'<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>\n\t\t\t\t\t\t<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>';case p_.ZOOM_OUT:return'<rect x="9" y="13" width="10" height="2"/>\n\t\t\t\t\t\t<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>';case p_.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case p_.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case p_.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case p_.EXPORT_CSV:case p_.EXPORT_JPG:case p_.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+t)}}};Cw.buttonID=0;let Aw=Cw;const Dw=class t extends Mw{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=t.instanceID++,this.init()}init(){this.children.forEach((t=>{t.components.forEach((t=>{t.init()}))}))}getPreferedAndFixedSizeSum(){const t=this.parent;let e=0;return t.selectAll(`div.layout-child-${this._instanceID}`).filter((t=>{const e=hb(t,"growth");return e===n_.PREFERRED||e===n_.FIXED})).each((function(t){e+=t.size})),e}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter((t=>hb(t,"growth")===n_.STRETCH)).size()}render(t=!0){const e=this.parent,{width:n,height:r}=Tw.getHTMLElementSize(e.node()),i=this.configs.direction===e_.ROW||this.configs.direction===e_.ROW_REVERSE,s=hb(this.model.getOptions(),"style","prefix"),o=e.classed(`${b_}--${s}--layout-row`,this.configs.direction===e_.ROW).classed(`${b_}--${s}--layout-row-reverse`,this.configs.direction===e_.ROW_REVERSE).classed(`${b_}--${s}--layout-column`,this.configs.direction===e_.COLUMN).classed(`${b_}--${s}--layout-column-reverse`,this.configs.direction===e_.COLUMN_REVERSE).classed(`${b_}--${s}--layout-alignitems-center`,this.configs.alignItems===r_.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,(t=>t.id));o.enter().append("div").merge(e.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",(t=>`layout-child layout-child-${this._instanceID} ${t.id}`)).each((function(e){e.components.forEach((n=>{const r=de(this),i=hb(e,"renderType")===Gy.SVG;n.setParent(i?Tw.appendOrSelect(r,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):r);const s=hb(e,"growth");(s===n_.PREFERRED||s===n_.FIXED)&&n.render(t)}))})),e.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each((function(t){const e=hb(t,"growth"),s=hb(t,"renderType")===Gy.SVG?Tw.getSVGElementSize(de(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):Tw.getHTMLElementSize(this);if(e===n_.PREFERRED){const e=i?s.width:s.height,o=i?n:r;t.size=e/o*100}})),o.exit().remove(),this.children.filter((t=>hb(t,"growth")===n_.STRETCH)).forEach((t=>{t.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()}));const a=e.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,(t=>t.id));i?a.style("width",(t=>t.size/100*n+"px")).style("height","100%"):a.style("height",(t=>t.size/100*r+"px")).style("width","100%"),a.each((function(e){e.components.forEach((n=>{hb(e,"growth")===n_.STRETCH&&n.render(t)}))}))}setModel(t){super.setModel(t),this.children.forEach((e=>{e.components.forEach((e=>e.setModel(t)))}))}setServices(t){super.setServices(t),this.children.forEach((e=>{e.components.forEach((e=>e.setServices(t)))}))}destroy(){this.children.forEach((t=>{t.components.forEach((t=>t.destroy()))}))}};Dw.instanceID=Math.floor(99999999999*Math.random());let Lw=Dw;class Rw extends Mw{constructor(){super(...arguments),this.type="spacer"}render(t=!1){this.getComponentContainer().style("width",`${this.configs.size||tb.size}px`).style("height",`${this.configs.size||tb.size}px`).attr("opacity",0)}}var kw="bx",Iw="\n    a[href], area[href], input:not([disabled]):not([tabindex='-1']),\n    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),\n    textarea:not([disabled]):not([tabindex='-1']),\n    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]\n  ";function Pw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nw(t){return function(t){if(Array.isArray(t))return Bw(t)}(t)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Bw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(t,e)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uw(t){return t.reduce((function(t,e){return Array.isArray(e)?t.push.apply(t,Nw(Uw(e))):t.push(e),t}),[])}function Vw(t){return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hw(t,e){return(Hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jw(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=zw(t);if(e){var i=zw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Vw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gw(t)}(this,n)}}function Gw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zw(t){return(zw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fw(t){return(Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ww(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qw(){return qw=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},qw.apply(this,arguments)}function Zw(t,e){return(Zw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yw(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Xw(t);if(e){var i=Xw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Fw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Xw(t){return(Xw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kw(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function Qw(t){return(Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jw(t){return function(t){if(Array.isArray(t))return tO(t)}(t)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nO(t,e){return(nO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rO(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=iO(t);if(e){var i=iO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Qw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function iO(t){return(iO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sO(t,e){var n=t.target,r=t.currentTarget;if("function"==typeof n.matches){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var i=n.closest(e);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function oO(t){if(!t||"function"==typeof t)return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function aO(t){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cO(t,e){return(cO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uO(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=hO(t);if(e){var i=hO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===aO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function hO(t){return(hO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dO(t){return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fO(t,e){return(fO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gO(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=mO(t);if(e){var i=mO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===dO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function mO(t){return(mO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vO(t){return(vO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bO(t,e)}function bO(t,e){return(bO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xO(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=EO(t);if(e){var i=EO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===vO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function EO(t){return(EO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const wO=function(t){_O(n,t);var e=xO(n);function n(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t,r))._handleFocusinListener=void 0,i._handleKeydownListener=void 0,i._handleFocusin=function(t){var e=i.element.querySelector(i.options.selectorModalContainer)||i.element;i.element.classList.contains(i.options.classVisible)&&!e.contains(t.target)&&i.options.selectorsFloatingMenus.every((function(e){return!sO(t,e)}))&&i.element.querySelector(Iw).focus()},i._hookCloseActions(),i}return function(t,e,n){e&&yO(t.prototype,e),n&&yO(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"createdByLauncher",value:function(t){this.show(t)}},{key:"shouldStateBeChanged",value:function(t){return"shown"===t?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(t,e,n){var r,i=this;if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),"shown"===t){var s="onfocusin"in this.element.ownerDocument.defaultView,o=s?"focusin":"focus";this._handleFocusinListener=this.manage(Kw(this.element.ownerDocument,o,this._handleFocusin,!s))}"hidden"===t?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):"shown"===t&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),r=this.manage(Kw(this.element,"transitionend",(function(){r&&(r=i.unmanage(r).release()),"shown"===t&&i.element.offsetWidth>0&&i.element.offsetHeight>0&&(i.previouslyFocusedNode=i.element.ownerDocument.activeElement,(i.element.querySelector(i.options.selectorPrimaryFocus)||i.element.querySelector(Iw)).focus()),n()})))}},{key:"_hookCloseActions",value:function(){var t=this;this.manage(Kw(this.element,"click",(function(e){var n=sO(e,t.options.selectorModalClose);n&&(e.delegateTarget=n),(n||e.target===t.element)&&t.hide(e)}))),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(Kw(this.element.ownerDocument.body,"keydown",(function(e){27===e.which&&t.shouldStateBeChanged("hidden")&&(e.stopPropagation(),t.hide(e))})))}}],[{key:"options",get:function(){var t=kw;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(t,"--overflow-menu-options"),".".concat(t,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(t,"--modal-container"),classVisible:"is-visible",classBody:"".concat(t,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),n.components=new WeakMap,n}(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Uw(e).reduce((function(t,e){return e(t)}),function(t,e,n){return e&&Pw(t.prototype,e),n&&Pw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)})))}((function(t){var e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hw(t,e)}(n,t);var e=jw(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t,i)).children=[],!t||t.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return r.element=t,r.options=Object.assign(Object.create(r.constructor.options),i),r.constructor.components.set(r.element,Gw(r)),r}return function(t,e,n){e&&$w(t.prototype,e),n&&$w(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"release",value:function(){for(var t=this.children.pop();t;t=this.children.pop())t.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(t,e){return this.components.get(t)||new this(t,e)}}]),n}(t);return e}),(function(t){var e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fO(t,e)}(n,t);var e=gO(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return function(t,e,n){e&&pO(t.prototype,e),n&&pO(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,null,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(Object.create(this.options),n);if(!e||e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(e.nodeType!==Node.ELEMENT_NODE||!e.matches(r.selectorInit)){var i=r.initEventNames.map((function(i){return Kw(e,i,(function(e){var i=sO(e,"[".concat(r.attribInitTarget,"]"));if(i){e.delegateTarget=i;var s=i.ownerDocument.querySelectorAll(i.getAttribute(r.attribInitTarget));if(s.length>1)throw new Error("Target widget must be unique.");if(1===s.length){"A"===i.tagName&&e.preventDefault();var o=t.create(s[0],n);"function"==typeof o.createdByLauncher&&o.createdByLauncher(e)}}}))}));return{release:function(){for(var t=i.pop();t;t=i.pop())t.release()}}}return this.create(e,n),""}}]),n.forLazyInit=!0,n}(t);return e}),[function(t){var e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}(n,t);var e=rO(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return function(t,e,n){e&&eO(t.prototype,e),n&&eO(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i="string"==typeof n[0]?n.shift():void 0,s=Object(n[0])===n[0]&&"function"!=typeof n[0]?n.shift():void 0,o="function"==typeof n[0]?n.shift():void 0;if("function"!=typeof this.shouldStateBeChanged||this.shouldStateBeChanged(i,s)){var a={group:s&&s.group,state:i},l=[a.group,i].filter(Boolean).join("-").split("-").map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),c=new CustomEvent(this.options["eventBefore".concat(l)],{bubbles:!0,cancelable:!0,detail:s}),u=s&&s.delegatorNode||this.element;if(u.dispatchEvent(c)){var h=[i,s].filter(Boolean);this._changeState.apply(this,Jw(h).concat([function(){u.dispatchEvent(new CustomEvent(t.options["eventAfter".concat(l)],{bubbles:!0,cancelable:!0,detail:s})),o&&o()}]))}else if(o){var d=new Error("Changing state (".concat(JSON.stringify(a),") has been canceled."));d.canceled=!0,o(d)}}else o&&o(null,!0)}}]),n}(t);return e},function(t){var e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cO(t,e)}(n,t);var e=uO(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return function(t,e,n){e&&lO(t.prototype,e),n&&lO(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"show",value:function(t,e){(!t||"function"==typeof t)&&(e=t),this.changeState("shown",oO(t),e)}},{key:"hide",value:function(t,e){(!t||"function"==typeof t)&&(e=t),this.changeState("hidden",oO(t),e)}}]),n}(t);return e}],(function(t){var e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zw(t,e)}(n,t);var e=Yw(n);function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).handles=new Set,t}return function(t,e,n){e&&Ww(t.prototype,e),n&&Ww(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"manage",value:function(t){return this.handles.add(t),t}},{key:"unmanage",value:function(t){return this.handles.delete(t),t}},{key:"release",value:function(){var t=this;return this.handles.forEach((function(e){e.release(),t.handles.delete(e)})),qw(Xw(n.prototype),"release",this).call(this)}}]),n}(t);return e})));class OO extends Mw{constructor(t,e,n){super(t,e,n),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",(()=>this.model.exportToCSV())),wO.create(this.modal.node()).show()},this.init()}addEventListeners(){this.services.events.addEventListener(jy.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(jy.Modal.SHOW,this.handleShowModal)}getModalHTML(){const t=this.model.getOptions(),e=hb(t,"style","prefix"),n=this.model.getTabularDataArray();return`\n\t\t<div class="cds--modal-container cds--modal-container">\n\t\t\t<div class="cds--modal-header cds--modal-header">\n\t\t\t\t<p class="cds--modal-header__label cds--type-delta cds--modal-header__label cds--type-delta" id="modal-title">Tabular representation</p>\n\n\t\t\t\t<p class="cds--modal-header__heading cds--type-beta cds--modal-header__heading cds--type-beta" id="modal-description">${t.title}</p>\n\n\t\t\t\t<button class="cds--modal-close cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>\n\t\t\t\t\t<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon cds--modal-close__icon">\n\t\t\t\t\t\t<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class="cds--modal-content cds--modal-content">\n\t\t\t\t<table class="cds--data-table cds--data-table--no-border cds--data-table cds--data-table--no-border">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t${xf(n,0).map((t=>`<th scope="col">\n\t\t\t\t\t\t\t\t<div class="cds--table-header-label cds--table-header-label">${t}</div>\n\t\t\t\t\t\t\t</th>`)).join("")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>${n.slice(1).map((t=>`\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t${t.map((t=>`<td>${t}</td>`)).join("")}\n\t\t\t\t\t\t\t</tr>`)).join("")}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class="cds--modal-footer cds--modal-footer">\n\t\t\t  <div class="${b_}--${e}-modal-footer-spacer"></div>\n\t\t\t  <button class="cds--btn cds--btn--primary cds--btn cds--btn--primary" type="button" data-modal-primary-focus>Download as CSV</button>\n\t\t\t</div>\n\t\t</div>`}render(t=!1){const e=this.model.getOptions();if(!this.isEventListenerAdded){const t=de(this.services.domUtils.getHolder()),n=hb(e,"style","prefix");this.modal=Tw.appendOrSelect(t,`div.${b_}--${n}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0,this.modal.attr("data-modal",!0).attr("class","cds--modal cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby","modal-title").attr("aria-describedby","modal-description").attr("tabindex",-1)}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class SO extends Mw{constructor(){super(...arguments),this.type="title",this.renderType=Gy.HTML}render(t=!1){const e=this.getComponentContainer(),n=hb(this.getOptions(),"title"),r=e.selectAll("p.title").data([n]);if(r.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(r).html((t=>t)),r.node()&&r.node().offsetWidth<r.node().scrollWidth){const t=this;r.on("mouseover",(function(e){t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,content:r.text()})})).on("mousemove",(function(e){t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("mouseout",(function(){t.services.events.dispatchEvent(jy.Tooltip.HIDE)}))}r.exit().remove()}truncateTitle(t,e){if(e<=0)return;const n=t.text();if(t.node().getComputedTextLength()>e){t.append("tspan").text("...");const r=Tw.appendOrSelect(t,"tspan").node().getComputedTextLength(),i=t.text(),s=this.getSubstringIndex(t.node(),0,i.length-1,e-r);t.html(i.substring(0,s-1)).append("tspan").text("...");const o=this;t.on("mouseover",(function(e){o.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:t,content:n})})).on("mousemove",(function(t){o.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("mouseout",(function(){o.services.events.dispatchEvent(jy.Tooltip.HIDE)}))}}getMaxTitleWidth(){return Tw.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(t,e,n,r){const i=Math.floor((n+e)/2);return t.getSubStringLength(0,i)>r?this.getSubstringIndex(t,e,i,r):t.getSubStringLength(0,i)<r?t.getSubStringLength(0,i+1)>r?i:this.getSubstringIndex(t,i,n,r):i}}var TO,MO,CO=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(CO||{});class AO extends Mw{constructor(){super(...arguments),this.type="legend",this.renderType=Gy.HTML}render(t=!1){const e=this.getOptions(),n=hb(e,"legend"),r=hb(n,"alignment"),i=hb(e,"legend","orientation");let s=this.model.getDataGroups();const{DISABLED:o}=k_.items.status,a=s.some((t=>t.status===o)),l=hb(n,"order"),c=this.getComponentContainer().classed("center-aligned",r===Qy.CENTER).classed("right-aligned",r===Qy.RIGHT).classed(i,!0).classed("has-deactivated-items",a).attr("role",CO.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");l&&(s=this.sortDataGroups(s,l));const u=c.selectAll("div.legend-item").data(s,(t=>t.name)),h=u.enter().append("div").attr("class","legend-item");h.merge(c.selectAll("div.legend-item")).classed("active",(function(t){return t.status===k_.items.status.ACTIVE}));const d=hb(this.getOptions(),"legend","clickable");c.classed("clickable",d&&s.length>1);const p=k_.checkbox.radius,f=h.append("div").classed("checkbox",!0),g=f.merge(u.select("div.checkbox")).attr("role",CO.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",((t,e)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${e}-title`))).attr("aria-checked",(({status:t})=>t===k_.items.status.ACTIVE)).attr("width",2*p).attr("height",2*p).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.BACKGROUND],dataGroupName:t.name,originalClassName:"checkbox"}))).style("background",(t=>t.status===k_.items.status.ACTIVE?this.model.getFillColor(t.name)||this.model.getStrokeColor(t.name):null)).classed("active",(function(t){return t.status===k_.items.status.ACTIVE}));f.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),h.append("p").merge(u.select("p"));const m=hb(e,"legend","additionalItems");if(m&&s.length){const t=this,e=c.selectAll("div.additional-item").data(m);e.exit().remove();const n=e.enter().append("div").merge(e).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",((t,e)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${g.size()+e}-title`)));n.selectAll("*").remove();let r,i=1;n.append("svg").classed("icon",!0).each((function(e){const n=de(this);r&&r==e.type?i++:(r=e.type,i=1),t.addAdditionalItem(n,e,i)})),n.append("p").merge(n.select("p")),this.truncateLegendText()}u.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&h.size()>1&&this.addEventListeners()}sortDataGroups(t,e){if(t.sort(((t,n)=>e.indexOf(t.name)-e.indexOf(n.name))),e.length<t.length){const n=t.length-e.length;return t.slice(n).concat(t.slice(0,n))}return t}addAdditionalItem(t,e,n){const{width:r,height:i}=k_.area;if(e.type===g_.RADIUS?t.style("width",`${i}px`).style("height",`${i}px`):t.style("width",`${r}px`).style("height",`${i}px`),e.type===g_.RADIUS){const{iconData:n,fill:r,stroke:i}=k_.radius;t.attr("fill","none").selectAll("circle").data(n).enter().append("circle").classed("radius",!0).attr("role",CO.IMG).attr("aria-label","radius").attr("cx",(t=>t.cx)).attr("cy",(t=>t.cy)).attr("r",(t=>t.r)).style("fill",e.fill?e.fill:r).style("stroke",e.stroke?e.stroke:i)}else if(e.type===g_.LINE){const i=k_.line;t.select("line.line").empty()&&t.append("line").classed(`line-${n}`,!0).attr("role",CO.IMG).attr("aria-label","line").attr("x1",0).attr("y1",i.yPosition).attr("x2",r).attr("y2",i.yPosition).style("stroke",e.stroke?e.stroke:i.stroke).style("stroke-width",i.strokeWidth)}else if(e.type===g_.AREA)t.select("rect.area").empty()&&t.append("rect").classed(`area-${n}`,!0).attr("role",CO.IMG).attr("aria-label","area").attr("width",r).attr("height",i).style("fill",n>3&&!e.fill?k_.area.fill:e.fill).style("stroke",e.stroke);else if(e.type===g_.SIZE){const{iconData:n,fill:r,stroke:i}=k_.size;t.attr("fill","none").attr("role",CO.IMG).attr("aria-label","size").selectAll("rect").data(n).enter().append("rect").classed("size",!0).attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("y",(()=>0)).style("fill",e.fill?e.fill:r).style("stroke",e.stroke?e.stroke:i).style("stroke-width",1)}else if(e.type===g_.QUARTILE){const{iconData:e}=k_.quartile;t.selectAll("rect").attr("role",CO.IMG).attr("aria-label","quartile").data(e).enter().append("rect").attr("class",((t,e)=>"quartile-"+(0===e?"wrapper":"line"))).attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height))}else if(e.type===g_.ZOOM){const{iconData:n,color:r}=hb(k_,"zoom"),i=t.attr("role",CO.IMG).attr("aria-label","zoom").selectAll("g.icon").data(n).enter();i.append("g").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height)).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",(()=>e.color?e.color:r)),i.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",(()=>e.color?e.color:r))}}truncateLegendText(){const t=this.getComponentContainer(),e=hb(this.getOptions(),"legend","truncation"),n=hb(e,"type"),r=hb(e,"threshold"),i=hb(e,"numCharacter"),s=t.selectAll("div.legend-item p");s.attr("id",(function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")})),n!==Zy.NONE?s.html((function(t){return t.name.length>r&&t.name.length!==i?cb(t.name,n,i):t.name})):s.html((t=>t.name))}addEventListeners(){const t=this,e=this.getComponentContainer(),n=this.getOptions(),r=hb(n,"legend"),i=hb(r,"truncation");e.selectAll("div.legend-item").on("mouseover",(function(e){t.services.events.dispatchEvent(jy.Legend.ITEM_HOVER,{hoveredElement:de(this)});const n=de(this);n.select("div.checkbox").classed("hovered",!0);const r=n.datum();r.name.length>i.threshold&&i.numCharacter<r.name.length&&i.type!==Zy.NONE&&t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:n,content:r.name})})).on("mousemove",(function(e){de(this).datum().name.length>i.threshold&&i.type!==Zy.NONE&&t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(){t.services.events.dispatchEvent(jy.Legend.ITEM_CLICK,{clickedElement:de(this)});const e=de(this).datum();t.model.toggleDataLabel(e.name)})).on("mouseout",(function(){const e=de(this);e.select("div.checkbox").classed("hovered",!1),e.datum().name.length>i.threshold&&i.type!==Zy.NONE&&t.services.events.dispatchEvent(jy.Tooltip.HIDE),t.services.events.dispatchEvent(jy.Legend.ITEM_MOUSEOUT,{hoveredElement:e})})),e.selectAll("div.legend-item div.checkbox").on("keyup",(function(e){e.key&&"Tab"===e.key&&t.services.events.dispatchEvent(jy.Legend.ITEM_HOVER,{hoveredElement:de(this)})})),e.selectAll("div.legend-item div.checkbox").on("keydown",(function(e,n){e.key&&" "===e.key?(e.preventDefault(),t.model.toggleDataLabel(n.name)):e.key&&"Tab"===e.key&&t.services.events.dispatchEvent(jy.Legend.ITEM_MOUSEOUT,{hoveredElement:de(this)})})),e.selectAll("g.additional-item").on("mouseover",(function(e){const n=de(this),r=n.datum();r.name.length>i.threshold&&t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:n,content:r.name})}))}}class DO extends Mw{constructor(t,e,n){super(t,e,n),this.type="chart-clip",this.renderType=Gy.SVG,this.chartClipId="chart-clip-id-"+Math.floor(99999999999*Math.random()),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(t=!0){this.createClipPath()}createClipPath(){const t=this.parent,{cartesianScales:e}=this.services;if(!e)throw new Error("Service cartesianScales was undefined");const n=e.getMainXScale(),r=e.getMainYScale(),[i,s]=n.range(),[o,a]=r.range();if(!t)throw new Error("svg is undefined");this.chartClipPath=Tw.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);const l=Tw.appendOrSelect(this.chartClipPath,`rect.${this.type}`);s-i>0&&l.attr("x",i).attr("y",a).attr("width",s-i).attr("height",o-a),this.chartClipPath.merge(l).lower()}}class LO extends DO{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(99999999999*Math.random())}createClipPath(){const t=this.parent,{width:e,height:n}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=Tw.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);const r=Tw.appendOrSelect(this.chartClipPath,`rect.${this.type}`);r.attr("x",0).attr("y",0).attr("width",e).attr("height",n),this.chartClipPath.merge(r).lower()}}!function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(MO||(MO={}));var RO=((TO={})[MO.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},TO[MO.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},TO[MO.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},TO[MO.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},TO),kO=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},IO=function(){function t(t){void 0===t&&(t={}),this.positions=RO,this.positions=Object.assign({},RO,t)}return t.prototype.getRelativeOffset=function(t){for(var e={left:t.offsetLeft,top:t.offsetTop};t.offsetParent&&"static"===getComputedStyle(t.offsetParent).position;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e},t.prototype.getAbsoluteOffset=function(t){for(var e=t,n={top:0,left:0};e.offsetParent;){var r=getComputedStyle(e.offsetParent);"static"===r.position&&r.marginLeft&&r.marginTop&&(parseInt(r.marginTop,10)&&(n.top+=parseInt(r.marginTop,10)),parseInt(r.marginLeft,10)&&(n.left+=parseInt(r.marginLeft,10))),e=e.offsetParent}var i=t.getBoundingClientRect(),s=document.body.getBoundingClientRect();return{top:i.top-s.top+n.top,left:i.left-s.left+n.left}},t.prototype.findRelative=function(t,e,n){var r=this.getRelativeOffset(t),i=t.getBoundingClientRect();return this.calculatePosition(r,i,e,n)},t.prototype.findAbsolute=function(t,e,n){var r=this.getAbsoluteOffset(t),i=t.getBoundingClientRect();return this.calculatePosition(r,i,e,n)},t.prototype.findPosition=function(t,e,n,r){void 0===r&&(r=this.getAbsoluteOffset.bind(this));var i=r(t),s=t.getBoundingClientRect();return this.calculatePosition(i,s,e,n)},t.prototype.findPositionAt=function(t,e,n){return this.calculatePosition(t,{top:0,left:0,height:0,width:0},e,n)},t.prototype.getPlacementBox=function(t,e){var n=t.offsetHeight+e.top,r=t.offsetWidth+e.left;return{top:e.top,bottom:n,left:e.left,right:r}},t.prototype.addOffset=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Object.assign({},t,{top:t.top+e,left:t.left+n})},t.prototype.setElement=function(t,e){t.style.top=e.top+"px",t.style.left=e.left+"px"},t.prototype.findBestPlacement=function(t,e,n,r,i){var s=this;void 0===r&&(r=this.defaultContainerFunction.bind(this)),void 0===i&&(i=this.findPosition.bind(this));var o=n.map((function(n){var o=i(t,e,n),a=s.getPlacementBox(e,o),l=0,c=0,u=r();a.top<u.top?l=u.top-a.top:a.bottom>u.height&&(l=a.bottom-u.height),a.left<u.left?c=u.left-a.left:a.right>u.width&&(c=a.right-u.width),l&&!c?c=1:c&&!l&&(l=1);var h=e.offsetHeight*e.offsetWidth;return{placement:n,weight:(h-l*c)/h}}));return o.sort((function(t,e){return e.weight-t.weight})),o[0].placement},t.prototype.findBestPlacementAt=function(t,e,n,r){var i=this;void 0===r&&(r=this.defaultContainerFunction.bind(this));return this.findBestPlacement(null,e,n,r,(function(e,n,r){return i.findPositionAt(t,n,r)}))},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:kO.innerHeight,width:kO.innerWidth}},t.prototype.calculatePosition=function(t,e,n,r){return this.positions[r]?this.positions[r](t,n,e):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new IO;class PO extends Mw{constructor(t,e,n){super(t,e,n),this.type="tooltip",this.renderType=Gy.HTML,this.isEventListenerAdded=!1,this.positionService=new IO,this.handleShowTooltip=t=>{const e=t.detail.data||t.detail.items;let n;const r=this.formatItems(this.getItems(t));n=t.detail.content?`<div class="title-tooltip"><p>${t.detail.content}</p></div>`:this.getTooltipHTML(r);const i=Tw.appendOrSelect(this.tooltip,"div.content-box");if(hb(this.getOptions(),"tooltip","customHTML"))if(t.detail.content){const e=`<div class="title-tooltip"><p>${t.detail.content}</p></div>`;i.html(e)}else i.html(this.model.getOptions().tooltip.customHTML(e,n));else i.html(n);i.selectAll(".datapoint-tooltip").each((function(t,e){const n=r[e];r[e]&&r[e].color&&de(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",n.color)})),this.positionTooltip(t),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1)},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(jy.Tooltip.MOVE,(t=>{!1===this.tooltip.classed("hidden")&&this.positionTooltip(t)})),this.services.events.addEventListener(jy.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(jy.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(jy.Chart.MOUSEOUT,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(jy.Tooltip.MOVE,null),this.services.events.removeEventListener(jy.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(jy.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(jy.Chart.MOUSEOUT,this.handleHideTooltip)}getItems(t){return t.detail.items?t.detail.items:[]}formatItems(t){const e=this.getOptions(),n=hb(e,"tooltip","truncation","type"),r=hb(e,"tooltip","truncation","threshold"),i=hb(e,"tooltip","truncation","numCharacter");return n!==Zy.NONE?t.map((t=>{const e=t.labelIcon?12:0;return t.value=t.value?this.valueFormatter(t.value,t.label):t.value,t.label&&t.label.length+e>r&&(t.label=cb(t.label,n,i)),t.value&&t.value.length>r&&(t.value=cb(t.value,n,i)),t})):t.map((t=>(t.value=t.value?this.valueFormatter(t.value,t.label):t.value,t)))}getTooltipHTML(t){return'<ul class="multi-tooltip">'+t.map((t=>`<li>\n\t\t\t\t\t<div class="datapoint-tooltip${t.bold?" bold":""}">\n\t\t\t\t\t\t${t.class||t.color?`<div class="tooltip-color ${t.class}"></div>`:""}\n\t\t\t\t\t\t<div class="label">\n\t\t\t\t\t\t<p>${t.label||""}</p>\n\t\t\t\t\t\t${t.labelIcon?`<span class="label-icon"/>${t.labelIcon}</span>`:""}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${void 0===t.value||null===t.value?"":`<p class="value"/>${t.value}</p>`}\n\t\t\t\t\t</div>\n\t\t\t\t</li>`)).join("")+"</ul>"}valueFormatter(t,e){const n=this.getOptions(),r=hb(n,"tooltip","valueFormatter");if(r)return r(t,e);if("function"==typeof t.getTime)return Vx(t,"MMM d, yyyy");try{if("string"==typeof t&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t))return Vx(Date.parse(t),"MMM d, yyyy")}catch{}return t.toLocaleString()}render(t=!1){const e=this.getOptions(),n=hb(e,"tooltip","enabled");if(n){const t=de(this.services.domUtils.getHolder()),n=hb(e,"style","prefix");this.tooltip=Tw.appendOrSelect(t,`div.${b_}--${n}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!n&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}positionTooltip(t){const e=this.services.domUtils.getHolder(),n=this.tooltip.node(),r=this.getOptions(),i=hb(r,"zoomBar","top","enabled");let s=hb(t,"detail","mousePosition");if(s){const t=hb(r,"zoomBar","top","type"),e=rb.height[t];i&&(s[1]+=e+rb.spacerHeight)}else s=pe(hb(t,"detail","event"),e);const o=e.offsetWidth,a=e.offsetHeight;let l;l=s[0]/o>.9?MO.LEFT:s[0]/o<.1?MO.RIGHT:this.positionService.findBestPlacementAt({left:s[0],top:s[1]},n,[MO.RIGHT,MO.LEFT,MO.TOP,MO.BOTTOM],(()=>({top:void 0,left:void 0,width:o,height:a})));let{horizontalOffset:c}=eb;l===MO.LEFT&&(c*=-1);const u=this.positionService.findPositionAt({left:s[0]+c,top:s[1]},n,l);this.positionService.setElement(n,u)}}class NO extends Sw{zoomIn(t,e,n){let r,i,s;const o=n||T_;t&&(r=t.x,i=t.y,s=2);const{width:a,height:l}=Tw.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});e.transition().duration(o.duration).ease(o.ease).attr("transform",`translate(${a/2}, ${l/2}) scale(${s}) translate(${-r},${-i})`),this.services.events.dispatchEvent(jy.CanvasZoom.CANVAS_ZOOM_IN,{element:de(t)})}zoomOut(t,e){const n=e||T_;t.transition().duration(n.duration).ease(n.ease).attr("transform",""),this.services.events.dispatchEvent(jy.CanvasZoom.CANVAS_ZOOM_OUT)}}class BO extends Sw{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(t,e){this.documentFragment.addEventListener(t,e)}removeEventListener(t,e){this.documentFragment.removeEventListener(t,e)}dispatchEvent(t,e){let n;e?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("Event"),n.initEvent(t,!1,!0)),this.documentFragment.dispatchEvent(n)}}class UO extends Sw{constructor(t,e){super(t,e)}downloadCSV(t,e){const n=document.createElement("a"),r="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([t],{type:r}),e);else if(URL&&"download"in n){const i=URL.createObjectURL(new Blob([t],{type:r}));n.href=i,n.setAttribute("download",e),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}else location.href=`data:application/octet-stream,${encodeURIComponent(t)}`}downloadImage(t,e){const n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}class VO extends Sw{static appendOrUpdateLinearGradient(t){let e=t.svg.select(`defs linearGradient#${t.id}`);e.empty()&&(e=t.svg.append("defs").append("linearGradient").attr("id",t.id).attr("x1",t.x1).attr("x2",t.x2).attr("y1",t.y1).attr("y2",t.y2)),e.selectAll("stop").remove(),e.selectAll("stop").data(t.stops).enter().append("stop").attr("offset",(t=>t.offset)).style("stop-color",(t=>t.color)).style("stop-opacity",(t=>t.opacity))}static getOffsetRatio(t){return(100*Math.abs(t[1])/Math.abs(t[0]-t[1])).toFixed(2)+"%"}static getStops(t,e){let n=[{offset:"0%",color:e,opacity:"0.6"},{offset:"80%",color:e,opacity:"0"}];return t[0]<0&&t[1]>0&&(n=[{offset:"0%",color:e,opacity:"0.6"},{offset:VO.getOffsetRatio(t),color:e,opacity:"0"},{offset:"100%",color:e,opacity:"0.6"}]),n}}class $O extends Sw{constructor(){super(...arguments),this.pendingTransitions={}}init(){var t;null==(t=this.services.events)||t.addEventListener(jy.Model.UPDATE,(()=>{this.pendingTransitions={}}))}setupTransition({transition:t,name:e,animate:n}){return this.pendingTransitions[t._id]=t,t.on("end interrupt cancel",(()=>{delete this.pendingTransitions[t._id]})),!1===this.model.getOptions().animations||!1===n?t.duration(0):t.duration(hb(nb,e,"duration")||nb.default.duration)}getPendingTransitions(){return this.pendingTransitions}}class HO{constructor(t,e){this.components=[],this.services={canvasZoom:NO,domUtils:Tw,events:BO,files:UO,gradientUtils:VO,transitions:$O},this.model=new BE(this.services)}init(t,e){this.model.set({holder:t},{skipUpdate:!0}),Object.keys(this.services).forEach((t=>{const e=this.services[t];this.services[t]=new e(this.model,this.services)})),this.services.events.addEventListener(jy.Model.UPDATE,(t=>{const e=!!hb(t,"detail","animate");this.update(e)})),this.model.setData(e.data),this.services.events.addEventListener(jy.Chart.RESIZE,(()=>{this.update(!1)})),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(t=!0){if(!this.components)return;Object.keys(this.services).forEach((t=>{this.services[t].update()})),this.components.forEach((e=>e.render(t)));const e=this.services.transitions.getPendingTransitions(),n=Object.keys(e).map((t=>e[t].end().catch((t=>t))));Promise.all(n).then((()=>this.services.events.dispatchEvent(jy.Chart.RENDER_FINISHED)))}destroy(){this.components.forEach((t=>t.destroy())),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(t,e){const n=this.model.getOptions(),r=hb(n,"toolbar","enabled"),i={id:"legend",components:[new AO(this.model,this.services)],growth:n_.PREFERRED},s=hb(n,"canvasZoom","enabled");s&&!0===s&&t.push(new LO(this.model,this.services));const o=!!this.model.getOptions().title,a={id:"title",components:[new SO(this.model,this.services)],growth:n_.STRETCH},l={id:"toolbar",components:[new Aw(this.model,this.services)],growth:n_.PREFERRED},c={id:"header",components:[new Lw(this.model,this.services,[a,...r?[l]:[]],{direction:e_.ROW,alignItems:r_.CENTER})],growth:n_.PREFERRED},u={id:"graph-frame",components:t,growth:n_.STRETCH,renderType:hb(e,"graphFrameRenderType")||Gy.SVG},h=!0!==hb(e,"excludeLegend")&&!1!==n.legend.enabled;let d=e_.COLUMN;if(h){const t=hb(n,"legend","position");"left"===t?(d=e_.ROW,n.legend.orientation||(n.legend.orientation=Jy.VERTICAL)):"right"===t?(d=e_.ROW_REVERSE,n.legend.orientation||(n.legend.orientation=Jy.VERTICAL)):"bottom"===t&&(d=e_.COLUMN_REVERSE)}const p={id:"spacer",components:[new Rw(this.model,this.services)],growth:n_.PREFERRED},f={id:"full-frame",components:[new Lw(this.model,this.services,[...h?[i]:[],...h?[p]:[],u],{direction:d})],growth:n_.STRETCH},g=[];if(o||r){g.push(c);const t={id:"spacer",components:[new Rw(this.model,this.services,r?{size:15}:void 0)],growth:n_.PREFERRED};g.push(t)}return g.push(f),[new PO(this.model,this.services),new OO(this.model,this.services),new Lw(this.model,this.services,g,{direction:e_.COLUMN})]}}class jO extends BE{constructor(t){super(t),this.axisFlavor=y_.DEFAULT}assignRangeAndDomains(){const{cartesianScales:t}=this.services,e=this.getOptions(),n=t.isDualAxes(),r={primaryDomain:t.domainAxisPosition,primaryRange:t.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return n&&(r.secondaryDomain=t.secondaryDomainAxisPosition,r.secondaryRange=t.secondaryRangeAxisPosition),Object.keys(r).forEach((n=>{const i=r[n];t.scales[i]?r[n]={position:i,label:t.getScaleLabel(i),identifier:hb(e,"axes",i,"mapsTo")}:r[n]=null})),r}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,{cartesianScales:r}=this.services,{primaryDomain:i,primaryRange:s,secondaryDomain:o,secondaryRange:a}=this.assignRangeAndDomains();let l;return r.getDomainAxisScaleType()===Xy.TIME&&(l=t=>Vx(t,"MMM d, yyyy")),[["Group",i.label,s.label,...o?[o.label]:[],...a?[a.label]:[]],...t.map((t=>[t[n],null===t[i.identifier]?"&ndash;":l?l(t[i.identifier]):t[i.identifier],null===t[s.identifier]||isNaN(t[s.identifier])?"&ndash;":t[s.identifier].toLocaleString(),...o?[null===t[o.identifier]?"&ndash;":t[o.identifier]]:[],...a?[null===t[a.identifier]||isNaN(t[a.identifier])?"&ndash;":t[a.identifier]]:[]]))]}setData(t){let e;if(t&&(e=super.setData(t),hb(this.getOptions(),"zoomBar",Wy.TOP,"enabled"))){const t=hb(this.getOptions(),"zoomBar",Wy.TOP,"data");this.setZoomBarData(t)}return e}setZoomBarData(t){const e=t?this.sanitize(qm(t)):this.getDisplayData();let n=e;const{cartesianScales:r}=this.services;if(e&&r.domainAxisPosition&&r.rangeAxisPosition){const t=r.getDomainIdentifier(),i=r.getRangeIdentifier();let s=e.map((e=>e[t].getTime()));s=fy(s).sort(),n=s.map((n=>{let r=0;const s={};return e.forEach((e=>{e[t].getTime()===n&&(r+=e[i])})),s[t]=new Date(n),s[i]=r,s}))}this.set({zoomBarData:n})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(t){const e=this.getOptions();if(!e.axes)return t;const n=[];return Object.keys(Wy).forEach((t=>{const r=Wy[t],i=e.axes[r];if(i&&i.scaleType===Xy.TIME){const t=i.mapsTo;(null!==t||void 0!==t)&&n.push(t)}})),n.length>0&&t.forEach((t=>{n.forEach((e=>{null===hb(t,e,"getTime")&&(t[e]=new Date(t[e]))}))})),t}sanitize(t){return t=super.sanitize(t),this.sanitizeDateValues(t)}}class GO extends jO{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData();return t.sort(((t,e)=>t.source.localeCompare(e.source))),[["Source","Target","Value"],...t.map((t=>[t.source,t.target,t.value]))]}}function zO(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function FO(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function WO(t){return t.depth}function qO(t,e){return e-1-t.height}function ZO(t,e){return t.sourceLinks.length?t.depth:e-1}function YO(t){return function(){return t}}function XO(t,e){return QO(t.source,e.source)||t.index-e.index}function KO(t,e){return QO(t.target,e.target)||t.index-e.index}function QO(t,e){return t.y0-e.y0}function JO(t){return t.value}function tS(t){return t.index}function eS(t){return t.nodes}function nS(t){return t.links}function rS(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function iS({nodes:t}){for(const e of t){let t=e.y0,n=t;for(const n of e.sourceLinks)n.y0=t+n.width/2,t+=n.width;for(const t of e.targetLinks)t.y1=n+t.width/2,n+=t.width}}function sS(){let t,e,n,r=0,i=0,s=1,o=1,a=24,l=8,c=tS,u=ZO,h=eS,d=nS,p=6;function f(){const f={nodes:h.apply(null,arguments),links:d.apply(null,arguments)};return function({nodes:t,links:e}){for(const[e,n]of t.entries())n.index=e,n.sourceLinks=[],n.targetLinks=[];const r=new Map(t.map(((e,n)=>[c(e,n,t),e])));for(const[t,n]of e.entries()){n.index=t;let{source:e,target:i}=n;"object"!=typeof e&&(e=n.source=rS(r,e)),"object"!=typeof i&&(i=n.target=rS(r,i)),e.sourceLinks.push(n),i.targetLinks.push(n)}if(null!=n)for(const{sourceLinks:e,targetLinks:r}of t)e.sort(n),r.sort(n)}(f),function({nodes:t}){for(const e of t)e.value=void 0===e.fixedValue?Math.max(FO(e.sourceLinks,JO),FO(e.targetLinks,JO)):e.fixedValue}(f),function({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,i=0;for(;n.size;){for(const t of n){t.depth=i;for(const{target:e}of t.sourceLinks)r.add(e)}if(++i>e)throw new Error("circular link");n=r,r=new Set}}(f),function({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,i=0;for(;n.size;){for(const t of n){t.height=i;for(const{source:e}of t.targetLinks)r.add(e)}if(++i>e)throw new Error("circular link");n=r,r=new Set}}(f),function(n){const c=function({nodes:t}){const n=zO(t,(t=>t.depth))+1,i=(s-r-a)/(n-1),o=new Array(n);for(const e of t){const t=Math.max(0,Math.min(n-1,Math.floor(u.call(null,e,n))));e.layer=t,e.x0=r+t*i,e.x1=e.x0+a,o[t]?o[t].push(e):o[t]=[e]}if(e)for(const t of o)t.sort(e);return o}(n);t=Math.min(l,(o-i)/(zO(c,(t=>t.length))-1)),function(e){const n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(e,(e=>(o-i-(e.length-1)*t)/FO(e,JO)));for(const r of e){let e=i;for(const i of r){i.y0=e,i.y1=e+i.value*n,e=i.y1+t;for(const t of i.sourceLinks)t.width=t.value*n}e=(o-e+t)/(r.length+1);for(let t=0;t<r.length;++t){const n=r[t];n.y0+=e*(t+1),n.y1+=e*(t+1)}x(r)}}(c);for(let t=0;t<p;++t){const e=Math.pow(.99,t),n=Math.max(1-e,(t+1)/p);m(c,e,n),g(c,e,n)}}(f),iS(f),f}function g(t,n,r){for(let i=1,s=t.length;i<s;++i){const s=t[i];for(const t of s){let e=0,r=0;for(const{source:n,value:i}of t.targetLinks){let s=i*(t.layer-n.layer);e+=E(n,t)*s,r+=s}if(!(r>0))continue;let i=(e/r-t.y0)*n;t.y0+=i,t.y1+=i,b(t)}void 0===e&&s.sort(QO),v(s,r)}}function m(t,n,r){for(let i=t.length-2;i>=0;--i){const s=t[i];for(const t of s){let e=0,r=0;for(const{target:n,value:i}of t.sourceLinks){let s=i*(n.layer-t.layer);e+=w(t,n)*s,r+=s}if(!(r>0))continue;let i=(e/r-t.y0)*n;t.y0+=i,t.y1+=i,b(t)}void 0===e&&s.sort(QO),v(s,r)}}function v(e,n){const r=e.length>>1,s=e[r];_(e,s.y0-t,r-1,n),y(e,s.y1+t,r+1,n),_(e,o,e.length-1,n),y(e,i,0,n)}function y(e,n,r,i){for(;r<e.length;++r){const s=e[r],o=(n-s.y0)*i;o>1e-6&&(s.y0+=o,s.y1+=o),n=s.y1+t}}function _(e,n,r,i){for(;r>=0;--r){const s=e[r],o=(s.y1-n)*i;o>1e-6&&(s.y0-=o,s.y1-=o),n=s.y0-t}}function b({sourceLinks:t,targetLinks:e}){if(void 0===n){for(const{source:{sourceLinks:t}}of e)t.sort(KO);for(const{target:{targetLinks:e}}of t)e.sort(XO)}}function x(t){if(void 0===n)for(const{sourceLinks:e,targetLinks:n}of t)e.sort(KO),n.sort(XO)}function E(e,n){let r=e.y0-(e.sourceLinks.length-1)*t/2;for(const{target:i,width:s}of e.sourceLinks){if(i===n)break;r+=s+t}for(const{source:t,width:i}of n.targetLinks){if(t===e)break;r-=i}return r}function w(e,n){let r=n.y0-(n.targetLinks.length-1)*t/2;for(const{source:i,width:s}of n.targetLinks){if(i===e)break;r+=s+t}for(const{target:t,width:i}of e.sourceLinks){if(t===n)break;r-=i}return r}return f.update=function(t){return iS(t),t},f.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:YO(t),f):c},f.nodeAlign=function(t){return arguments.length?(u="function"==typeof t?t:YO(t),f):u},f.nodeSort=function(t){return arguments.length?(e=t,f):e},f.nodeWidth=function(t){return arguments.length?(a=+t,f):a},f.nodePadding=function(e){return arguments.length?(l=t=+e,f):l},f.nodes=function(t){return arguments.length?(h="function"==typeof t?t:YO(t),f):h},f.links=function(t){return arguments.length?(d="function"==typeof t?t:YO(t),f):d},f.linkSort=function(t){return arguments.length?(n=t,f):n},f.size=function(t){return arguments.length?(r=i=0,s=+t[0],o=+t[1],f):[s-r,o-i]},f.extent=function(t){return arguments.length?(r=+t[0][0],s=+t[1][0],i=+t[0][1],o=+t[1][1],f):[[r,i],[s,o]]},f.iterations=function(t){return arguments.length?(p=+t,f):p},f}var oS=Math.PI,aS=2*oS,lS=1e-6,cS=aS-lS;function uS(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function hS(){return new uS}function dS(t){return function(){return t}}function pS(t){return t[0]}function fS(t){return t[1]}uS.prototype=hS.prototype={constructor:uS,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>lS)if(Math.abs(u*a-l*c)>lS&&i){var d=n-s,p=r-o,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),v=Math.sqrt(h),y=i*Math.tan((oS-Math.acos((f+h-g)/(2*m*v)))/2),_=y/v,b=y/m;Math.abs(_-1)>lS&&(this._+="L"+(t+_*c)+","+(e+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,h=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>lS||Math.abs(this._y1-c)>lS)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%aS+aS),h>cS?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>lS&&(this._+="A"+n+","+n+",0,"+ +(h>=oS)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gS=Array.prototype.slice;function mS(t){return t.source}function vS(t){return t.target}function yS(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function _S(){return function(t){var e=mS,n=vS,r=pS,i=fS,s=null;function o(){var o,a=gS.call(arguments),l=e.apply(this,a),c=n.apply(this,a);if(s||(s=o=hS()),t(s,+r.apply(this,(a[0]=l,a)),+i.apply(this,a),+r.apply(this,(a[0]=c,a)),+i.apply(this,a)),o)return s=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(r="function"==typeof t?t:dS(+t),o):r},o.y=function(t){return arguments.length?(i="function"==typeof t?t:dS(+t),o):i},o.context=function(t){return arguments.length?(s=t??null,o):s},o}(yS)}function bS(t){return[t.source.x1,t.y0]}function xS(t){return[t.target.x0,t.y1]}class ES extends Mw{constructor(){super(...arguments),this.type="alluvial",this.renderType=Gy.SVG,this.gradient_id="gradient-id-"+Math.floor(99999999999*Math.random())}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0});e.html("");const{width:n,height:r}=Tw.getSVGElementSize(e,{useAttrs:!0});if(n<1||r<1)return;const i=this.model.getOptions(),s=this.model.getDisplayData(),o=hb(this.getOptions(),"color","gradient","enabled");let a=K_;i.alluvial.nodePadding>K_&&(a=i.alluvial.nodePadding);const l=hb(i,"alluvial","nodeAlignment");let c=ZO;l===Qy.LEFT?c=WO:l===Qy.RIGHT&&(c=qO);const u=sS().nodeId((t=>t.name)).nodeWidth(X_).nodePadding(a).nodeAlign(c).extent([[2,30],[n-2,r]]);this.graph=u({nodes:i.alluvial.nodes.map((t=>Object.assign({},t))),links:s.map((t=>Object.assign({},t)))}),this.graph.nodes=this.graph.nodes.filter((t=>0!==t.value));const h={};this.graph.nodes.forEach((t=>{const e=t.x0;t.category&&(h[e]=null==t?void 0:t.category)})),e.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(h)).join("g").attr("transform",(t=>`translate(${t}, 0)`)).append("text").attr("id",((t,e)=>this.services.domUtils.generateElementIDString(`alluvial-category-${e}`))).style("font-size","14px").text((t=>h[t]?h[t]:"")).attr("y",20).attr("x",((t,e)=>{const n=this.services.domUtils.generateElementIDString(`alluvial-category-${e}`),{width:r}=Tw.getSVGElementSize(de(`text#${n}`),{useBBox:!0});let i=0;return t+i>=r&&(i=4-r),i}));const d=e.append("g").attr("fill","none").selectAll("g").data(this.graph.links);if(d.exit().remove(),o){const t=hb(this.getOptions(),"color","scale");t&&d.enter().append("linearGradient").attr("id",(t=>`${this.gradient_id}-link-${t.index}`)).attr("gradientUnits","userSpaceOnUse").call((e=>e.append("stop").attr("offset","0%").attr("stop-color",(e=>t[e.source.name])))).call((e=>e.append("stop").attr("offset","100%").attr("stop-color",(e=>t[e.target.name])))),d.exit().remove()}d.enter().append("path").classed("link",!0).attr("d",_S().source(bS).target(xS)).attr("id",(t=>this.services.domUtils.generateElementIDString(`alluvial-line-${t.index}`))).attr("class",(t=>i.alluvial.monochrome?this.model.getColorClassName({classNameTypes:[Fy.STROKE],dataGroupName:0,originalClassName:"link"}):this.model.getColorClassName({classNameTypes:[Fy.STROKE],dataGroupName:t.source.index,originalClassName:"link"}))).style("stroke",(t=>o?`url(#${this.gradient_id}-link-${t.index})`:this.model.getFillColor(t.source.name))).attr("stroke-width",(t=>Math.max(1,t.width))).style("stroke-opacity",Q_.default).attr("aria-label",(t=>`${t.source.name} → ${t.target.name} (${t.value}${i.alluvial.units?" "+i.alluvial.units:""})`));const p=e.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",(t=>this.services.domUtils.generateElementIDString(`alluvial-node-${t.index}`))).classed("node-group",!0).attr("transform",(t=>`translate(${t.x0}, ${t.y0})`));p.append("rect").classed("node",!0).attr("height",(t=>t.y1-t.y0)).attr("width",(t=>t.x1-t.x0)).attr("fill","black");const f=p.append("g").attr("id",(t=>this.services.domUtils.generateElementIDString(`alluvial-node-title-${t.index}`)));f.append("text").attr("id",(t=>this.services.domUtils.generateElementIDString(`alluvial-node-text-${t.index}`))).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text((t=>`${t.name} (${t.value})`)).attr("aria-label",(t=>`${t.name} (${t.value})`)),f.append("rect").classed("node-text-bg",!0).attr("width",((t,e)=>{const n=this.services.domUtils.generateElementIDString(`alluvial-node-text-${e}`),{width:r}=Tw.getSVGElementSize(de(`text#${n}`),{useBBox:!0});return r+8})).attr("height",18).attr("stroke-width",2).lower(),f.attr("transform",((t,e)=>{const n=this.services.domUtils.generateElementIDString(`alluvial-node-text-${e}`),{width:r}=Tw.getSVGElementSize(de(`text#${n}`),{useBBox:!0}),i=(t.y1-t.y0)/2-9;let s=t.x1-t.x0;return t.x1>=r?s-=r+16:s+=4,`translate(${s}, ${i})`})),this.addLineEventListener(),this.addNodeEventListener()}addLineEventListener(){const t=this.getOptions(),e=this,n=zv(((t,n="mouseover")=>{const r=e.parent.selectAll("path.link").transition().call((t=>e.services.transitions.setupTransition({transition:t,name:"alluvial-links-mouse-highlight"})));"mouseout"===n?(de(t).lower(),r.style("stroke-opacity",Q_.default)):r.style("stroke-opacity",(function(){return t===this?(de(this).raise(),Q_.selected):Q_.unfocus}))}),33);this.parent.selectAll("path.link").on("mouseover",(function(r,i){const s=de(this);n(this,"mouseover"),s.classed("link-hovered",!0);const o=getComputedStyle(this).getPropertyValue("stroke");e.services.events.dispatchEvent(jy.Alluvial.LINE_MOUSEOVER,{event:r,element:s,datum:i}),e.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:r,hoveredElement:s,items:[{label:i.target.name,value:i.value+(t.alluvial.units?` ${t.alluvial.units}`:""),color:o,labelIcon:e.getRightArrowIcon()}]})})).on("mousemove",(function(t,n){e.services.events.dispatchEvent(jy.Alluvial.LINE_MOUSEMOVE,{event:t,element:de(this),datum:n}),e.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t,n){e.services.events.dispatchEvent(jy.Alluvial.LINE_CLICK,{event:t,element:de(this),datum:n})})).on("mouseout",(function(t,r){const i=de(this);n(this,"mouseout"),i.classed("link-hovered",!1),e.services.events.dispatchEvent(jy.Alluvial.LINE_MOUSEOUT,{event:t,element:i,datum:r}),e.services.events.dispatchEvent(jy.Tooltip.HIDE,{event:t,hoveredElement:i})}))}addNodeEventListener(){const t=this,e=zv(((e=[],n="mouseover")=>{"mouseout"!==n&&0!==e.length?t.parent.selectAll("path.link").transition().call((t=>this.services.transitions.setupTransition({transition:t,name:"alluvial-link-mouse-highlight"}))).style("stroke-opacity",(function(t){return e.some((e=>e===t.index))?(de(this).classed("link-hovered",!0).raise(),Q_.selected):Q_.unfocus})):t.parent.selectAll("path.link").classed("link-hovered",!1).data(this.graph.links,(t=>t.index)).order().style("stroke-opacity",Q_.default)}),66);t.parent.selectAll(".node-group").on("mouseover",(function(n,r){const i=de(this),s=[];if(t.traverse({link:"sourceLinks",node:"target"},r,s),t.traverse({link:"targetLinks",node:"source"},r,s),s.length){const o=ab(i.attr("transform"));if(i.attr("transform",`translate(${o.x-2}, ${o.y})`),i.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),r.x0-2==0){const e=t.services.domUtils.generateElementIDString(`alluvial-node-title-${r.index}`),n=t.parent.select(`g#${e}`),i=ab(n.attr("transform"));n.attr("transform",`translate(${i.x+4},${i.y})`)}const a=t.services.domUtils.generateElementIDString(`alluvial-node-text-${r.index}`);t.parent.select(`text#${a}`).style("font-weight","bold"),e(s,"mouseover"),t.services.events.dispatchEvent(jy.Alluvial.NODE_MOUSEOVER,{event:n,element:i,datum:r})}})).on("mousemove",(function(e,n){t.services.events.dispatchEvent(jy.Alluvial.NODE_MOUSEMOVE,{event:e,element:de(this),datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Alluvial.NODE_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(n,r){const i=de(this),s=ab(i.attr("transform"));if(i.classed("node-hovered",!1).attr("transform",`translate(${s.x+2}, ${s.y})`).select("rect.node").attr("width",X_),r.x0-2==0){const e=t.services.domUtils.generateElementIDString(`alluvial-node-title-${r.index}`),n=t.parent.select(`g#${e}`),i=ab(n.attr("transform"));n.attr("transform",`translate(${i.x-4},${i.y})`)}const o=t.services.domUtils.generateElementIDString(`alluvial-node-text-${r.index}`);t.parent.select(`text#${o}`).style("font-weight","normal"),e([],"mouseout"),t.services.events.dispatchEvent(jy.Alluvial.NODE_MOUSEOUT,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:i})}))}traverse(t,e,n=[]){e[t.link].map((e=>(n.push(e.index),e[t.node]))).forEach((e=>this.traverse(t,e,n)))}getRightArrowIcon(){return'\n\t\t<svg xmlns="http://www.w3.org/2000/svg" class="arrow-right" width="32" height="32" viewBox="0 0 32 32">\n\t\t\t<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>\n\t\t\t<rect width="32" height="32"/>\n\t\t</svg>'}destroy(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)}}const wS=class t extends Mw{constructor(){super(...arguments),this.type="grid-brush",this.renderType=Gy.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer();if(!n)throw new Error("SVG was not defined");const i=Tw.appendOrSelect(n,"svg.chart-grid-backdrop"),s=Tw.appendOrSelect(i,`g.${this.type}`),o=Tw.appendOrSelect(s,this.selectionSelector),{width:a,height:l}=Tw.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[d]=h.range();r.attr("transform",`translate(${d},0)`);const p=Tw.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===Xy.TIME){let e=this.model.get("zoomDomain");void 0===e&&(e=this.services.zoom.getDefaultZoomBarDomain(),e&&this.model.set({zoomDomain:e},{animate:!1}));const n=e=>{const n=e[1]-e[0];let r="0,"+n.toString();const i=Math.floor(l/t.DASH_LENGTH),s=i*t.DASH_LENGTH;for(let e=0;e<i;e++)r+=","+t.DASH_LENGTH;r+=","+(l-s),i%2==1&&(r+=",0"),r+=","+n.toString(),r+=","+l.toString(),p.attr("stroke-dasharray",r)},r=t=>{const e=t.selection;null===e||e[0]===e[1]||(p.attr("x",parseFloat(o.attr("x"))+parseFloat(i.attr("x"))).attr("y",o.attr("y")).attr("width",o.attr("width")).attr("height",o.attr("height")).style("cursor","pointer").style("display",null),n(e))},c=(t,n)=>{const r=yu().range([0,a]).domain(e);let i=[r.invert(t),r.invert(n)];i[0].valueOf()===i[1].valueOf()&&(i=this.services.zoom.getDefaultZoomBarDomain()),(e[0].valueOf()!==i[0].valueOf()||e[1].valueOf()!==i[1].valueOf())&&this.services.zoom.handleDomainChange(i)};let u;const h=t=>{const e=t.selection;null!==e&&(c(e[0],e[1]),s.call(u.move,null),p.style("display","none"))};0!=l&&0!=a&&(u=Zr().extent([[0,0],[a-1,l]]).on("start brush end",r).on("end.brushed",h),s.call(u));const d=this.services.zoom.getZoomRatio();i.on("click",(function(t){if(t.shiftKey){const t=this.services.domUtils.getHolder(),e=pe(s.node(),t)[0];let n=e-a*d/2;n<0&&(n=0);let r=e+a*d/2;r>a&&(r=a),c(n,r)}}))}}};wS.DASH_LENGTH=4;let OS=wS;class SS extends Mw{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=Gy.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(99999999999*Math.random()),this.brush=Zr(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(jy.ZoomBar.UPDATE,this.render.bind(this));const t=hb(this.getOptions(),"zoomBar",Wy.TOP,"data");this.model.setZoomBarData(t)}render(t=!0){const e=this.getComponentContainer(),n=this.services.zoom.isZoomBarLoading(Wy.TOP),r=this.services.zoom.isZoomBarLocked(Wy.TOP),i=hb(this.getOptions(),"zoomBar",Wy.TOP,"type"),s=hb(this.getOptions(),"axes",Wy.BOTTOM,"highlights"),o=rb.height[i],{width:a}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});if(0===a)return;let l=0;const u=this.model.get("axesMargins");u&&u.left&&(l=u.left);const h=Tw.appendOrSelect(e,"svg.zoom-container").attr("width","100%").attr("height",o).attr("opacity",1);if(Tw.appendOrSelect(e,"rect.zoom-spacer").attr("x",0).attr("y",o).attr("width","100%").attr("height",rb.spacerHeight).attr("opacity",1).attr("fill","none"),i===qy.GRAPH_VIEW?Tw.appendOrSelect(h,"rect.zoom-bg").attr("x",l).attr("y",0).attr("width",a-l).attr("height","100%").classed("zoom-bg-skeleton",n).style("stroke",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):i===qy.SLIDER_VIEW&&Tw.appendOrSelect(h,"rect.zoom-slider-bg").attr("x",l).attr("y",o/2-1).attr("width",a-l).attr("height",2).classed("zoom-slider-bg-skeleton",n).style("stroke",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),n)return void this.renderSkeleton(h,l,a);const{cartesianScales:d}=this.services,p=d.getMainXScale(),f=d.getMainYScale(),g=d.getMainXScaleType();if(p&&g===Xy.TIME){let t=this.services.zoom.getZoomBarData();if(iy(t)||1===t.length)return;this.xScale=p.copy(),this.yScale=f.copy();const n=this.services.zoom.getDefaultZoomBarDomain(t);t=this.compensateDataForDefaultDomain(t,n);const u=this.model.get("initialZoomDomain"),d=hb(this.getOptions(),"zoomBar",Wy.TOP,"initialZoomDomain");d&&d[0]&&d[1]&&(d[0]=new Date(d[0]),d[1]=new Date(d[1])),!d||u&&u[0].valueOf()===d[0].valueOf()&&u[1].valueOf()===d[1].valueOf()?null===d&&null!==u&&this.model.set({initialZoomDomain:null,zoomDomain:ay([],n)},{skipUpdate:!0}):this.model.set({initialZoomDomain:ay([],d),zoomDomain:d?ay([],d):n},{skipUpdate:!0}),this.xScale.range([l,a]).domain(n),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,o-6]).domain(c(t,(t=>t.value)));const g=this.model.get("zoomDomain");if(i===qy.GRAPH_VIEW&&(this.renderZoomBarArea(h,"path.zoom-graph-area-unselected",t,null),this.updateClipPath(e,this.clipId,0,0,0,0),this.renderZoomBarArea(h,"path.zoom-graph-area",t,this.clipId),this.renderZoomBarBaseline(h,l,a),s)){const t=s.highlightStartMapsTo,e=s.highlightEndMapsTo,n=s.color,r=s.labelMapsTo;s.data.forEach(((i,s)=>{Tw.appendOrSelect(h,`rect.highlight-${s}`).attr("height",o-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(i[t])).attr("width",this.xScale(i[e])-this.xScale(i[t])).style("fill",n&&n.scale[i[r]]?n.scale[i[r]]:null).style("fill-opacity",.1).style("stroke",n&&n.scale[i[r]]?n.scale[i[r]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")}))}this.addBrushEventListener(g,l,a);const m=Tw.appendOrSelect(e,this.brushSelector).call(this.brush);if(void 0!==g)if(g[0].valueOf()===g[1].valueOf())m.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const t=g.map((t=>this.xScale(t)));t[1]-t[0]<this.MIN_SELECTION_DIFF||(m.call(this.brush.move,t),this.updateBrushHandle(this.getComponentContainer(),t))}r&&(this.brush.filter((()=>!1)),m.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(t,e,n){const r=hb(this.getOptions(),"zoomBar",Wy.TOP,"type"),i=rb.height[r];this.brush.extent([[e,0],[n,i]]).on("start brush end",null).on("start brush end",(e=>{const n=e.selection;null===n?this.handleBrushedEvent(e,t,this.xScale,this.xScale.range()):n[0]===n[1]||this.handleBrushedEvent(e,t,this.xScale,n)}))}handleBrushedEvent(t,e,n,r){const i=[n.invert(r[0]),n.invert(r[1])];if(this.updateBrushHandle(this.getComponentContainer(),r),null!=t.sourceEvent&&("mousemove"===t.sourceEvent.type||"mouseup"===t.sourceEvent.type||"mousedown"===t.sourceEvent.type||"touchstart"===t.sourceEvent.type||"touchmove"===t.sourceEvent.type||"touchend"===t.sourceEvent.type)){let n;(void 0===e||e[0]!==i[0]||e[1]!==i[1])&&this.services.zoom.handleDomainChange(i,{dispatchEvent:!1}),"start"===t.type?n=jy.ZoomBar.SELECTION_START:"brush"===t.type?n=jy.ZoomBar.SELECTION_IN_PROGRESS:"end"===t.type&&(n=jy.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(jy.ZoomDomain.CHANGE,{newDomain:i})),this.services.events.dispatchEvent(n,{selection:r,newDomain:i})}}updateBrushHandle(t,e){const n=this,r=rb.handleWidth,i=hb(this.getOptions(),"zoomBar",Wy.TOP,"type"),s=rb.height[i],o=-r/2,a=rb.handleBarWidth,l=i===qy.GRAPH_VIEW?rb.handleBarHeight:6,c=-a/2,u=(s-l)/2;t.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",(function(t){return"w"===t.type?Math.max(e[0]+o,n.maxSelectionRange[0]):"e"===t.type?Math.min(e[1]+o,n.maxSelectionRange[1]-r):void 0})).attr("y",0).attr("width",r).attr("height",s).attr("cursor","ew-resize").style("display",null);const h=t.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);h.enter().append("rect").attr("class",(function(t){return"handle-bar handle-bar--"+t.type})),h.attr("x",(function(t){return"w"===t.type?Math.max(e[0]+c,n.maxSelectionRange[0]-o+c):"e"===t.type?Math.min(e[1]+c,n.maxSelectionRange[1]+o+c):void 0})).attr("y",u).attr("width",a).attr("height",l).attr("cursor","ew-resize"),i===qy.SLIDER_VIEW&&this.updateSliderSelectedArea(e),this.updateClipPath(t,this.clipId,e[0],0,e[1]-e[0],s)}updateSliderSelectedArea(t){const e=hb(this.getOptions(),"zoomBar",Wy.TOP,"type"),n=rb.height[e],r=this.getComponentContainer().select("svg.zoom-container");Tw.appendOrSelect(r,"rect.zoom-slider-selected-area").attr("x",t[0]).attr("y",n/2-1).attr("width",t[1]-t[0]).attr("height",2)}renderZoomBarArea(t,e,n,r){const{cartesianScales:i}=this.services,s=i.getMainXAxisPosition(),o=i.getMainYAxisPosition(),a=i.getMainXScaleType(),l=i.getMainYScaleType(),c=(t,e,n)=>r=>i.getValueFromScale(t,e,n,r),u=c(this.xScale,a,s),h=c(this.yScale,l,o),d=hb(this.getOptions(),"zoomBar",Wy.TOP,"type"),p=rb.height[d],f=qu().x((t=>u(t))).y0(p).y1((t=>p-h(t))),g=Tw.appendOrSelect(t,e).datum(n).attr("d",f);r&&g.attr("clip-path",`url(#${r})`)}updateClipPath(t,e,n,r,i,s){const o=Tw.appendOrSelect(t,"clipPath").attr("id",e);Tw.appendOrSelect(o,"rect").attr("x",n).attr("y",r).attr("width",i).attr("height",s)}compensateDataForDefaultDomain(t,e){if(!t||t.length<2)return;const n=qm(t),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier();if(Number(e[0])<Number(n[0][r])){const t={};t[r]=e[0],t[i]=0,n.unshift(t)}if(Number(e[1])>Number(n[n.length-1][r])){const t={};t[r]=e[1],t[i]=0,n.push(t)}return n}renderZoomBarBaseline(t,e,n,r=!1){const i=hb(this.model.getOptions(),"zoomBar",Wy.TOP,"type"),s=rb.height[i],o=Wu()([[e,s],[n,s]]);Tw.appendOrSelect(t,"path.zoom-bg-baseline").attr("d",o).classed("zoom-bg-baseline-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(t,e,n){this.renderZoomBarArea(t,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(t,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),Tw.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),hb(this.getOptions(),"zoomBar",Wy.TOP,"type")===qy.GRAPH_VIEW&&this.renderZoomBarBaseline(t,e,n,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(jy.ZoomBar.UPDATE,this.render.bind(this))}}class TS extends Mw{constructor(t,e){super(t,e),this.type="threshold",this.renderType=Gy.SVG,this.positionService=new IO}render(t=!1){const e=hb(this.getOptions(),"axes"),n=[];Object.keys(e).forEach((t=>{if(Object.values(Wy).includes(t)){const r=e[t];r.thresholds&&r.thresholds.length>0&&n.push({axisPosition:t,thresholds:r.thresholds,correspondingDatasets:null==r?void 0:r.correspondingDatasets,mapsTo:null==r?void 0:r.mapsTo})}}));const r=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(n,(t=>t.axisPosition));r.exit().attr("opacity",0).remove();const i=r.enter().append("g").merge(r);i.attr("class",(t=>`axis-thresholds ${t.axisPosition}`));const s=i.selectAll("g.threshold-group").data((t=>t.thresholds.map((e=>(e.axisPosition=t.axisPosition,e.datum=this.constructDatumObj(t,e),e)))));s.exit().attr("opacity",0).remove();const o=s.enter().append("g");o.append("line").attr("class","threshold-line"),o.append("rect").attr("class","threshold-hoverable-area"),o.merge(s).attr("class","threshold-group");const a=this;i.each((function({axisPosition:e}){const n=a.services.cartesianScales.getScaleByPosition(e),r=a.services.cartesianScales.getScaleTypeByPosition(e);let i=null,s=null;e===Wy.LEFT||e===Wy.RIGHT?(s=n,i=a.services.cartesianScales.getMainXScale()):(i=n,s=a.services.cartesianScales.getMainYScale());const o=r===Xy.LABELS,[l,c]=i.range(),[u,h]=s.range(),{cartesianScales:d}=a.services,p=d.getOrientation(),[f,g]=fb((t=>d.getDomainValue(t)),(t=>d.getRangeValue(t)),p),m=de(this);e===Wy.TOP||e===Wy.BOTTOM?(m.selectAll("line.threshold-line").transition().call((e=>a.services.transitions.setupTransition({transition:e,name:"threshold-line-update",animate:t}))).attr("y1",h).attr("y2",u).attr("x1",(({datum:t})=>f(t)+(o?n.step()/2:0))).attr("x2",(({datum:t})=>f(t)+(o?n.step()/2:0))).style("stroke",(({fillColor:t})=>t)),m.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",(({datum:t})=>-f(t))).attr("width",Math.abs(u-h)).classed("rotate",!0)):(m.selectAll("line.threshold-line").transition().call((e=>a.services.transitions.setupTransition({transition:e,name:"threshold-line-update",animate:t}))).attr("x1",l).attr("x2",c).attr("y1",(({datum:t})=>g(t)+(o?n.step()/2:0))).attr("y2",(({datum:t})=>g(t)+(o?n.step()/2:0))).style("stroke",(({fillColor:t})=>t)),m.selectAll("rect.threshold-hoverable-area").attr("x",l).attr("y",(({datum:t})=>g(t))).attr("width",Math.abs(c-l)).classed("rotate",!1))})),this.services.events.addEventListener(jy.Threshold.SHOW,(t=>{this.setThresholdLabelPosition(t.detail),this.label.classed("hidden",!1)})),this.services.events.addEventListener(jy.Threshold.HIDE,(()=>{this.label.classed("hidden",!0)})),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(t){const{value:e,axisPosition:n}=t,r=this.getOptions();if(this.services.cartesianScales.getScaleTypeByPosition(n)===Xy.TIME){const t=[Wy.LEFT,Wy.RIGHT].includes(n),i=this.services.cartesianScales.getMainXScale(),s=this.services.cartesianScales.getMainYScale(),o=t?s:i,a=hb(r,"timeScale"),l=kE(o.ticks(),hb(a,"timeInterval"));return LE(e,0,o.ticks(),l,a)}return e.toLocaleString("en")}appendThresholdLabel(){const t=de(this.services.domUtils.getHolder()),e=hb(this.getOptions(),"style","prefix");this.label=Tw.appendOrSelect(t,`div.${b_}--${e}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:t,datum:e}){const n=this.services.domUtils.getHolder(),r=pe(t,n),i=e.valueFormatter?e.valueFormatter(e.value):this.getFormattedValue(e);this.label.html(`${e.label||"Threshold"}: ${i}`).style("background-color",e.fillColor);const s=this.label.node(),o=this.positionService.findBestPlacementAt({left:r[0],top:r[1]},s,[MO.RIGHT,MO.LEFT,MO.TOP,MO.BOTTOM],(()=>({top:void 0,left:void 0,width:n.offsetWidth,height:n.offsetHeight}))),a=this.positionService.findPositionAt({left:r[0],top:r[1]},s,o);this.positionService.setElement(s,a)}constructDatumObj(t,e){const n={};return t.correspondingDatasets&&(n.group=hb(t,"correspondingDatasets",0)),n[t.mapsTo]=e.value,n}addEventListeners(){const t=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",(function(e){de(this.parentNode).select("line.threshold-line").classed("active",!0),t.services.events.dispatchEvent(jy.Threshold.SHOW,{event:e,hoveredElement:de(this),datum:de(this).datum()})})).on("mouseout",(function(e){de(this.parentNode).select("line.threshold-line").classed("active",!1),t.services.events.dispatchEvent(jy.Threshold.HIDE,{event:e,hoveredElement:de(this),datum:de(this).datum()})}))}}class MS extends Mw{constructor(t,e){super(t,e),this.type="highlight",this.renderType=Gy.SVG,this.positionService=new IO,this.highlightStrokeWidth=1}render(t=!1){const e=hb(this.getOptions(),"axes"),n=[];Object.keys(e).forEach((t=>{if(Object.values(Wy).includes(t)){const r=e[t];r.highlights&&r.highlights.data.length>0&&n.push({axisPosition:t,highlightStartMapsTo:r.highlights.highlightStartMapsTo,highlightEndMapsTo:r.highlights.highlightEndMapsTo,labelMapsTo:r.highlights.labelMapsTo,highlight:r.highlights.data,color:r.highlights.color})}}));const r=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(n,(t=>t.axisPosition));r.exit().attr("opacity",0).remove();const i=r.enter().append("g").merge(r);i.attr("class",(t=>`axis-highlight ${t.axisPosition}`));const s=i.selectAll("g.highlight-group").data((t=>t.highlight.map((e=>(e.axisPosition=t.axisPosition,e.highlightStartMapsTo=t.highlightStartMapsTo,e.labelMapsTo=t.labelMapsTo,e.color=t.color,e.highlightEndMapsTo=t.highlightEndMapsTo,e)))));s.exit().attr("opacity",0).remove();const o=s.enter().append("g");o.append("rect").attr("class","highlight-bar"),o.append("line").attr("class","highlight-line"),o.merge(s).attr("class","highlight-group");const a=this;i.each((function({axisPosition:e}){const n=a.services.cartesianScales.getMainXScale(),r=a.services.cartesianScales.getMainYScale(),[i,s]=n.range(),[o,l]=r.range(),{cartesianScales:c}=a.services,u=c.getOrientation(),[h,d]=fb((t=>c.getDomainValue(t)),(t=>c.getRangeValue(t)),u),p=de(this);e===Wy.TOP||e===Wy.BOTTOM?p.selectAll("rect.highlight-bar").transition().call((e=>a.services.transitions.setupTransition({transition:e,name:"highlight-bar-update",animate:t}))).attr("y",Math.max(l+a.highlightStrokeWidth,0)).attr("height",Math.max(o-2*a.highlightStrokeWidth,0)).attr("x",(({highlightStartMapsTo:t,...e})=>h(e[t]))).attr("width",(({highlightStartMapsTo:t,highlightEndMapsTo:e,...n})=>Math.max(h(n[e])-h(n[t]),0))).style("stroke",(({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null)).style("stroke-dasharray","2, 2").attr("stroke-width",a.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",(({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null)):p.selectAll("rect.highlight-bar").transition().call((e=>a.services.transitions.setupTransition({transition:e,name:"highlight-bar-update",animate:t}))).attr("x",i).attr("width",Math.max(s-i,0)).attr("y",(({highlightEndMapsTo:t,...e})=>d(e[t]))).attr("height",(({highlightStartMapsTo:t,highlightEndMapsTo:e,...n})=>Math.max(d(n[t])-d(n[e]),0))).style("stroke",(({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null)).style("stroke-dasharray","2, 2").attr("stroke-width",a.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",(({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null))}))}}class CS extends PO{getItems(t){if(t.detail.items)return t.detail.items;const{data:e}=t.detail;if(!e||!e.length||!e[0])return[];const n=this.getOptions(),{cartesianScales:r}=this.services,i=r.getDomainIdentifier(),s=r.isDualAxes(),{groupMapsTo:o}=n.data,a=r.getDomainLabel();let l=r.getRangeLabel();const c=e[0][i];let u;if(1===e.length){const i=e[0],h=r.getRangeIdentifier(i);if(s){const t=r.getRangeAxisPosition({datum:i,groups:[i[o]]});l=r.getScaleLabel(t)}const d=i[h];u=[{label:a,value:c},...Array.isArray(d)&&2===d.length?[{label:"Start",value:d[0]},{label:"End",value:d[1]}]:[{label:l,value:i[h]}]],t.detail.additionalItems&&t.detail.additionalItems.forEach((t=>u.push({label:t.label,value:t.value}))),u.push({label:n.tooltip.groupLabel,value:i[o],color:this.model.getFillColor(i[o]),class:this.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:i[o]})})}else if(e.length>1&&(u=[{label:a,value:c}],u=u.concat(e.map((t=>{const e=t[r.getRangeIdentifier(t)];return{label:t[o],value:Array.isArray(e)&&2===e.length?`${e[0]} - ${e[1]}`:e,color:this.model.getFillColor(t[o]),class:this.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:t[o]})}})).sort(((t,e)=>e.value-t.value))),!s&&!0===hb(n,"tooltip","showTotal"))){const t=r.getRangeIdentifier();u.push({label:xf(n,"tooltip.totalLabel")||"Total",value:e.reduce(((e,n)=>e+n[t]),0),bold:!0})}return u}}class AS extends Sw{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:t=null}={}){if(this.dualAxes&&t){const e=this.model.getOptions(),{groupMapsTo:n}=e.data,r=hb(e,"axes",this.secondaryDomainAxisPosition),i=t[n];if(null!=r&&r.correspondingDatasets&&r.correspondingDatasets.includes(i))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:t=null,groups:e=null}={}){if(this.dualAxes){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=hb(n,"axes",this.secondaryRangeAxisPosition);let s;if(null!==t?s=t[r]:e&&e.length>0&&(s=e[0]),null!=i&&i.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(t){return hb(this.model.getOptions(),"axes",t)}getDomainAxisOptions(){const t=this.getDomainAxisPosition();return this.getAxisOptions(t)}getRangeAxisOptions(){const t=this.getRangeAxisPosition();return this.getAxisOptions(t)}getScaleLabel(t){return this.getAxisOptions(t).title||(t===Wy.BOTTOM||t===Wy.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(Wy).map((t=>Wy[t])).forEach((t=>{this.scales[t]=this.createScale(t)}))}findDomainAndRangeAxes(){const t=this.findVerticalAxesPositions(),e=this.findHorizontalAxesPositions(),n=this.findDomainAndRangeAxesPositions(t,e);this.domainAxisPosition=n.primaryDomainAxisPosition,this.rangeAxisPosition=n.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=n.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=n.secondaryRangeAxisPosition)}determineOrientation(){this.rangeAxisPosition!==Wy.LEFT&&this.rangeAxisPosition!==Wy.RIGHT||this.domainAxisPosition!==Wy.BOTTOM&&this.domainAxisPosition!==Wy.TOP?this.orientation=Yy.HORIZONTAL:this.orientation=Yy.VERTICAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var t,e,n,r;const i=this.model.getOptions(),s=hb(i,"axes");(null!=(t=s[Wy.LEFT])&&t.correspondingDatasets&&s[Wy.RIGHT]||null!=(e=s[Wy.RIGHT])&&e.correspondingDatasets&&s[Wy.LEFT]||null!=(n=s[Wy.TOP])&&n.correspondingDatasets&&s[Wy.BOTTOM]||null!=(r=s[Wy.BOTTOM])&&r.correspondingDatasets&&s[Wy.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(t){const e=hb(this.model.getOptions(),"axes",t,"domain");if(e&&!Array.isArray(e))throw new Error(`Domain in ${t} axis is not a valid array`);if(Array.isArray(e)&&(this.scaleTypes[t]===Xy.LINEAR||this.scaleTypes[t]===Xy.TIME)&&2!==e.length)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[t]}`);return e}getOrientation(){return this.orientation}getScaleByPosition(t){return this.scales[t]}getScaleTypeByPosition(t){return this.scaleTypes[t]}getDomainAxisScaleType(){const t=this.getDomainAxisPosition();return this.getScaleTypeByPosition(t)}getRangeAxisScaleType(){const t=this.getRangeAxisPosition();return this.getScaleTypeByPosition(t)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const t=[Wy.BOTTOM,Wy.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find((e=>t.indexOf(e)>-1))}getMainYAxisPosition(){const t=[Wy.LEFT,Wy.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find((e=>t.indexOf(e)>-1))}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(t,e,n,r){const i=this.model.getOptions(),s=hb(i,"axes")[n],{mapsTo:o}=s,a=null!==hb(r,o)?r[o]:r;let l;switch(e){case Xy.LABELS:l=t(a)+t.step()/2;break;case Xy.TIME:l=t(new Date(a));break;default:l=t(a)}return l}getBoundedScaledValues(t){const{bounds:e}=this.model.getOptions(),n=this.getRangeAxisPosition({datum:t}),r=this.scales[n],i=this.model.getOptions(),s=hb(i,"axes")[n],{mapsTo:o}=s,a=void 0!==t[o]?t[o]:t;return[r(null!==hb(t,e.upperBoundMapsTo)?t[e.upperBoundMapsTo]:a),r(null!==hb(t,e.lowerBoundMapsTo)?t[e.lowerBoundMapsTo]:a)]}getValueThroughAxisPosition(t,e){const n=this.scaleTypes[t],r=this.scales[t];return this.getValueFromScale(r,n,t,e)}getDomainValue(t){const e=this.getDomainAxisPosition({datum:t});return this.getValueThroughAxisPosition(e,t)}getRangeValue(t){const e=this.getRangeAxisPosition({datum:t});return this.getValueThroughAxisPosition(e,t)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(t){const e=this.model.getOptions();return hb(e,"axes",this.getDomainAxisPosition({datum:t}),"mapsTo")}getRangeIdentifier(t){const e=this.model.getOptions();return hb(e,"axes",this.getRangeAxisPosition({datum:t}),"mapsTo")}extendsDomain(t,e){const n=this.model.getOptions(),r=hb(n,"axes",t);return r.scaleType===Xy.TIME?function(t,e){const n=new Date(t[0]),r=new Date(t[1]);return Xb(r,n)>1?[Fx(n,e),Pb(r,e)]:Zb(r,n)>1?[Hx(n,e),wb(r,e)]:Hb(r,n)>1?[$x(n,e),Eb(r,e)]:function(t,e,n){bb(2,arguments);var r=jb(t,e)/Ub;return Fb(null==n?void 0:n.roundingMethod)(r)}(r,n)>1?[jx(n,e),Tb(r,e)]:Wb(r,n)>30?[Gx(n,30*e),kb(r,30*e)]:Wb(r,n)>1?[Gx(n,e),kb(r,e)]:Yb(r,n)>15?[zx(n,15*e),Ib(r,15*e)]:Yb(r,n)>1?[zx(n,e),Ib(r,e)]:[n,r]}(e,hb(n,"timeScale","addSpaceOnEdges")):function([t,e],n,r){const i=(e-t)*n,s=e<=0&&e+i>0?0:e+i;let o=t>=0&&t-i<0?0:t-i;if(r===Xy.LOG&&o<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");o=t}return[o,s]}(e,O_,r.scaleType)}findVerticalAxesPositions(){const t=this.model.getOptions(),e=hb(t,"axes"),n=this.isDualAxes();return null===hb(e,Wy.LEFT)&&null!==hb(e,Wy.RIGHT)||!0===hb(e,Wy.RIGHT,"main")||n&&hb(e,Wy.LEFT,"correspondingDatasets")?{primary:Wy.RIGHT,secondary:Wy.LEFT}:{primary:Wy.LEFT,secondary:Wy.RIGHT}}findHorizontalAxesPositions(){const t=this.model.getOptions(),e=hb(t,"axes"),n=this.isDualAxes();return null===hb(e,Wy.BOTTOM)&&null!==hb(e,Wy.TOP)||!0===hb(e,Wy.TOP,"main")||n&&hb(e,Wy.BOTTOM,"correspondingDatasets")?{primary:Wy.TOP,secondary:Wy.BOTTOM}:{primary:Wy.BOTTOM,secondary:Wy.TOP}}findDomainAndRangeAxesPositions(t,e){const n=this.model.getOptions(),r=hb(n,"axes",t.primary),i=hb(n,"axes",e.primary),s=r.scaleType||Xy.LINEAR,o=i.scaleType||Xy.LINEAR,a={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return a.primaryDomainAxisPosition=e.primary,a.primaryRangeAxisPosition=t.primary,a.secondaryDomainAxisPosition=e.secondary,a.secondaryRangeAxisPosition=t.secondary,(!(o===Xy.LABELS||o===Xy.TIME)&&s===Xy.LABELS||s===Xy.TIME)&&(a.primaryDomainAxisPosition=t.primary,a.primaryRangeAxisPosition=e.primary,a.secondaryDomainAxisPosition=t.secondary,a.secondaryRangeAxisPosition=e.secondary),a}getScaleDomain(t){const e=this.model.getOptions(),n=hb(e,"axes",t),r=hb(e,"bounds"),{includeZero:i}=n,s=hb(n,"scaleType")||Xy.LINEAR;if(this.model.isDataEmpty())return[];if(n.binned){const{bins:t}=this.model.getBinConfigurations();return[0,M(t,(t=>t.length))]}if(n.limitDomainToBins){const{bins:t}=this.model.getBinConfigurations(),e=this.model.getStackKeys({bins:t});return[e[0].split("-")[0],e[e.length-1].split("-")[1]]}const o=this.model.getDisplayData(),{extendLinearDomainBy:a,mapsTo:l,percentage:u,thresholds:h}=n,{reference:d,compareTo:p}=w_;if(n.domain)return s===Xy.LABELS?n.domain:(s===Xy.TIME&&(n.domain=n.domain.map((t=>void 0===t.getTime?new Date(t):t))),this.extendsDomain(t,n.domain));if(u)return[0,100];if(n&&s===Xy.LABELS)return fy(o.map((t=>t[l])));let f,g;const m=this.model.getDataGroupNames();if(s===Xy.LABELS_RATIO)return o.map((t=>`${t[d]}/${t[p]}`));if(s===Xy.TIME)g=o.map((t=>+new Date(t[l])));else if(r&&e.axes)g=[],o.forEach((t=>{g.push(t[l]),t[r.upperBoundMapsTo]&&g.push(t[r.upperBoundMapsTo]),t[r.lowerBoundMapsTo]&&g.push(t[r.lowerBoundMapsTo])}));else if(!0===n.stacked&&m&&t===this.getRangeAxisPosition()){const{groupMapsTo:t}=e.data,n=this.model.getDataValuesGroupedByKeys({groups:m}),r=o.filter((e=>!m.includes(e[t]))),i=[];n.forEach((t=>{const{...e}=t;let n=0,r=0;Object.values(e).forEach((t=>{isNaN(t)||(t<0?r+=t:n+=t)})),i.push([r,n])})),g=[...Tf(i),...r.map((t=>t[l]))]}else g=[],o.forEach((t=>{const e=t[l];Array.isArray(e)&&2===e.length?(g.push(e[0]),g.push(e[1])):(a&&g.push(Math.max(t[l],t[a])),g.push(e))}));return s!==Xy.TIME&&s!==Xy.LOG&&i&&g.push(0),h&&h.length>0&&h.forEach((t=>{const e=hb(t,"value");null!==e&&g.push(e)})),f=c(g),f=this.extendsDomain(t,f),f}createScale(t){const e=this.model.getOptions(),n=hb(e,"axes",t);if(!n)return null;const r=hb(n,"scaleType")||Xy.LINEAR;let i;return this.scaleTypes[t]=r,i=r===Xy.TIME?yu():r===Xy.LOG?ll().base(n.base||10):r===Xy.LABELS||r===Xy.LABELS_RATIO?Ha():Ja(),i.domain(this.getScaleDomain(t)),i}getHighestDomainThreshold(){const t=hb(this.model.getOptions(),"axes"),e=this.getDomainAxisPosition(),{thresholds:n}=t[e];if(!Array.isArray(n)||Array.isArray(n)&&!n.length)return null;const r=this.getDomainScale(),i=n.sort(((t,e)=>e.value-t.value))[0];return this.getScaleTypeByPosition(e)===Xy.TIME&&("string"==typeof i.value||void 0===i.value.getTime)&&(i.value=new Date(i.value)),{threshold:i,scaleValue:r(i.value)}}getHighestRangeThreshold(){const t=hb(this.model.getOptions(),"axes"),e=this.getRangeAxisPosition(),{thresholds:n}=t[e];if(!Array.isArray(n)||Array.isArray(n)&&!n.length)return null;const r=this.getRangeScale(),i=n.sort(((t,e)=>e.value-t.value))[0];return{threshold:i,scaleValue:r(i.value)}}}class DS extends Sw{constructor(){super(...arguments),this.curveTypes={curveLinear:Gu,curveLinearClosed:Dh,curveBasis:lh,curveBasisClosed:uh,curveBasisOpen:dh,curveBundle:fh,curveCardinal:vh,curveCardinalClosed:_h,curveCardinalOpen:xh,curveCatmullRom:Oh,curveCatmullRomClosed:Th,curveCatmullRomOpen:Ch,curveMonotoneX:Uh,curveMonotoneY:Vh,curveNatural:jh,curveStep:zh,curveStepAfter:Wh,curveStepBefore:Fh}}getD3Curve(){let t="curveLinear";const e=this.model.getOptions().curve;if(e&&(t="string"==typeof e?e:e.name),this.curveTypes[t]){let n=this.curveTypes[t];return e&&Object.keys(e).forEach((t=>{n[t]&&(n=n[t](e[t]))})),n}return console.warn(`The curve type '${t}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class LS extends Sw{isZoomBarEnabled(){if(!this.services.cartesianScales||!hb(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const t=this.services.cartesianScales.getMainXAxisPosition(),e=hb(this.model.getOptions(),"axes",t,"scaleType");return t===Wy.BOTTOM&&e===Xy.TIME}getZoomBarData(){const t=this.model.getZoomBarData();return t&&t.length>1?t:this.model.getDisplayData()}getDefaultZoomBarDomain(t){if(!this.services.zoom)throw new Error("Services zoom not defined");const e=t||this.services.zoom.getZoomBarData(),{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales undefined");const r=n.getMainXAxisPosition(),i=n.getDomainIdentifier(),s=hb(this.model.getOptions(),"axes",r,"domain");if(Array.isArray(s)&&2===s.length)return s;if(!r)throw new Error("Not defined: mainXAxisPosition");return n.extendsDomain(r,c(e,(t=>t[i])))}handleDomainChange(t,e={dispatchEvent:!0}){var n;this.model.set({zoomDomain:t},{animate:!1}),e.dispatchEvent&&(null==(n=this.services.events)||n.dispatchEvent(jy.ZoomDomain.CHANGE,{newDomain:t}))}getZoomRatio(){return hb(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(t,e){var n;const r=this.model.get("zoomDomain"),i=Object.assign({stacked:!1},e),s=hb(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&s&&r){const e=i.stacked?"sharedStackKey":null==(n=this.services.cartesianScales)?void 0:n.getDomainIdentifier(),s=t.filter((t=>new Date(t[e])>=r[0]&&new Date(t[e])<=r[1]));if(s.length>0)return s}return t}zoomIn(t=this.getZoomRatio()){var e;const n=this.model.get("zoomDomain"),r=rb.handleWidth,i=null==(e=this.services.cartesianScales)?void 0:e.getMainXScale().copy();i.domain(this.getDefaultZoomBarDomain());const s=i(n[0]),o=i(n[1]);if(o-s<r+1)return;const a=i.range(),l=o-s,c=Math.min((a[1]-a[0])/2*(t/2),l/2);let u=s+c,h=o-c;u>=h&&(u=s+l/2-r/2,h=o-l/2+r/2);const d=[i.invert(u),i.invert(h)];(n[0].valueOf()!==d[0].valueOf()||n[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}zoomOut(t=this.getZoomRatio()){const e=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const n=this.services.cartesianScales.getMainXScale().copy();n.domain(this.getDefaultZoomBarDomain());const r=n(e[0]),i=n(e[1]),s=n.range(),o=(s[1]-s[0])/2*(t/2),a=Math.max(r-o,s[0]),l=Math.min(i+o,s[1]),c=[n.invert(a),n.invert(l)];(e[0].valueOf()!==c[0].valueOf()||e[1].valueOf()!==c[1].valueOf())&&this.handleDomainChange(c)}resetZoomDomain(){const t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();(t[0].valueOf()!==e[0].valueOf()||t[1].valueOf()!==e[1].valueOf())&&this.handleDomainChange(e)}isMinZoomDomain(){const t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();return!(!t||!e)&&(t[1].valueOf()-t[0].valueOf())/(e[1].valueOf()-e[0].valueOf())<hb(this.model.getOptions(),"zoomBar","minZoomRatio")}isMaxZoomDomain(){const t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();return!(!t||!e||t[0].valueOf()!==e[0].valueOf()||t[1].valueOf()!==e[1].valueOf())}isEmptyState(){return 0===this.getZoomBarData().length}isZoomBarLoading(t){return hb(this.model.getOptions(),"zoomBar",t,"loading")}isZoomBarLocked(t){return hb(this.model.getOptions(),"zoomBar",t,"locked")}}class RS extends HO{constructor(t,e){super(t,e),this.services=Object.assign(this.services,{cartesianScales:AS,curves:DS,zoom:LS}),this.model=new jO(this.services)}getAxisChartComponents(t,e){const n=this.model.getOptions(),r=hb(n,"zoomBar",Wy.TOP,"enabled"),i=hb(n,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=this.services.cartesianScales.getMainXAxisPosition(),o=hb(n,"axes",s,"scaleType"),a=r&&s===Wy.BOTTOM&&o===Xy.TIME,l=this.services.zoom.isZoomBarLocked(Wy.TOP),c=!!this.model.getOptions().title,u={id:"title",components:[new SO(this.model,this.services)],growth:n_.STRETCH},h={id:"toolbar",components:[new Aw(this.model,this.services)],growth:n_.PREFERRED},d={id:"header",components:[new Lw(this.model,this.services,[u,...i?[h]:[]],{direction:e_.ROW,alignItems:r_.CENTER})],growth:n_.PREFERRED},p={id:"legend",components:[new AO(this.model,this.services)],growth:n_.PREFERRED};a&&!l&&t.push(new DO(this.model,this.services),new OS(this.model,this.services)),t.push(new TS(this.model,this.services)),t.push(new MS(this.model,this.services));const f={id:"graph-frame",components:t,growth:n_.STRETCH,renderType:Gy.SVG},g=!1!==hb(e,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled;let m=e_.COLUMN;if(g){const t=hb(this.model.getOptions(),"legend","position");t===Ky.LEFT?(m=e_.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Jy.VERTICAL)):t===Ky.RIGHT?(m=e_.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Jy.VERTICAL)):t===Ky.BOTTOM&&(m=e_.COLUMN_REVERSE)}const v={id:"spacer",components:[new Rw(this.model,this.services)],growth:n_.PREFERRED},y={id:"full-frame",components:[new Lw(this.model,this.services,[...g?[p]:[],...g?[v]:[],f],{direction:m})],growth:n_.STRETCH},_={id:"zoom-bar",components:[new SS(this.model,this.services)],growth:n_.PREFERRED,renderType:Gy.SVG},b=[];if(c||i){b.push(d);const t={id:"spacer",components:[new Rw(this.model,this.services,i?{size:15}:void 0)],growth:n_.PREFERRED};b.push(t)}return a&&b.push(_),b.push(y),[new CS(this.model,this.services),new OO(this.model,this.services),new Lw(this.model,this.services,b,{direction:e_.COLUMN})]}}class kS extends Mw{constructor(){super(...arguments),this.type="grid",this.renderType=Gy.SVG}render(t=!0){const e=hb(this.getOptions(),"grid","x","enabled"),n=hb(this.getOptions(),"grid","y","enabled");this.drawBackdrop(e,n),(e||n)&&(e&&(Tw.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(t)),n&&(Tw.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(t)))}drawXGrid(t){const e=this.parent,n=this.backdrop.attr("height"),r=q(this.services.cartesianScales.getMainXScale()).tickSizeInner(-n).tickSizeOuter(0);if(hb(this.getOptions(),"grid","x","alignWithAxisTicks")){const t=this.services.cartesianScales.getDomainAxisPosition(),e=hb(this.getOptions(),"axes",t,"ticks","values");e&&r.tickValues(e)}else{const t=hb(this.getOptions(),"grid","x","numberOfTicks");r.ticks(t)}const i=e.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${n})`);t?i.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"grid-update",animate:t}))).call(r):i.call(r),this.cleanGrid(i)}drawYGrid(t){const e=this.parent,n=this.backdrop.attr("width"),r=Z(this.services.cartesianScales.getMainYScale()).tickSizeInner(-n).tickSizeOuter(0);if(hb(this.getOptions(),"grid","y","alignWithAxisTicks")){const t=this.services.cartesianScales.getRangeAxisPosition(),e=hb(this.getOptions(),"axes",t,"ticks","values");e&&r.tickValues(e)}else{const t=hb(this.getOptions(),"grid","y","numberOfTicks");r.ticks(t)}const i=e.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);t?i.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"grid-update",animate:t}))).call(r):i.call(r),this.cleanGrid(i)}getGridlineThreshold(t){const e=this.parent,n=e.selectAll(".x.grid .tick").nodes().sort(((t,e)=>Number(ob(t).tx)-Number(ob(e).tx)));let r=-1;if(!n.length)return;n.forEach((e=>{t[0]>=+ob(e).tx&&r++}));const i=r+1<n.length?r+1:n.length,s=n[r],o=n[i];let a;if(s)if(o)a=+ob(o).tx-+ob(s).tx;else{const t=e.select("rect.chart-grid-backdrop").node();a=Tw.getSVGElementSize(t).width-+ob(s).tx}else a=+ob(o).tx;const{threshold:l}=this.getOptions().tooltip.gridline;return a*l}getActiveGridline(t){const e=hb(this.getOptions,"tooltip","gridline","threshold")||this.getGridlineThreshold(t);return this.parent.selectAll(".x.grid .tick").filter((function(){const n=ob(this),r=Number(n.tx)-e,i=Number(n.tx)+e;return r<=t[0]&&t[0]<=i}))}drawBackdrop(t,e){const n=this.parent,r=this.services.cartesianScales.getMainXScale(),i=this.services.cartesianScales.getMainYScale(),[s,o]=r.range(),[a,l]=i.range();this.backdrop=Tw.appendOrSelect(n,"svg.chart-grid-backdrop");const c=Tw.appendOrSelect(this.backdrop,t||e?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(c).attr("x",s).attr("y",l).attr("width",Math.abs(o-s)).attr("height",Math.abs(a-l)).lower(),c.attr("width","100%").attr("height","100%")}cleanGrid(t){t.selectAll("text").remove(),t.select(".domain").remove()}}class IS extends Mw{constructor(){super(...arguments),this.type="area",this.renderType=Gy.SVG,this.gradient_id="gradient-id-"+Math.floor(99999999999*Math.random()),this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-area"}))).attr("opacity",(t=>t.name!==e.datum().name?x_.unselected:x_.selected))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-area"}))).attr("opacity",x_.selected)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0}),n=this.getOptions();let r=[0,0];const{cartesianScales:i}=this.services,s=i.getOrientation(),o=qu().curve(this.services.curves.getD3Curve()).defined((t=>null!=t[i.getRangeIdentifier()])),a=this.model.getGroupedData(this.configs.groups),l=hb(n,"bounds"),c=l&&a&&1===a.length;!c&&l&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${a.length}`);let u=0;const h=(t,e)=>{!1===hb(n,"axes",t,"includeZero")&&e[0]>0&&e[1]>0&&(u=e[0])},d=t=>c?i.getBoundedScaledValues(t)[0]:i.getRangeValue(u),p=t=>c?i.getBoundedScaledValues(t)[1]:i.getRangeValue(t);s===Yy.VERTICAL?(r=i.getMainYScale().domain(),h(i.getMainYAxisPosition(),r),o.x((t=>i.getDomainValue(t))).y0((t=>d(t))).y1((t=>p(t)))):(r=i.getMainXScale().domain(),h(i.getMainXAxisPosition(),r),o.x0((t=>d(t))).x1((t=>p(t))).y((t=>i.getDomainValue(t))));const f=hb(n,"color","gradient","enabled"),g=a&&1===a.length&&f;a.length>1&&f&&console.error("Gradients can only be enabled when having 1 single dataset");const m=e.selectAll("path.area").data(a,(t=>t.name)),v=de(this.services.domUtils.getMainContainer());if(m.exit().attr("opacity",0).remove(),!a.length)return;if(g){const t=v.select(`path.${this.model.getColorClassName({classNameTypes:[Fy.STROKE],dataGroupName:a[0].name})}`).node();let e;if(t)e=getComputedStyle(t,null).getPropertyValue("stroke");else{const t=hb(this.model.getOptions(),"color","scale");null!==t&&(e=t[Object.keys(t)[0]])}VO.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${a[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:VO.getStops(r,e)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each((function(){this.parentNode.remove()}));const y=this,_=m.enter().append("path");g?_.merge(m).style("fill",(t=>`url(#${this.services.domUtils.generateElementIDString(`${t.name.replace(" ","")}_${this.gradient_id}`)})`)).attr("class","area").attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t.name,originalClassName:"area"}))).attr("d",(t=>{const{data:e}=t;return o(e)})):(_.attr("opacity",0).merge(m).attr("class","area").attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],dataGroupName:t.name,originalClassName:"area"}))).style("fill",(t=>y.model.getFillColor(t.name))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"area-update-enter",animate:t}))).attr("opacity",c?1:x_.selected).attr("d",(t=>{const{data:e}=t;return o(e)})),c&&_.attr("fill-opacity",x_.selected).style("stroke",(t=>y.model.getStrokeColor(t.name))).style("stroke-dasharray","2, 2").attr("stroke-width","0.7px"))}destroy(){const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class PS extends Mw{constructor(){super(...arguments),this.type="line",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-line"}))).attr("opacity",(t=>t.name!==e.datum().name?I_.unselected:I_.selected))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-line"}))).attr("opacity",I_.selected)}}init(){const{events:t}=this.services;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0}),{cartesianScales:n,curves:r}=this.services,[i,s]=fb((t=>n.getDomainValue(t)),(t=>n.getRangeValue(t)),n.getOrientation()),o=this.getOptions(),a=Wu().x(i).y(s).curve(r.getD3Curve()).defined((t=>null!=t[n.getRangeIdentifier(t)]));let l=[];if(this.configs.stacked){const t=Object.keys(o.axes).some((t=>o.axes[t].percentage)),{groupMapsTo:e}=o.data;l=this.model.getStackedData({groups:this.configs.groups,percentage:t}).map((t=>{const n=this.services.cartesianScales.getDomainIdentifier(t),r=this.services.cartesianScales.getRangeIdentifier(t);return{name:hb(t,0,e),data:t.map((t=>({[n]:t.data.sharedStackKey,[e]:t[e],[r]:t[1]}))),hidden:!cy(t,(t=>t[0]!==t[1]))}}))}else l=this.model.getGroupedData(this.configs.groups);const c=e.selectAll("path.line").data(l,(t=>t.name));c.exit().attr("opacity",0).remove(),c.enter().append("path").classed("line",!0).attr("opacity",0).merge(c).data(l,(t=>t.name)).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],dataGroupName:t.name,originalClassName:"line"}))).style("stroke",(t=>this.model.getStrokeColor(t.name))).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",(t=>{const{data:e}=t;return e.map((t=>t[this.services.cartesianScales.getRangeIdentifier(t)])).join(",")})).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"line-update-enter",animate:t}))).attr("opacity",(t=>t.hidden?0:1)).attr("d",(t=>{const{data:e}=t;return a(e)}))}destroy(){const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class NS extends Mw{constructor(){super(...arguments),this.type="ruler",this.renderType=Gy.SVG,this.isXGridEnabled=hb(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=hb(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(t=!1){const e=hb(this.getOptions(),"ruler","enabled");this.drawBackdrop(),e&&!this.isEventListenerAdded?this.addBackdropEventListeners():!e&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(t){return t}showRuler(t,[e,n]){const r=this.parent,i=this.services.cartesianScales.getOrientation(),s=this.model.getDisplayData(),o=this.services.cartesianScales.getRangeScale(),[a,l]=o.range(),c=i===Yy.HORIZONTAL?n:e,u=Tw.appendOrSelect(r,"g.ruler").attr("aria-label","ruler"),h=Tw.appendOrSelect(u,"line.ruler-line"),d=r.selectAll("[role=graphics-symbol]"),p=s.map((t=>({domainValue:this.services.cartesianScales.getDomainValue(t),originalData:t}))).filter((t=>function(t,e){return t>e-5&&t<e+5}(t.domainValue,c)));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map((t=>t.domainValue)).join()===this.pointsWithinLine.map((t=>t.domainValue)).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(jy.Tooltip.MOVE,{mousePosition:[e,n]});this.pointsWithinLine=p;const f=this.pointsWithinLine.reduce(((t,e)=>{if(0===t.length)return t.push(e),t;const n=t[0].domainValue,r=Math.abs(c-e.domainValue),i=Math.abs(c-n);return r>i||(r<i?t=[e]:t.push(e)),t}),[]);if(f.length>0){const t=f.map((t=>t.originalData)).filter((t=>null!=t[this.services.cartesianScales.getRangeIdentifier(t)])),r=f.map((t=>t.domainValue)),s=d.filter((t=>{const e=this.services.cartesianScales.getDomainValue(t);return r.includes(e)}));this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!sy(this.elementsToHighlight,s)&&this.hideRuler(),s.dispatch("mouseover"),this.elementsToHighlight=s,this.services.events.dispatchEvent(jy.Tooltip.SHOW,{mousePosition:[e,n],hoveredElement:h,data:this.formatTooltipData(t)}),u.attr("opacity",1);const o=f[0];"horizontal"===i?h.attr("x1",l).attr("x2",a).attr("y1",o.domainValue).attr("y2",o.domainValue):h.attr("y1",l).attr("y2",a).attr("x1",o.domainValue).attr("x2",o.domainValue)}else this.hideRuler()}hideRuler(){const t=this.parent,e=Tw.appendOrSelect(t,"g.ruler");t.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(jy.Tooltip.HIDE),e.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const t=this,e=this.services.domUtils.getHolder(),n=this.model.getDisplayData();let r=function(e){const n=pe(e,t.parent.node());t.showRuler(e,n)};n.length>100&&(r=function(t,e,n){let r=null;return function(...i){const s=this;s.mousePosition=pe(i[0],n),clearTimeout(r),r=setTimeout((function(){t.apply(s,i)}),e)}}((function(e){const{mousePosition:n}=this;t.showRuler(e,n)}),n.length%50*12.5,e)),this.backdrop.on("mousemove mouseover",r).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const t=this.parent;this.backdrop=Tw.appendOrSelect(t,"svg.chart-grid-backdrop")}}class BS extends Mw{constructor(){super(...arguments),this.type="scatter",this.renderType=Gy.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call((t=>{var e;return null==(e=this.services.transitions)?void 0:e.setupTransition({transition:t,name:"chart-holder-hover-scatter"})})).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call((t=>{var e;return null==(e=this.services.transitions)?void 0:e.setupTransition({transition:t,name:"chart-holder-mouseout-scatter"})})).attr("opacity",0)},this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call((t=>{var e;return null==(e=this.services.transitions)?void 0:e.setupTransition({transition:t,name:"legend-hover-scatter"})})).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call((t=>{var e;return null==(e=this.services.transitions)?void 0:e.setupTransition({transition:t,name:"legend-mouseout-scatter"})})).attr("opacity",1)}}init(){const{events:t}=this.services;if(!t)throw new Error("Services events are undefined.");t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:e}=this.configs;e&&(t.addEventListener(jy.Chart.MOUSEOVER,this.handleChartHolderOnHover),t.addEventListener(jy.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(t){const{cartesianScales:e}=this.services;if(!e)throw new Error("Services cartesianScales are undefined.");const n=e.getDomainIdentifier(t),r=this.model.get("zoomDomain");return void 0!==r?t.filter((t=>t[n].getTime()>=r[0].getTime()&&t[n].getTime()<=r[1].getTime())):t}getScatterData(){const t=this.getOptions(),{stacked:e}=this.configs;let n;if(e){const e=Object.keys(t.axes).some((e=>t.axes[e].percentage));n=this.model.getStackedData({groups:this.configs.groups,percentage:e})}else{const{cartesianScales:t}=this.services;if(!t)throw new Error("Services cartesianScales are undefined.");n=this.model.getDisplayData(this.configs.groups).filter((e=>{const n=t.getRangeIdentifier(e);return void 0!==e[n]&&null!==e[n]}))}return this.filterBasedOnZoomDomain(n)}render(t){if(!hb(this.getOptions(),"points","enabled")&&!hb(this.getOptions(),"bubble","enabled"))return;const e=this.getComponentContainer({withinChartClip:!0}),n=this.getOptions(),{groupMapsTo:r}=n.data,{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");const s=i.getDomainIdentifier(),o=e.selectAll("circle.dot").data(this.getScatterData(),(t=>`${t[r]}-${t[s]}`));o.exit().attr("opacity",0).remove();const a=o.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(o);this.styleCircles(a,t),this.addEventListeners()}isDatapointThresholdAnomaly(t){const{handleThresholds:e}=this.configs;if(!e)return!1;const{cartesianScales:n}=this.services;if(!n)throw new Error("Cartesian scales service is undefined");const r=n.getOrientation(),[i,s]=fb(n.getHighestDomainThreshold(),n.getHighestRangeThreshold(),r),[o,a]=fb((t=>n.getDomainValue(t)),(t=>n.getRangeValue(t)),r),l=o(t),c=a(t);return s&&i?c<=s.scaleValue&&l>=i.scaleValue:s?c<=s.scaleValue:!!i&&l>=i.scaleValue}styleCircles(t,e){const n=this.getOptions(),{filled:r,fillOpacity:i}=n.points,{cartesianScales:s}=this.services;if(!s)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:o}=n.data,[a,l]=fb((t=>s.getDomainValue(t)),(t=>s.getRangeValue(t)),s.getOrientation()),{fadeInOnChartHolderMouseover:c}=this.configs;t.raise().classed("dot",!0).attr("class",(t=>{const e=s.getDomainIdentifier(t),n=this.model.getIsFilled(t[o],t[e],t,r)?[Fy.FILL,Fy.STROKE]:[Fy.STROKE];return this.model.getColorClassName({classNameTypes:n,dataGroupName:t[o],originalClassName:"dot"})||""})).classed("threshold-anomaly",(t=>this.isDatapointThresholdAnomaly(t))).classed("filled",(t=>{const e=s.getDomainIdentifier(t);return this.model.getIsFilled(t[o],t[e],t,r)})).classed("unfilled",(t=>{const e=s.getDomainIdentifier(t);return!this.model.getIsFilled(t[o],t[e],t,r)})).transition().call((t=>{var n;return null==(n=this.services.transitions)?void 0:n.setupTransition({transition:t,name:"scatter-update-enter",animate:e})})).attr("cx",a).attr("cy",l).attr("r",n.points.radius).style("fill",(t=>{const e=s.getDomainIdentifier(t);if(this.model.getIsFilled(t[o],t[e],t,r))return this.model.getFillColor(t[o],t[e],t)})).style("stroke",(t=>{const e=s.getDomainIdentifier(t);return this.model.getStrokeColor(t[o],t[e],t)})).attr("fill-opacity",r?i:1).attr("opacity",c?0:1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",(t=>t[s.getRangeIdentifier(t)])),this.addEventListeners()}getTooltipAdditionalItems(t){return null}addEventListeners(){const t=this,{groupMapsTo:e}=t.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",(function(n,r){var i,s;const o=de(this);o.classed("hovered",!0).attr("class",(n=>t.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:n[e],originalClassName:o.attr("class")}))).style("fill",(n=>{var r;const i=null==(r=t.services.cartesianScales)?void 0:r.getDomainIdentifier(n);return t.model.getFillColor(n[e],n[i],n)})).classed("unfilled",!1),null==(i=t.services.events)||i.dispatchEvent(jy.Tooltip.SHOW,{event:n,hoveredElement:o,data:[r],additionalItems:t.getTooltipAdditionalItems(r)}),null==(s=t.services.events)||s.dispatchEvent(jy.Scatter.SCATTER_MOUSEOVER,{event:n,element:o,datum:r})})).on("mousemove",(function(e,n){var r,i;const s=de(this);null==(r=t.services.events)||r.dispatchEvent(jy.Scatter.SCATTER_MOUSEMOVE,{event:e,element:s,datum:n}),null==(i=t.services.events)||i.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){var r;null==(r=t.services.events)||r.dispatchEvent(jy.Scatter.SCATTER_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(n,r){var i,s,o;const a=de(this);if(a.classed("hovered",!1),!t.configs.filled){const{filled:n}=t.getOptions().points,s=null==(i=t.services.cartesianScales)?void 0:i.getDomainIdentifier(r),o=t.model.getIsFilled(r[e],r[s],r,n);a.classed("unfilled",!o).style("fill",(r=>o||n?t.model.getFillColor(r[e],r[s],r):null))}null==(s=t.services.events)||s.dispatchEvent(jy.Scatter.SCATTER_MOUSEOUT,{event:n,element:a,datum:r}),null==(o=t.services.events)||o.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:a})}))}destroy(){var t;null==(t=this.parent)||t.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:e}=this.services;if(!e)throw new Error("Services events undefined");e.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(jy.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.removeEventListener(jy.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class US extends Mw{constructor(t,e,n){super(t,e,n),this.type="axes",this.renderType=Gy.SVG,this.truncation={[Wy.LEFT]:!1,[Wy.RIGHT]:!1,[Wy.TOP]:!1,[Wy.BOTTOM]:!1},n&&(this.configs=n),this.margins=this.configs.margins}render(t=!0){const{position:e}=this.configs,n=this.getOptions(),r=hb(n,"axes",e,"visible"),i=this.getComponentContainer(),{width:s,height:o}=Tw.getSVGElementSize(i,{useAttrs:!0}),a=Tw.appendOrSelect(i,`g.axis.${e}`);let l,c;if(e===Wy.BOTTOM||e===Wy.TOP?(l=this.configs.axes[Wy.LEFT]?this.margins.left:0,c=this.configs.axes[Wy.RIGHT]?s-this.margins.right:s):(l=o-this.margins.bottom,c=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const u=this.services.cartesianScales.getScaleByPosition(e);let h;switch(this.scaleType===Xy.LABELS||this.scaleType===Xy.LABELS_RATIO?u.rangeRound([l,c]):u.range([l,c]),e){case Wy.LEFT:h=Z;break;case Wy.BOTTOM:h=q;break;case Wy.RIGHT:h=W;break;case Wy.TOP:h=F}a.attr("aria-label",`${e} axis`);const d=!a.select("g.ticks").empty();let p=Tw.appendOrSelect(a,"g.ticks");d||(p.attr("role",`${CO.GRAPHICS_OBJECT} ${CO.GROUP}`),p.attr("aria-label",`${e} ticks`));const f=Tw.appendOrSelect(a,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${e} ticks`),g=hb(n,"axes",e),m=this.scaleType===Xy.TIME||g.scaleType===Xy.TIME,v=e===Wy.LEFT||e===Wy.RIGHT,y=this.model.get("zoomDomain");if(y&&m&&!v&&u.domain(y),!r)return void p.attr("aria-hidden",!0);const _=hb(g,"scaleType"),b=hb(n,"data","loading"),x=hb(g,"ticks","number"),E=hb(g,"ticks","values"),w=hb(g,"truncation","type"),O=hb(g,"truncation","threshold"),S=hb(g,"truncation","numCharacter"),T=null!==x,M=hb(n,"timeScale"),C=Tw.appendOrSelect(f,"g.tick"),A=Tw.appendOrSelect(C,"text").text("0"),D=Tw.getSVGElementSize(A.node(),{useBBox:!0}).height;C.remove();const L=this.scaleType||g.scaleType||Xy.LINEAR,R=h(u).tickSizeOuter(0);if(u.ticks){let t;if(T?t=x:(t=E_.number,v&&(t=this.getNumberOfFittingTicks(o,D,E_.verticalSpaceRatio))),1===u.ticks().length&&0===u.ticks()[0]&&(t=0),R.ticks(t),m)if(u.ticks(t).length){const r=hb(n,"timeScale","addSpaceOnEdges"),i=hb(n,"axes",e,"domain"),s=u.copy();r&&!i&&s.nice(t);const o=s.ticks(t);r&&o.length>2&&!i&&(o.splice(o.length-1,1),o.splice(0,1)),R.tickValues(o)}else R.tickValues([])}let k;const I=hb(g,"ticks","formatter");if(m){const t=kE(R.tickValues(),hb(n,"timeScale","timeInterval"));k=null===I?(e,n)=>LE(e,n,R.tickValues(),t,M):(e,n)=>{const r=LE(e,n,R.tickValues(),t,M);return I(e,n,r)}}else null===I?L===Xy.LINEAR&&(k=t=>t.toLocaleString()):k=I;R.tickFormat(k);const[P,N]=this.services.cartesianScales.getScaleByPosition(e).domain();let B;if(E){if(m)E.forEach(((t,e)=>{void 0===t.getTime&&(E[e]=new Date(t))})),B=E.filter((t=>{const e=t.getTime();return e>=new Date(P).getTime()&&e<=new Date(N).getTime()}));else if(_===Xy.LABELS){const t=this.services.cartesianScales.getScaleByPosition(e).domain();B=E.filter((e=>t.includes(e)))}else B=E.filter((t=>t>=P&&t<=N));R.tickValues(B)}switch(e){case Wy.LEFT:p.attr("transform",`translate(${this.margins.left}, 0)`);break;case Wy.BOTTOM:p.attr("transform",`translate(0, ${o-this.margins.bottom})`);break;case Wy.RIGHT:p.attr("transform",`translate(${s-this.margins.right}, 0)`);break;case Wy.TOP:p.attr("transform",`translate(0, ${this.margins.top})`)}const U=this.model.isDataEmpty();if(g.title){const t=Tw.appendOrSelect(a,"text.axis-title").html(U||b?"":g.title),n=hb(g,"titleOrientation");let r;switch(e){case Wy.LEFT:n===f_.RIGHT?t.attr("transform","rotate(90)").attr("y",0).attr("x",u.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):t.attr("transform","rotate(-90)").attr("y",0).attr("x",-u.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case Wy.BOTTOM:t.attr("transform",`translate(${this.margins.left/2+u.range()[1]/2}, ${o+4})`).style("text-anchor","middle");break;case Wy.RIGHT:n===f_.LEFT?t.attr("transform","rotate(-90)").attr("y",s).attr("x",-u.range()[0]/2).style("text-anchor","middle"):t.attr("transform","rotate(90)").attr("y",-s).attr("x",u.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case Wy.TOP:r=Tw.getSVGElementSize(t,{useBBox:!0}).height,t.attr("transform",`translate(${this.margins.left/2+u.range()[1]/2}, ${r/2})`).style("text-anchor","middle")}}if(m){const e=kE(R.tickValues(),hb(n,"timeScale","timeInterval")),r=M.showDayName,i=p;t&&(p=p.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"axis-update",animate:t})))),p=p.call(R),i.selectAll(".tick").data(R.tickValues(),u).order().select("text").style("font-weight",((t,n)=>DE(t,n,R.tickValues(),e,r)?"bold":"normal"))}else p=t&&d?p.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"axis-update",animate:t}))).call(R):p.call(R);if(f.call(R),e===Wy.BOTTOM||e===Wy.TOP){let t=!1;const n=hb(g,"ticks","rotation");if(n===h_.ALWAYS)t=!0;else if(n===h_.NEVER)t=!1;else if(!n||n===h_.AUTO)if(u.step)t=f.selectAll("g.tick text").nodes().some((t=>Tw.getSVGElementSize(t,{useBBox:!0}).width>=u.step()));else{t=!1;const e=f.append("text").text("A"),n=Tw.getSVGElementSize(e.node(),{useBBox:!0}).width;let r;f.selectAll("g.tick").each((function(){const e=de(this),i=parseFloat(hb(ob(this),"tx"));null!==i&&r+e.text().length*n*.8>=i&&(t=!0),r=i})),e.remove()}t?(T||(R.ticks(this.getNumberOfFittingTicks(s,D,E_.horizontalSpaceRatio)),f.call(R),p.call(R)),a.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",e===Wy.TOP?"start":"end")):a.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(b?a.attr("opacity",0):a.attr("opacity",1),p.selectAll("g.tick").attr("aria-label",(t=>t)),f.selectAll("g.tick").attr("aria-label",(t=>t)),w!==Zy.NONE&&_===Xy.LABELS&&!E){const t=this.services.cartesianScales.getScaleDomain(e);if(t.length>0){const n=i.select(`g.axis.${e} g.ticks g.tick`).html();a.selectAll("g.ticks g.tick").html(n);const r=this;a.selectAll("g.tick text").data(t).text((function(t){return t.length>O?(r.truncation[e]=!0,cb(t,w,S)):t})),this.getInvisibleAxisRef().selectAll("g.tick text").data(t).text((function(t){return t.length>O?cb(t,w,S):t})),a.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),a.selectAll("g.tick text").data(t)}}this.addEventListeners()}addEventListeners(){const t=this.getComponentContainer(),{position:e}=this.configs,n=Tw.appendOrSelect(t,`g.axis.${e}`),r=this.getOptions(),i=hb(r,"axes",e),s=hb(i,"scaleType"),o=hb(i,"truncation","threshold"),a=this;n.selectAll("g.tick text").on("mouseover",(function(t,e){a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEOVER,{event:t,element:de(this),datum:e}),s===Xy.LABELS&&e.length>o&&a.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:t,hoveredElement:de(this),content:e})})).on("mousemove",(function(t,e){a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEMOVE,{event:t,element:de(this),datum:e}),s===Xy.LABELS&&e.length>o&&a.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t,e){a.services.events.dispatchEvent(jy.Axis.LABEL_CLICK,{event:t,element:de(this),datum:e})})).on("mouseout",(function(t,e){a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEOUT,{event:t,element:de(this),datum:e}),s===Xy.LABELS&&a.services.events.dispatchEvent(jy.Tooltip.HIDE)}))}getInvisibleAxisRef(){const{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} g.ticks.invisible`)}getTitleRef(){const{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} text.axis-title`)}getNumberOfFittingTicks(t,e,n){return Cg(Math.floor(t/(e*n)),2,E_.number)}destroy(){const t=this.getComponentContainer(),{position:e}=this.configs;Tw.appendOrSelect(t,`g.axis.${e}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class VS extends US{constructor(t,e,n){super(t,e,n)}render(t=!0){super.render(t),super.destroy();const e=this.configs.position,n=this.getComponentContainer(),r=Tw.appendOrSelect(n,`g.axis.${e}`),i=this;r.selectAll("g.tick").each((function(t,n){const r=de(this);r.classed("tick-hover",!0).attr("tabindex",0===n?0:-1);const s=r.select("text"),{width:o,height:a}=Tw.getSVGElementSize(s,{useBBox:!0}),l=Tw.appendOrSelect(r,"rect.axis-holder");let c=0,u=0;switch(e){case Wy.LEFT:c=-o+Number(s.attr("x")),u=-a/2;break;case Wy.RIGHT:c=Math.abs(Number(s.attr("x"))),u=-a/2;break;case Wy.TOP:c=-o/2,u=-a+Number(s.attr("y"))/2,i.truncation[e]&&(c=0,l.attr("transform","rotate(-45)"));break;case Wy.BOTTOM:c=-o/2,u=a/2-2,i.truncation[e]&&(c=-o,l.attr("transform","rotate(-45)"))}l.attr("x",c-S_.rectanglePadding).attr("y",u).attr("width",o+2*S_.rectanglePadding).attr("height",a).lower()})),this.addEventListeners()}addEventListeners(){const t=this.getComponentContainer(),{position:e}=this.configs,n=Tw.appendOrSelect(t,`g.axis.${e}`),r=this.getOptions(),i=hb(r,"axes",e),s=hb(i,"scaleType"),o=hb(i,"truncation","threshold"),a=this;n.selectAll("g.tick.tick-hover").on("mouseover",(function(t){const e=de(this).select("text"),n=e.datum();a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEOVER,{event:t,element:e,datum:n}),s===Xy.LABELS&&n.length>o&&a.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:t,element:e,datum:n})})).on("mousemove",(function(t){const e=de(this).select("text"),n=e.datum();a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEMOVE,{event:t,element:e,datum:n}),a.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t){a.services.events.dispatchEvent(jy.Axis.LABEL_CLICK,{event:t,element:de(this).select("text"),datum:de(this).select("text").datum()})})).on("mouseout",(function(t){a.services.events.dispatchEvent(jy.Axis.LABEL_MOUSEOUT,{event:t,element:de(this).select("text"),datum:de(this).select("text").datum()}),s===Xy.LABELS&&a.services.events.dispatchEvent(jy.Tooltip.HIDE)})).on("focus",(function(t){const e={clientX:0,clientY:0};if(t.target){t.target.focus();const n=t.target.getBoundingClientRect();e.clientX=n.x,e.clientY=n.y}a.services.events.dispatchEvent(jy.Axis.LABEL_FOCUS,{event:{...t,...e},element:de(this),datum:de(this).select("text").datum()})})).on("blur",(function(t){a.services.events.dispatchEvent(jy.Axis.LABEL_BLUR,{event:t,element:de(this),datum:de(this).select("text").datum()})})).on("keydown",(function(t){t.key&&"Escape"===t.key&&(a.services.events.dispatchEvent(jy.Tooltip.HIDE),a.services.events.dispatchEvent(jy.Axis.LABEL_BLUR,{event:t,element:de(this),datum:de(this).select("text").datum()})),e===Wy.LEFT||e===Wy.RIGHT?t.key&&"ArrowUp"===t.key?a.goNext(this,t):t.key&&"ArrowDown"===t.key&&a.goPrevious(this,t):t.key&&"ArrowLeft"===t.key?a.goPrevious(this,t):t.key&&"ArrowRight"===t.key&&a.goNext(this,t)}))}goNext(t,e){t.nextElementSibling&&"path"!==t.nextElementSibling.tagName&&t.nextElementSibling.dispatchEvent(new Event("focus")),e.preventDefault()}goPrevious(t,e){t.previousElementSibling&&"path"!==t.previousElementSibling.tagName&&t.previousElementSibling.dispatchEvent(new Event("focus")),e.preventDefault()}destroy(){const t=this.getComponentContainer(),{position:e}=this.configs;Tw.appendOrSelect(t,`g.axis.${e}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class $S extends Mw{constructor(){super(...arguments),this.type="2D-axes",this.renderType=Gy.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(t=!1){const e={},n=Object.keys(Wy),r=hb(this.getOptions(),"axes");n.forEach((t=>{r[Wy[t]]&&(e[Wy[t]]=!0)})),this.configs.axes=e,n.forEach((t=>{const e=Wy[t];if(this.configs.axes[e]&&!this.children[e]){const t={position:e,axes:this.configs.axes,margins:this.margins},n=this.model.axisFlavor===y_.DEFAULT?new US(this.model,this.services,t):new VS(this.model,this.services,t);n.setModel(this.model),n.setServices(this.services),n.setParent(this.parent),this.children[e]=n}})),Object.keys(this.children).forEach((e=>{this.children[e].render(t)}));const i={};Object.keys(this.children).forEach((t=>{const e=this.children[t],n=e.configs.position,r=e.getInvisibleAxisRef(),{width:s,height:o}=Tw.getSVGElementSize(r,{useBBox:!0});let a;switch(e.getTitleRef().empty()?a=0:(a=Tw.getSVGElementSize(e.getTitleRef(),{useBBox:!0}).height,(n===Wy.LEFT||n===Wy.RIGHT)&&(a+=5)),n){case Wy.TOP:i.top=o+a;break;case Wy.BOTTOM:i.bottom=o+a;break;case Wy.LEFT:i.left=s+a;break;case Wy.RIGHT:i.right=s+a}})),this.services.events.dispatchEvent(jy.Axis.RENDER_COMPLETE),Object.keys(i).some((t=>this.margins[t]!==i[t]))&&(this.margins=Object.assign(this.margins,i),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(jy.ZoomBar.UPDATE),Object.keys(this.children).forEach((t=>{this.children[t].margins=this.margins})),this.render(!0))}}class HS extends Mw{constructor(){super(...arguments),this.type="skeleton"}render(t=!0){const e=hb(this.getOptions(),"data","loading");e?this.renderSkeleton(e):this.removeSkeleton()}renderSkeleton(t){if(this.configs.skeleton===s_.GRID)this.renderGridSkeleton(t);else if(this.configs.skeleton===s_.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(t);else if(this.configs.skeleton===s_.PIE)this.renderPieSkeleton(t);else{if(this.configs.skeleton!==s_.DONUT)throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`);this.renderDonutSkeleton(t)}}renderGridSkeleton(t){this.setScales(),this.drawBackdrop(t),this.drawXGrid(t),this.drawYGrid(t),t&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(t){const e=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(t),e===Yy.VERTICAL&&this.drawYGrid(t),e===Yy.HORIZONTAL&&this.drawXGrid(t),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(t){const e=this.computeOuterRadius();this.drawRing(e,0,t),t&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(t){const e=this.computeOuterRadius(),n=this.computeInnerRadius();this.drawRing(e,n,t),t&&this.setShimmerEffect("shimmer-areas")}setScales(){const t=this.services.cartesianScales.getMainXScale().range(),e=this.services.cartesianScales.getMainYScale().range();this.xScale=Ja().domain([0,1]).range(t),this.yScale=Ja().domain([0,1]).range(e)}drawBackdrop(t){const e=this.parent,{width:n,height:r}=Tw.getSVGElementSize(e,{useAttrs:!0});this.backdrop=Tw.appendOrSelect(e,"svg.chart-skeleton.DAII").attr("width",n).attr("height",r);const i=Tw.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");i.attr("width","100%").attr("height","100%");const[s]=this.xScale.range(),[,o]=this.yScale.range();this.backdrop.merge(i).attr("x",s).attr("y",o),i.classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(t){const e=+this.backdrop.attr("width"),n=hb(this.getOptions(),"grid","x","numberOfTicks"),r=this.xScale.ticks(n).map((t=>t*e)),i=Tw.appendOrSelect(this.backdrop,"g.x.skeleton"),s=i.selectAll("line").data(r);s.enter().append("line").merge(s).attr("x1",(t=>t)).attr("x2",(t=>t)).attr("y1",0).attr("y2","100%"),i.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(t){const e=+this.backdrop.attr("height"),n=this.backdrop.attr("width"),r=hb(this.getOptions(),"grid","y","numberOfTicks"),i=this.xScale.ticks(r).map((t=>t*e)),s=Tw.appendOrSelect(this.backdrop,"g.y.skeleton"),o=s.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",0).attr("x2",n).attr("y1",(t=>t)).attr("y2",(t=>t)),s.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(t,e,n=!0){const r=this.parent,{width:i,height:s}=Tw.getSVGElementSize(r,{useAttrs:!0}),o=Tw.appendOrSelect(r,"svg.chart-skeleton").attr("width",i).attr("height",s),a=0===e?"pie":"donut",l=hb(this.getOptions(),a,"alignment");Tw.appendOrSelect(o,"rect.chart-skeleton-area-container").attr("width",i).attr("height",s).attr("fill","none");const c=Vu().innerRadius(e).outerRadius(t).startAngle(0).endAngle(2*Math.PI),u=t+Math.abs(H_),h=t+(Math.min(i,s)-2*t)/2,d=Tw.appendOrSelect(o,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${u}, ${h})`).attr("d",c).classed("shimmer-effect-areas",n).classed("empty-state-areas",!n).style("fill",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=t+F_;l===Qy.CENTER?p=i/2:l===Qy.RIGHT&&(p=i-t-F_);const f=t+W_;d.attr("transform",`translate(${p}, ${f})`)}computeOuterRadius(){const{width:t,height:e}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(t,e)/2+H_}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(t){const e="stop-bg-shimmer",n=this.parent.select(".chart-skeleton"),{width:r}=Tw.getSVGElementSize(this.parent,{useAttrs:!0}),i=r,s=Tw.appendOrSelect(n,"defs").lower(),o=Tw.appendOrSelect(s,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(t)).attr("class",t).attr("x1",0-3*.2*r).attr("x2",i).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),a=`\n\t\t\t<stop class="${e}" offset="0"></stop>\n\t\t\t<stop class="stop-shimmer" offset="0.2"></stop>\n\t\t\t<stop class="${e}" offset="0.4"></stop>\n\t\t`;o.html(a),function t(){o.attr("gradientTransform",`translate(${0-3*.2*r}, 0)`).transition().duration(2e3).delay(1e3).ease(br).attr("gradientTransform",`translate(${i+3*.2*r}, 0)`).on("end",t)}()}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class jS extends jO{constructor(t){super(t)}getBoxQuartiles(t){return{q_25:L(t,.25),q_50:L(t,.5),q_75:L(t,.75)}}getBoxplotData(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this.getGroupedData(),i=[];for(const{name:t,data:s}of n){const n=this.services.cartesianScales.getRangeIdentifier(),o=s.map((t=>t[n])).sort(r),a={[e]:t,counts:o,quartiles:this.getBoxQuartiles(o),outliers:null,whiskers:null},l=a.quartiles.q_25,c=a.quartiles.q_75,u=1.5*(c-l),h=l-u,d=c+u,p=[],f=[];for(const t of o)t<h||t>d?p.push(t):f.push(t);a.outliers=p;const g=C(f),m=M(f);a.whiskers={min:g||C([a.quartiles.q_25,a.quartiles.q_50,a.quartiles.q_75]),max:m||M([a.quartiles.q_25,a.quartiles.q_50,a.quartiles.q_75])},i.push(a)}return i}getTabularDataArray(){const t=this.getOptions(),{groupMapsTo:e}=t.data;return[["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"],...this.getBoxplotData().map((t=>{let n=hb(t,"outliers");return(null===n||0===n.length)&&(n=["&ndash;"]),[t[e],null!==hb(t,"whiskers","min")?hb(t,"whiskers","min").toLocaleString():"&ndash;",null!==hb(t,"quartiles","q_25")?hb(t,"quartiles","q_25").toLocaleString():"&ndash;",null!==hb(t,"quartiles","q_50")?hb(t,"quartiles","q_50").toLocaleString():"&ndash;",null!==hb(t,"quartiles","q_75")?hb(t,"quartiles","q_75").toLocaleString():"&ndash;",null!==hb(t,"whiskers","max")?hb(t,"whiskers","max").toLocaleString():"&ndash;",null!==hb(t,"quartiles","q_75")&&null!==hb(t,"quartiles","q_25")?(hb(t,"quartiles","q_75")-hb(t,"quartiles","q_25")).toLocaleString():"&ndash;",n.map((t=>t.toLocaleString())).join(",")]}))]}setColorClassNames(){const t=hb(this.getOptions(),"color","pairing");let e=hb(t,"option");e=e<=C_["1-color"]?e:1;const n=this.allDataGroups.map((()=>`1-${e}-1`));this.colorClassNames=$a().range(n).domain(this.allDataGroups)}}class GS extends Mw{constructor(){super(...arguments),this.type="boxplot",this.renderType=Gy.SVG}render(t){const e=this.getComponentContainer({withinChartClip:!0}),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.model.getDataGroupNames(),s=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),[a,l]=s.range(),[c,u]=o.range(),h=l-a,d=c-u;if(0===h)return;const{cartesianScales:p}=this.services,f=p.getOrientation(),g=f===Yy.VERTICAL,[m,v]=fb((t=>this.services.cartesianScales.getDomainValue(t)),(t=>this.services.cartesianScales.getRangeValue(t)),f),y=Math.floor((g?h:d)/i.length),_=Math.min(y/2,16),b=this.model.getBoxplotData(),x=e.selectAll(".box-group").data(b);x.exit().remove();const E=x.enter().append("g").attr("class","box-group"),w=x.merge(E);E.append("path").merge(x.select("path.vertical-line.start")).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],originalClassName:"vertical-line start"}))).attr("stroke-width",L_.default).attr("fill","none").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-verticalstartline",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r]),n=e,i=p.getRangeValue(t.whiskers.min),s=p.getRangeValue(t.quartiles.q_25);return pb({x0:e,x1:n,y0:i,y1:s},f)})),E.append("path").merge(x.select("path.vertical-line.end")).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],originalClassName:"vertical-line end"}))).attr("stroke-width",L_.default).attr("fill","none").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-verticalendline",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r]),n=e,i=p.getRangeValue(t.whiskers.max),s=p.getRangeValue(t.quartiles.q_75);return pb({x0:e,x1:n,y0:i,y1:s},f)})),E.append("path").merge(x.select("path.box")).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],originalClassName:"box"}))).attr("fill-opacity",D_.opacity.default).attr("stroke-width",L_.default).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",(t=>t[r])).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-quartiles",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r])-_/2,n=e+_,i=p.getRangeValue(Math[g?"max":"min"](t.quartiles.q_75,t.quartiles.q_25)),s=i+Math.abs(p.getRangeValue(t.quartiles.q_75)-p.getRangeValue(t.quartiles.q_25));return pb({x0:e,x1:n,y0:i,y1:s},f)})),E.append("path").merge(x.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",(t=>{const e=p.getDomainValue(t[r])-_/2,n=e+_,i=p.getRangeValue(t.whiskers.min),s=p.getRangeValue(t.whiskers.max);return pb({x0:e,x1:n,y0:i,y1:s},f)})),E.append("path").merge(x.select("path.whisker.start")).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],originalClassName:"whisker start"}))).attr("stroke-width",L_.thicker).attr("fill","none").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-startingwhisker",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r])-_/4,n=e+_/2,i=p.getRangeValue(t.whiskers.min),s=p.getRangeValue(t.whiskers.min);return pb({x0:e,x1:n,y0:i,y1:s},f)})),E.append("path").merge(x.select("path.median")).attr("fill","none").attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],originalClassName:"median"}))).attr("stroke-width",2).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-median",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r])-_/2,n=e+_,i=p.getRangeValue(t.quartiles.q_50);return pb({x0:e,x1:n,y0:i,y1:i},f)})),E.append("path").merge(x.select("path.whisker.end")).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],originalClassName:"whisker end"}))).attr("stroke-width",L_.thicker).attr("fill","none").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-endingwhisker",animate:t}))).attr("d",(t=>{const e=p.getDomainValue(t[r])-_/4,n=e+_/2,i=p.getRangeValue(t.whiskers.max),s=p.getRangeValue(t.whiskers.max);return pb({x0:e,x1:n,y0:i,y1:s},f)}));const O=w.selectAll("circle.outlier").data((t=>t.outliers.map((e=>({min:t.whiskers.min,max:t.whiskers.max,[r]:t[r],value:e})))));O.exit().remove();const S=O.enter().append("circle");O.merge(S).attr("r",A_.radius).attr("class",(()=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],originalClassName:"outlier"}))).attr("fill-opacity",A_.opacity.default).attr("cx",m).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"boxplot-update-circles",animate:t}))).attr("cy",v),this.addBoxEventListeners(),this.addCircleEventListeners()}addBoxEventListeners(){const t=this,e=this.getOptions(),{groupMapsTo:n}=e.data;this.parent.selectAll("path.highlight-area").on("mouseover",(function(r,i){const s=de(this);de(this.parentNode).select("path.box").classed("hovered",!0).attr("fill-opacity",D_.opacity.hovered),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:r,hoveredElement:s,items:[{label:e.tooltip.groupLabel,value:i[n],class:t.model.getColorClassName({classNameTypes:[Fy.TOOLTIP]})},{label:"Minimum",value:i.whiskers.min},{label:"Q1",value:i.quartiles.q_25},{label:"Median",value:i.quartiles.q_50},{label:"Q3",value:i.quartiles.q_75},{label:"Maximum",value:i.whiskers.max},{label:"IQR",value:i.quartiles.q_75-i.quartiles.q_25}]}),t.services.events.dispatchEvent(jy.Boxplot.BOX_MOUSEOVER,{event:r,element:s,datum:i})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Boxplot.BOX_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Boxplot.BOX_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);de(this.parentNode).select("path.box").classed("hovered",!1).attr("fill-opacity",D_.opacity.default),t.services.events.dispatchEvent(jy.Boxplot.BOX_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}addCircleEventListeners(){const t=this,e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",(function(i,s){const o=de(this);o.classed("hovered",!0).attr("fill-opacity",A_.opacity.hovered).classed("unfilled",!1),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:i,hoveredElement:o,items:[{label:e.tooltip.groupLabel,value:s[n],class:t.model.getColorClassName({classNameTypes:[Fy.TOOLTIP]})},{label:"Outlier",value:s[r]}]}),t.services.events.dispatchEvent(jy.Boxplot.OUTLIER_MOUSEOVER,{event:i,element:o,datum:s})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Boxplot.OUTLIER_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Boxplot.OUTLIER_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1).attr("fill-opacity",A_.opacity.default),t.services.events.dispatchEvent(jy.Boxplot.OUTLIER_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}}class zS extends Mw{constructor(){super(...arguments),this.type="zero-line",this.renderType=Gy.SVG}render(t){const e=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),n=this.services.cartesianScales.getScaleByPosition(e),[r,i]=n.domain(),s=r>0&&i<0||r<0&&i>0,o=this.getComponentContainer();if(!s)return void o.selectAll("line.domain").remove();const[a,l]=this.services.cartesianScales.getDomainScale().range();let c=+n(0)+.5;c||(c=n.range()[0]);const u=db({x0:a,x1:l,y0:c,y1:c},this.services.cartesianScales.getOrientation());Tw.appendOrSelect(o,"line.domain").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"zero-line-update",animate:t}))).attr("y1",u.y0).attr("y2",u.y1).attr("x1",u.x0).attr("x2",u.x1)}}class FS extends BS{constructor(){super(...arguments),this.type="bubble",this.renderType=Gy.SVG}getRadiusScale(t){const e=this.getOptions(),{radiusMapsTo:n}=e.bubble,r=t.data(),i=r.map((t=>t[n])).filter((t=>t)),s=Tw.getHTMLElementSize(this.services.domUtils.getMainContainer()),o=i.length>0,a=o?c(i):[1,1];return Ja().domain(a).range(o?e.bubble.radiusRange(s,r):[4,4])}styleCircles(t,e){const n=this.getOptions(),{radiusMapsTo:r}=n.bubble,i=this.getRadiusScale(t),{groupMapsTo:s}=n.data,{cartesianScales:o}=this.services,[a,l]=fb((t=>o.getDomainValue(t)),(t=>o.getRangeValue(t)),o.getOrientation());t.raise().classed("dot",!0).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-label",(t=>t[o.getRangeIdentifier(t)])).transition().call((t=>this.services.transitions.setupTransition({transition:t,name:"bubble-update-enter",animate:e}))).attr("cx",a).attr("cy",l).attr("r",(t=>i(t[r]||1))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],dataGroupName:t[s],originalClassName:"dot"}))).style("fill",(t=>{const e=this.services.cartesianScales.getDomainIdentifier(t);return this.model.getFillColor(t[s],t[e],t)})).style("stroke",(t=>{const e=this.services.cartesianScales.getDomainIdentifier(t);return this.model.getStrokeColor(t[s],t[e],t)})).attr("fill-opacity",n.bubble.fillOpacity).attr("opacity",1)}getTooltipAdditionalItems(t){const e=hb(this.getOptions(),"bubble");return[{label:hb(e,"radiusLabel"),value:t[hb(e,"radiusMapsTo")]}]}}class WS extends jO{constructor(t){super(t)}getMatchingRangeIndexForDatapoint(t){let e;for(let n=t.ranges.length-1;n>0;n--){const r=t.ranges[n];if(t.value>=r)return e=n,e}return 0}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.services.cartesianScales.getRangeIdentifier(),i=hb(e,"bullet","performanceAreaTitles");return[["Title","Group","Value","Target","Percentage","Performance"],...t.map((t=>[t.title,t[n],null===t.value?"&ndash;":t.value,null===hb(t,"marker")?"&ndash;":t.marker,null===hb(t,"marker")?"&ndash;":`${Math.floor(t[r]/t.marker*100)}%`,i[this.getMatchingRangeIndexForDatapoint(t)]]))]}}class qS extends Mw{constructor(){super(...arguments),this.type="bullet",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-simple-bar"}))).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-simple-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getComponentContainer({withinChartClip:!0}),i=this.model.getDisplayData(this.configs.groups),s=this.services.cartesianScales.getRangeScale(),o=this.services.cartesianScales.getRangeIdentifier(),[a,l]=s.range(),[,c]=s.domain();(()=>{const e=[];i.forEach((t=>{t.ranges?t.ranges.forEach(((n,r)=>{null!=n&&n<c&&e.push({datum:t,value:n,order:r+1})})):e.push({datum:t,order:1})}));const s=Tw.appendOrSelect(r,"g.range-boxes").selectAll("path.range-box").data(e,(t=>`${t[n]}-${t.order}`));s.exit().attr("opacity",0).remove(),s.enter().append("path").attr("opacity",0).merge(s).attr("class",(t=>`range-box order-${t.order}`)).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bullet-range-box-update-enter",animate:t}))).attr("d",(t=>{let e,n,r,i;return 1===t.order?(e=this.services.cartesianScales.getDomainValue(t.datum)-8,n=e+16,r=l-2,i=a+1):(e=this.services.cartesianScales.getDomainValue(t.datum)-8,n=e+16,r=this.services.cartesianScales.getRangeValue(t.value),i=l),pb({x0:e,x1:n,y0:r,y1:i},this.services.cartesianScales.getOrientation())})).attr("opacity",1)})(),(()=>{const e=Tw.appendOrSelect(r,"g.bars").selectAll("path.bar").data(i,(t=>t[n]));e.exit().attr("opacity",0).remove(),e.enter().append("path").attr("opacity",0).merge(e).classed("bar",!0).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bullet-bar-update-enter",animate:t}))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[n],originalClassName:"bar"}))).style("fill",(t=>this.model.getFillColor(t[n]))).attr("d",(t=>{const e=this.services.cartesianScales.getDomainValue(t)-4,n=e+8,r=this.services.cartesianScales.getRangeValue(0)+1,i=this.services.cartesianScales.getRangeValue(t);return pb({x0:e,x1:n,y0:r,y1:i},this.services.cartesianScales.getOrientation())})).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",(t=>t.value))})(),(()=>{const e=Tw.appendOrSelect(r,"g.markers").selectAll("path.marker").data(i.filter((t=>null!==hb(t,"marker"))),(t=>t[n]));e.exit().attr("opacity",0).remove(),e.enter().append("path").attr("opacity",0).merge(e).classed("marker",!0).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bullet-marker-update-enter",animate:t}))).attr("d",(t=>{const e=this.services.cartesianScales.getDomainValue(t)-12,n=e+24,r=this.services.cartesianScales.getRangeValue(t.marker);return pb({x0:e,x1:n,y0:r,y1:r},this.services.cartesianScales.getOrientation())})).attr("opacity",1)})(),(()=>{let e=[];i.filter((t=>null!==hb(t,"marker"))).forEach((t=>{const n=t.marker,r=t[o];e=e.concat([{datum:t,value:.25*n,barValue:r},{datum:t,value:.5*n,barValue:r},{datum:t,value:.75*n,barValue:r}])}));const s=Tw.appendOrSelect(r,"g.quartiles").selectAll("path.quartile").data(e,(t=>t[n]));s.exit().attr("opacity",0).remove(),s.enter().append("path").attr("opacity",0).merge(s).attr("class",(t=>"quartile "+(t.value<=t.barValue?"over-bar":""))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bullet-quartile-update-enter",animate:t}))).attr("d",(({datum:t,value:e})=>{let n=4;t.ranges&&-1!==t.ranges.indexOf(e)&&(n=8);const r=this.services.cartesianScales.getDomainValue(t)-n/2,i=r+n,s=this.services.cartesianScales.getRangeValue(e);return pb({x0:r,x1:i,y0:s,y1:s},this.services.cartesianScales.getOrientation())})).attr("opacity",1)})(),this.addEventListeners()}addEventListeners(){const t=this,e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("path.bar").on("mouseover",(function(i,s){const o=de(this);o.classed("hovered",!0),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOVER,{event:i,element:o,datum:s});const a=hb(e,"bullet","performanceAreaTitles"),l=t.model.getMatchingRangeIndexForDatapoint(s);t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:i,hoveredElement:o,items:[{label:e.tooltip.groupLabel||"Group",value:s[n],class:t.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:s[n]})},{label:"Value",value:s[r]},{label:"Target",value:s.marker},{label:"Percentage",value:`${Math.floor(s[r]/s.marker*100)}%`},{label:"Performance",value:a[l]}]})})).on("mousemove",(function(e,n){t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEMOVE,{event:e,element:de(this),datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Bar.BAR_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}function ZS(t){const e=c(t,(t=>t.value)),n=Ja().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(0===n[0]&&0===n[1])return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}function YS(t,e){const n=hb(e,"gradient","colors"),r=!iy(n);let i=hb(e,"pairing","option");const s=ZS(t),o=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&"mono"===o||i<1&&i>2&&"diverge"===o)&&(i=1);const a=r?n:[];if(!r){const t="diverge"===o?17:11;for(let e=1;e<t+1;e++)a.push(`fill-${o}-${i}-${e}`)}return cl().domain(s).range(a)}class XS extends BE{constructor(t){super(t),this._colorScale=void 0,this._matrix={}}getFillColor(t){return this._colorScale(t)}getCombinedData(){if(iy(this._matrix)){const t=this.getOptions(),e=this.getDisplayData();!iy(e)&&!iy(t.geoData.objects.countries)&&(t.geoData.objects.countries.geometries.forEach((t=>{this._matrix[t.properties.NAME]=t})),e.forEach((t=>{this._matrix[t.name]?this._matrix[t.name].value=t.value||null:console.warn(`Data point ${t} is missing geographical data.`)})))}return this._matrix}getTabularDataArray(){return[["Country ID","Country Name","Value"],...this.getDisplayData().map((t=>[null===t.id?"&ndash;":t.id,t.name,t.value]))]}getColorClassName(t){return`${t.originalClassName} ${this._colorScale(t.value)}`}setColorClassNames(){const t=hb(this.getOptions(),"color");this._colorScale=YS(this.getDisplayData(),t)}}function KS(t){return t}function QS(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,s=JS(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:s}:null==r?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function JS(t,e){var n=function(t){if(null==t)return KS;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(t,a){a||(e=n=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+s,u[1]=(n+=t[1])*i+o;l<c;)u[l]=t[l],++l;return u}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],s=0,o=i.length;s<o;++s)e.push(n(i[s],s));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,o)}function s(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=s(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(s);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function tT(t,e){var n={},r={},i={},s=[],o=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),s.push(i)}}return e.forEach((function(n,r){var i,s=t.arcs[n<0?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(i=e[++o],e[o]=n,e[r]=i)})),e.forEach((function(e){var n,s,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=o[0],l=o[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=l,s=r[l]){delete r[s.start];var c=s===n?n:n.concat(s);r[c.start=n.start]=i[c.end=s.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=a,s=i[a]){delete i[s.end];var u=s===n?n:s.concat(n);r[u.start=s.start]=i[u.end=n.end]=u}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=l]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||s.push([t])})),s}function eT(t){return JS(t,nT.apply(this,arguments))}function nT(t,e){var n={},r=[],i=[];function s(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function o(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],s=0;++n<r;)e=i,i=t[n],s+=e[0]*i[1]-e[1]*i[0];return Math.abs(s)}(JS(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":s(e.arcs);break;case"MultiPolygon":e.arcs.forEach(s)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=tT(t,i)).length)>1)for(var s,a,l=1,c=o(i[0]);l<r;++l)(s=o(i[l]))>c&&(a=i[0],i[0]=i[l],i[l]=a,c=s);return i})).filter((function(t){return t.length>0}))}}class rT extends NS{constructor(){super(...arguments),this.type="ruler-binned",this.renderType=Gy.SVG}showRuler(t,[e,n]){const r=this.parent,i=this.model.getOptions(),{cartesianScales:s}=this.services,o=s.getOrientation(),a=s.getRangeScale(),[l,c]=a.range(),u=s.getDomainScale(),h=u.invert(o===Yy.VERTICAL?e:n),d=Tw.appendOrSelect(r,"g.ruler").attr("aria-label","ruler"),p=Tw.appendOrSelect(d,"line.ruler-line"),f=r.selectAll("[role=graphics-symbol]").filter((t=>{if(parseFloat(xf(t,"data.x0"))<=h&&parseFloat(xf(t,"data.x1"))>=h)return!0}));if(f.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!sy(this.elementsToHighlight,f)&&this.hideRuler(),f.dispatch("mouseover"),this.elementsToHighlight=f;const t=de(f.nodes()[0]).datum(),r=parseFloat(xf(t,"data.x0")),s=parseFloat(xf(t,"data.x1")),a=this.model.getActiveDataGroupNames(),h=a.reverse().map((e=>({label:e,value:xf(t,`data.${e}`),class:this.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:e})}))).filter((t=>0!==t.value));if(h.length>0){this.services.events.dispatchEvent(jy.Tooltip.SHOW,{mousePosition:[e,n],hoveredElement:p,items:[{label:xf(i,"bins.rangeLabel")||"Range",value:`${r} – ${s}`},...h,...!0===hb(i,"tooltip","showTotal")?[{label:xf(i,"tooltip.totalLabel")||"Total",value:a.reduce(((e,n)=>e+parseFloat(xf(t,`data.${n}`))),0)}]:[]]}),d.attr("opacity",1);const f=u((r+s)/2);"horizontal"===o?p.attr("x1",c).attr("x2",l).attr("y1",f).attr("y2",f):p.attr("y1",c).attr("y2",l).attr("x1",f).attr("x2",f)}else this.hideRuler()}else this.hideRuler()}}class iT extends NS{formatTooltipData(t){return t.reverse()}}class sT extends AO{constructor(t,e,n){super(t,e,n),this.type="color-legend",this.renderType=Gy.SVG,this.gradient_id=`gradient-id-${Math.floor(99999999999*Math.random())}`,this.handleAxisCompleteEvent=()=>{const t=this.getComponentContainer(),{width:e}=Tw.getSVGElementSize(t,{useAttrs:!0}),n=hb(this.getOptions(),"data","loading");if(e>k_.color.barWidth&&!n){const e=hb(this.getOptions(),"heatmap","colorLegend","title"),{cartesianScales:n}=this.services,r=n.getMainXScale().range();if(r[0]>1&&(t.select("g.legend").attr("transform",`translate(${r[0]}, 0)`),e)){const{width:e}=Tw.getSVGElementSize(t.select("g.legend-title").select("text"),{useBBox:!0}),n=r[0]-e-9;n>1?t.select("g.legend-title").attr("transform",`translate(${n}, 0)`):(t.select("g.legend").attr("transform",`translate(${r[0]}, 16)`),t.select("g.legend-title").attr("transform",`translate(${r[0]}, 0)`))}}else t.select("g.legend-title").attr("transform","translate(0, 0)")},this.chartType=n.chartType}init(){"heatmap"===this.chartType&&this.services.events.addEventListener(jy.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}render(t=!1){const e=this.getOptions(),n=this.getComponentContainer(),{width:r}=Tw.getSVGElementSize(n,{useAttrs:!0}),i=hb(e,"color","gradient","colors"),s=hb(e,this.chartType,"colorLegend","type");let o=hb(e,"color","pairing","option");const a=hb(e,"heatmap","colorLegend","title");if(hb(this.getOptions(),"data","loading"))return void n.html("");const l=!iy(i),c=ZS(this.model.getDisplayData()),u=!(r<=k_.color.barWidth),h=u?k_.color.barWidth:r,d=Tw.appendOrSelect(n,"g.legend"),p=Tw.appendOrSelect(d,"g.legend-axis");if(a){const t=Tw.appendOrSelect(n,"g.legend-title");Tw.appendOrSelect(t,"text").text(a).attr("dy","0.7em"),d.attr("transform","translate(0, 16)")}const f=c[0]<0&&c[1]>0?"diverge":"mono";(o<1&&o>4&&"mono"===f||o<1&&o>2&&"diverge"===f)&&(o=1);let g=[];const m="diverge"===f?17:11;if(l)g=i;else for(let t=1;t<m+1;t++)g.push(s===m_.LINEAR?`stop-color-${f}-${o}-${t}`:`fill-${f}-${o}-${t}`);const v=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}(sn(c[0],c[1]),3),y=Ja().domain(c).range([0,h]),_=q(y).tickSize(0).tickValues(v);let b;switch(s){case m_.LINEAR:this.drawLinear(g,d,h);break;case m_.QUANTIZE:b=this.drawQuantize(g,f,l,d,h),y.range([b,h]);break;default:throw Error("Entered color legend type is not supported.")}p.attr("transform",`translate(0,${k_.color.axisYTranslation})`).call(_),p.select(".domain").remove(),p.select("g.tick:last-of-type text").style("text-anchor",u?"middle":"end"),p.select("g.tick:first-of-type text").style("text-anchor",u&&"choropleth"!==this.chartType?"middle":"start")}drawLinear(t,e,n){const r=100/(t.length-1);Tw.appendOrSelect(e,"linearGradient").attr("id",`${this.gradient_id}-legend`).selectAll("stop").data(t).enter().append("stop").attr("offset",((t,e)=>e*r+"%")).attr("class",((e,n)=>t[n])).attr("stop-color",(t=>t)),Tw.appendOrSelect(e,"rect").attr("width",n).attr("height",k_.color.barHeight).style("fill",`url(#${this.gradient_id}-legend)`)}drawQuantize(t,e,n,r,i){!n&&"diverge"===e&&t.splice(t.length/2,1);const s=Ha().domain(t).range([0,i]);return Tw.appendOrSelect(r,"g.quantized-rect").selectAll("rect").data(s.domain()).join("rect").attr("x",(t=>s(t))).attr("y",0).attr("width",Math.max(0,s.bandwidth()-1)).attr("height",k_.color.barHeight).attr("class",(t=>t)).attr("fill",(t=>t)),"mono"===(!n&&e)?s.bandwidth()-1:0}destroy(){"heatmap"===this.chartType&&this.services.events.removeEventListener(jy.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}}class oT extends SO{constructor(){super(...arguments),this.type="meter-title",this.renderType=Gy.SVG}render(t=!1){const e=hb(this.model.getDisplayData(),0),n=this.getOptions(),r=this.getComponentContainer(),{groupMapsTo:i}=n.data;if(hb(n,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{const t=r.selectAll("text.meter-title").data([e[i]]);t.enter().append("text").classed("meter-title",!0).merge(t).attr("x",0).attr("y","1em").text((t=>t)),t.exit().remove(),this.appendPercentage()}this.displayStatus();const s=this.getMaxTitleWidth(),o=Tw.appendOrSelect(r,"text.meter-title");s>0&&o.node().getComputedTextLength()>s&&this.truncateTitle(o,s)}displayBreakdownTitle(){const t=this.getComponentContainer(),e=this.getOptions(),n=this.model.getMaximumDomain(this.model.getDisplayData()),r=hb(e,"meter","proportional","total"),i=hb(e,"meter","proportional","unit")?hb(e,"meter","proportional","unit"):"";let s;if(n===r)s=null;else{const t=null!==r?r-n:n,o=hb(e,"meter","proportional","breakdownFormatter");s=null!==o?o({datasetsTotal:n,total:r}):`${n} ${i} used (${t} ${i} available)`}const o=t.selectAll("text.proportional-meter-title").data([s]);o.enter().append("text").classed("proportional-meter-title",!0).merge(o).attr("x",0).attr("y","1em").text((t=>t)),o.exit().remove();const a=this.getMaxTitleWidth(),l=Tw.appendOrSelect(t,"text.proportional-meter-title");a>0&&l.node().getComputedTextLength()>a&&this.truncateTitle(l,a)}displayTotal(){const t=this.getComponentContainer(),e=this.getOptions(),n=hb(e,"meter","proportional","total"),r=n?hb(e,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),i=hb(e,"meter","proportional","unit")?hb(e,"meter","proportional","unit"):"",s=hb(e,"meter","proportional","totalFormatter"),o=null!==s?s(r):`${n} ${i} total`,a=Tw.getHTMLElementSize(this.services.domUtils.getMainContainer()),l=a.width?a.width:this.parent.node().getAttribute("width"),c=t.selectAll("text.proportional-meter-total").data([o]);c.enter().append("text").classed("proportional-meter-total",!0).merge(c).attr("x",this.model.getStatus()&&"string"!=typeof l?l-U_.paddingRight:l).attr("y","1em").attr("text-anchor","end").text((t=>t)),c.exit().remove()}displayStatus(){const t=this.getComponentContainer(),e=Tw.getHTMLElementSize(this.services.domUtils.getMainContainer()),n=e.width?e.width:0,r=this.model.getStatus(),i=B_.indicatorSize/2,s=Tw.appendOrSelect(t,"g.status-indicator").attr("class",null!==r?`status-indicator status--${r}`:"").attr("transform",`translate(${n-i}, 0)`),o=r?[r]:[],a=s.selectAll("circle.status").data(o);a.enter().append("circle").merge(a).attr("class","status").attr("r",i).attr("cx",0).attr("cy",8);const l=s.selectAll("path.innerFill").data(o);l.enter().append("path").merge(l).attr("d",this.getStatusIconPathString(r)).attr("transform",`translate(-${i}, 0)`).attr("class","innerFill"),l.exit().remove(),a.exit().remove()}appendPercentage(){const t=hb(this.model.getDisplayData(),0,"value"),e=this.getComponentContainer(),n=Tw.appendOrSelect(e,"text.meter-title"),r=!0===hb(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")?[t]:[],i=e.selectAll("text.percent-value").data(r),s=N_.paddingRight;i.enter().append("text").classed("percent-value",!0).merge(i).text((t=>`${t}%`)).attr("x",+n.attr("x")+n.node().getComputedTextLength()+s).attr("y",n.attr("y")),i.exit().remove()}truncateTitle(t,e){super.truncateTitle(t,e);const n=Tw.appendOrSelect(this.parent,"tspan"),r=N_.paddingRight,i=Math.ceil(n.node().getComputedTextLength());Tw.appendOrSelect(this.parent,"text.percent-value").attr("x",+t.attr("x")+t.node().getComputedTextLength()+i+r)}getMaxTitleWidth(){const t=Tw.getHTMLElementSize(this.services.domUtils.getMainContainer()),e=hb(this.getOptions(),"meter","proportional"),n=t.width?t.width:this.parent.node().getBoundingClientRect().width;if(null!==e){const t=Tw.appendOrSelect(this.parent,"text.proportional-meter-total").node();return n-Tw.getSVGElementSize(t,{useBBox:!0}).width-U_.paddingLeft}{const t=Tw.appendOrSelect(this.parent,"text.percent-value"),e=N_.paddingRight,r=t.node().getComputedTextLength(),i=Tw.appendOrSelect(this.parent,"g.status-indicator").node();return n-r-e-(Tw.getSVGElementSize(i,{useBBox:!0}).width+B_.paddingLeft)}}getStatusIconPathString(t){switch(t){case u_.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case u_.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case u_.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class aT extends Mw{getBarWidth(){const t=this.getOptions();if(t.bars.width)return t.bars.width;const e=this.model.getDisplayData().length,n=this.services.cartesianScales.getMainXScale(),r=Tw.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!n.step){const n=hb(t,"bars","spacingFactor");return Math.min(t.bars.maxWidth,r*n/e)}return Math.min(t.bars.maxWidth,n.step()/2)}isOutsideZoomedDomain(t,e){if(this.model.getDisplayData().length<=1)return!1;const n=this.model.get("zoomDomain");if(void 0!==n){const r=this.services.cartesianScales.getDomainScale();return t<r(n[0])||e>r(n[1])}return!1}}class lT extends Mw{constructor(){super(...arguments),this.type="circle-pack",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail;this.parent.selectAll("circle.node").transition("legend-hover-circlepack").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-circlepack"}))).attr("opacity",(t=>t.data.dataGroupName===e.datum().name?1:M_.circles.fillOpacity))},this.handleLegendMouseOut=()=>{this.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-circlepack"}))).attr("opacity",1)}}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0}),{width:n,height:r}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});if(n<1||r<1)return;let i=this.model.getDisplayData();const s=this.model.hasParentNode(),o=this.model.getHierarchyLevel(),a=this.getOptions(),l=hb(a,"canvasZoom","enabled");s&&hb(i,0,"children")&&(i=hb(i,0,"children"));const c=Qo({children:i}).sum((t=>t.value)).sort(((t,e)=>e.value-t.value)),u=wa().size([n,r]).padding((t=>t.depth>=1?M_.padding.children+3:M_.padding.mainGroup+3))(c).descendants().splice(1).filter((t=>t.depth<=o)),h=e.selectAll("circle.node").data(u);h.exit().attr("width",0).attr("height",0).remove();const d=h.enter().append("circle").classed("node",!0);d.merge(h).attr("class",(t=>{const e=l&&3===o?this.getZoomClass(t):"";return this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],dataGroupName:t.data.dataGroupName,originalClassName:t.children?`node ${e}`:`node node-leaf ${e}`})})).style("fill",(t=>this.model.getFillColor(t.data.dataGroupName))).style("stroke",(t=>this.model.getFillColor(t.data.dataGroupName))).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).transition("circlepack-leaf-update-enter").call((t=>this.services.transitions.setupTransition({transition:t,name:"circlepack-leaf-update-enter"}))).attr("r",(t=>t.r)).attr("opacity",1).attr("fill-opacity",M_.circles.fillOpacity),!0===l&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,d,T_),this.setBackgroundListeners()),s||this.addLegendListeners(),this.addEventListeners()}unhighlightChildren(t){const e=t.map((t=>t.data));this.parent.selectAll("circle.node").filter((t=>e.some((e=>e===t.data))&&t.depth>1)).style("stroke",(t=>this.model.getFillColor(t.data.dataGroupName)))}highlightChildren(t){const e=t.map((t=>t.data));this.parent.selectAll("circle.node").filter((t=>e.some((e=>e===t.data))&&t.depth>1)).style("stroke",M_.circles.hover.stroke)}getZoomClass(t){return 3===this.model.getHierarchyLevel()&&this.focal&&(t.data===this.focal.data||this.focal.children.some((e=>e.data===t.data)))?"focal":"non-focal"}addLegendListeners(){const{events:t}=this.services;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}removeBackgroundListeners(){de(this.services.domUtils.getMainContainer()).on("click",(()=>null))}setBackgroundListeners(){const t=de(this.services.domUtils.getMainContainer()),e=this,n=this.parent.selectAll("circle.node");t.on("click",(()=>{e.focal=null,e.model.updateHierarchyLevel(2),t.classed("zoomed-in",!1),e.services.canvasZoom.zoomOut(n,T_)}))}getZoomIcon(){return'\n\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">\n\t\t\t<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>\n\t\t\t<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>\n\t\t</svg>'}addEventListeners(){const t=this;this.parent.selectAll("circle.node").on("mouseover",(function(e,n){const r=de(this);r.classed("hovered",!0);const i=t.model.getHierarchyLevel(),s=i>2&&!r.classed("focal"),o=hb(t.model.getOptions(),"canvasZoom","enabled");let a=!1;if(!s){let s=[],l=[],c=null;n.children?(n.depth>1&&o&&(a=!0,r.classed("clickable",!0)),s=n.children.map((e=>{if(null!==e)return"number"==typeof e.data.value?{label:e.data.name,value:e.data.value}:{label:e.data.name,labelIcon:o&&i<=2?t.getZoomIcon():null,value:e.value}})),l=[{label:xf(t.model.getOptions(),"tooltip.totalLabel")||"Total",value:n.value,bold:!0}],t.highlightChildren(n.children)):c=n.value;const u=getComputedStyle(this,null).getPropertyValue("fill");t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,items:[{color:u,label:n.data.name,labelIcon:a&&o&&i<=2?t.getZoomIcon():null,value:c},...s,...l]})}t.services.events.dispatchEvent(jy.CirclePack.CIRCLE_MOUSEOVER,{event:e,element:r,datum:n})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.CirclePack.CIRCLE_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1),n.children&&t.unhighlightChildren(n.children),t.services.events.dispatchEvent(jy.CirclePack.CIRCLE_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})})).on("click",(function(e,n){const r=de(this),i=r.classed("non-focal"),s=hb(t.model.getOptions(),"canvasZoom","enabled");if(s&&t.model.getHierarchyLevel()>2){const e=t.parent.selectAll("circle.node");de(t.services.domUtils.getMainContainer()).classed("zoomed-in",!1),t.focal=null,t.model.updateHierarchyLevel(2),t.services.canvasZoom.zoomOut(e,T_)}else if(2===n.depth&&n.children&&!i&&s){const r=t.parent.selectAll("circle.node");de(t.services.domUtils.getMainContainer()).classed("zoomed-in",!0),t.focal=n,t.model.updateHierarchyLevel(3),t.services.canvasZoom.zoomIn(n,r,T_),e.stopPropagation()}t.services.events.dispatchEvent(jy.CirclePack.CIRCLE_CLICK,{event:e,element:r,datum:n})}))}destroy(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()}}function cT(t,e){const n=un(this._current,t);return t=>(this._current=n(t),e(this._current))}class uT extends Mw{constructor(){super(...arguments),this.type="pie",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-bar"}))).attr("opacity",(t=>t.data[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return j_}render(t=!0){const e=this,n=this.getComponentContainer(),r=this.getOptions(),{groupMapsTo:i}=r.data,{valueMapsTo:s}=r.pie,o=this.model.getDisplayData().filter((t=>t[s]>0)),a=this.computeRadius();this.arc=Vu().innerRadius(this.getInnerRadius()).outerRadius(a),this.hoverArc=Vu().innerRadius(this.getInnerRadius()).outerRadius(a+z_.outerRadiusOffset);const l=function(){var t=Yu,e=Zu,n=null,r=_u(0),i=_u(Du),s=_u(0);function o(o){var a,l,c,u,h,d=(o=Hu(o)).length,p=0,f=new Array(d),g=new Array(d),m=+r.apply(this,arguments),v=Math.min(Du,Math.max(-Du,i.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,s.apply(this,arguments)),_=y*(v<0?-1:1);for(a=0;a<d;++a)(h=g[f[a]=a]=+t(o[a],a,o))>0&&(p+=h);for(null!=e?f.sort((function(t,n){return e(g[t],g[n])})):null!=n&&f.sort((function(t,e){return n(o[t],o[e])})),a=0,c=p?(v-d*_)/p:0;a<d;++a,m=u)l=f[a],u=m+((h=g[l])>0?h*c:0)+_,g[l]={data:o[l],index:a,value:h,startAngle:m,endAngle:u,padAngle:y};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:_u(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:_u(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:_u(+t),o):i},o.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:_u(+t),o):s},o}().value((t=>t[s])).sort(hb(r,"pie","sortFunction")).padAngle(G_)(o),c=Tw.appendOrSelect(n,"g.slices").attr("role",CO.GROUP).attr("data-name","slices").selectAll("path.slice").data(l,(t=>t.data[i]));c.exit().attr("opacity",0).remove(),c.enter().append("path").classed("slice",!0).attr("opacity",0).merge(c).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t.data[i],originalClassName:"slice"}))).style("fill",(t=>e.model.getFillColor(t.data[i]))).attr("d",this.arc).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"pie_slice_enter_update",animate:t}))).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",(t=>`${t[s]}, ${lb(t.data[s],o,s)+"%"}`)).attrTween("d",(function(t){return cT.bind(this)(t,e.arc)}));const u=r.pie.labels.enabled,h=u?l.filter((t=>t.data[s]>0)):[],d=Tw.appendOrSelect(n,"g.labels").attr("role",CO.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(h,(t=>t.data[i]));d.exit().attr("opacity",0).remove();const p=d.enter().append("text").classed("pie-label",!0),f=[];p.merge(d).style("text-anchor","middle").text((t=>r.pie.labels.formatter?r.pie.labels.formatter({...t,percentageValue:lb(t.data[s],o,s,!0)}):lb(t.data[s],o,s)+"%")).datum((function(t){const e=a+7,n=(t.endAngle-t.startAngle)/2+t.startAngle,r=n/Math.PI*180,i=this.getComputedTextLength();return t.textOffsetX=i/2,t.textOffsetY=r>90&&r<270?10:0,t.xPosition=(t.textOffsetX+e)*Math.sin(n),t.yPosition=(t.textOffsetY+e)*-Math.cos(n),t})).attr("transform",(function(t,e){const n=h.length,r=(t.endAngle-t.startAngle)*(180/Math.PI);if(e>=n-2&&r<Z_.minSliceDegree){let e,r;return t.index===n-1?(e=t.xPosition+Z_.offsetX+Z_.textMargin+t.textOffsetX,r=t.yPosition-Z_.offsetY,t.direction=i_.RIGHT,f.push(t)):(e=t.xPosition-Z_.offsetX-t.textOffsetX-Z_.textMargin,r=t.yPosition-Z_.offsetY,t.direction=i_.LEFT,f.push(t)),`translate(${e}, ${r})`}return`translate(${t.xPosition}, ${t.yPosition})`})),this.renderCallouts(f);const g=hb(r,"donut")?"donut":"pie",m=hb(r,g,"alignment"),{width:v}=Tw.getSVGElementSize(this.getParent(),{useAttrs:!0}),y=u?W_:0;let _=a+(u?F_:0);m===Qy.CENTER?_=v/2:m===Qy.RIGHT&&(_=v-a-F_);let b=a+y;f.length>0&&(b+=q_),n.attr("x",_+7).attr("y",b),this.addEventListeners()}renderCallouts(t){const e=Tw.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",CO.GROUP).attr("data-name","callouts"),n=e.selectAll("g.callout").data(t);n.exit().remove();const r=n.enter().append("g").classed("callout",!0).attr("role",CO.GROUP).attr("aria-roledescription","label callout");r.merge(n).datum((function(t){const{xPosition:e,yPosition:n,direction:r}=t;return r===i_.RIGHT?(t.startPos={x:e,y:n+t.textOffsetY},t.endPos={x:e+Z_.offsetX,y:n-Z_.offsetY+t.textOffsetY},t.intersectPointX=t.endPos.x-Z_.horizontalLineLength):(t.startPos={x:e,y:n+t.textOffsetY},t.endPos={x:e-Z_.offsetX,y:n-Z_.offsetY+t.textOffsetY},t.intersectPointX=t.endPos.x+Z_.horizontalLineLength),t})),r.append("line").classed("vertical-line",!0).merge(e.selectAll("line.vertical-line")).datum((function(){return de(this.parentNode).datum()})).style("stroke-width","1px").attr("x1",(t=>t.startPos.x)).attr("y1",(t=>t.startPos.y)).attr("x2",(t=>t.intersectPointX)).attr("y2",(t=>t.endPos.y)),r.append("line").classed("horizontal-line",!0).merge(e.selectAll("line.horizontal-line")).datum((function(){return de(this.parentNode).datum()})).style("stroke-width","1px").attr("x1",(t=>t.intersectPointX)).attr("y1",(t=>t.endPos.y)).attr("x2",(t=>t.endPos.x)).attr("y2",(t=>t.endPos.y))}addEventListeners(){const t=this;this.parent.selectAll("path.slice").on("mouseover",(function(e,n){const r=de(this);r.classed("hovered",!0).transition("pie_slice_mouseover").call((e=>t.services.transitions.setupTransition({transition:e,name:"pie_slice_mouseover"}))).attr("d",t.hoverArc),t.services.events.dispatchEvent(jy.Pie.SLICE_MOUSEOVER,{event:e,element:de(this),datum:n});const{groupMapsTo:i}=t.getOptions().data,{valueMapsTo:s}=t.getOptions().pie;t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,items:[{label:n.data[i],value:n.data[s]}]})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Pie.SLICE_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Pie.SLICE_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1).transition("pie_slice_mouseout").call((e=>t.services.transitions.setupTransition({transition:e,name:"pie_slice_mouseout"}))).attr("d",t.arc),t.services.events.dispatchEvent(jy.Pie.SLICE_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}computeRadius(){const{width:t,height:e}=Tw.getSVGElementSize(this.parent,{useAttrs:!0}),n=this.getOptions(),r=Math.min(t,e)/2;return n.pie.labels.enabled?r+H_:r}}class hT extends uT{constructor(){super(...arguments),this.type="donut",this.renderType=Gy.SVG}render(t=!0){super.render(t);const e=this;if(this.model.isDataEmpty())return void this.getComponentContainer().select("g.center").remove();const n=Tw.appendOrSelect(this.getComponentContainer(),"g.center"),r=this.getOptions(),i=this.computeRadius(),s=hb(r,"donut","center","label");Tw.appendOrSelect(n,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",(()=>null===s||""===s?"central":"initial")).style("font-size",(()=>r.donut.center.numberFontSize(i))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"donut-figure-enter-update",animate:t}))).tween("text",(function(){return e.centerNumberTween(de(this))})),null!==s&&""!==s&&Tw.appendOrSelect(n,"text.donut-title").attr("text-anchor","middle").style("font-size",(()=>r.donut.center.titleFontSize(i))).attr("y",r.donut.center.titleYPosition(i)).text(s)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(t){const e=this.getOptions();let n=hb(e,"donut","center","number");null===n&&(n=this.model.getDisplayData().reduce(((t,n)=>t+n[e.pie.valueMapsTo]),0));const r=parseInt(t.text().replace(/[, ]+/g,""),10)||0;let i;i=r%1==0&&n%1==0?hn:sn;const s=i(r,n);return n=>{const{numberFormatter:r}=e.donut.center;t.text(r(s(n)))}}}const dT="4,10 8,6 12,10",pT="12,6 8,10 4,6";class fT extends Mw{constructor(){super(...arguments),this.type="gauge",this.renderType=Gy.SVG}getValue(){var t;return(null==(t=this.model.getData().find((t=>"value"===t.group)))?void 0:t.value)??null}getValueRatio(){return Cg(this.getValue(),0,100)/100}getDelta(){var t;return(null==(t=this.model.getData().find((t=>"delta"===t.group)))?void 0:t.value)??null}getArcRatio(){const t=this.getOptions();return hb(t,"gauge","type")===l_.FULL?1:.5}getArcSize(){return this.getArcRatio()*Math.PI*2}getStartAngle(){const t=this.getArcSize();return t===2*Math.PI?0:-t/2}getArrow(t){const e=this.getOptions();switch(hb(e,"gauge","deltaArrow","direction")){case c_.UP:return dT;case c_.DOWN:return pT;default:return t>0?dT:pT}}render(t=!0){const e=this.getComponentContainer().attr("width","100%").attr("height","100%"),n=this.getOptions(),r=this.getValue(),i=this.getValueRatio(),s=this.getArcSize(),o=this.getStartAngle(),a=o+i*s,l=o+s,c=this.computeRadius(),u=this.getInnerRadius();this.backgroundArc=Vu().innerRadius(u).outerRadius(c).startAngle(a).endAngle(l),this.arc=Vu().innerRadius(u).outerRadius(c).startAngle(o).endAngle(a),Tw.appendOrSelect(e,"path.arc-background").attr("d",this.backgroundArc);const h=e.selectAll("path.arc-foreground").data([r]);h.enter().append("path").merge(h).attr("class",this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",(()=>hb(this.getOptions(),"color","scale","value"))).attr("d",this.arc).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",(t=>t)),this.drawValueNumber(),this.drawDelta(),h.exit().remove();const d=hb(n,"gauge","alignment"),{width:p}=Tw.getSVGElementSize(this.getParent(),{useAttrs:!0});let f=c;d===Qy.CENTER?f=p/2:d===Qy.RIGHT&&(f=p-c),e.attr("x",f).attr("y",c),this.addEventListeners()}drawValueNumber(){const t=this.getComponentContainer(),e=this.getOptions(),n=hb(e,"gauge","type"),r=this.getValue(),i=this.getDelta(),s=this.computeRadius(),o=hb(e,"gauge","valueFontSize"),a=hb(e,"gauge","deltaFontSize"),l=hb(e,"gauge","numberSpacing"),c=hb(e,"gauge","showPercentageSymbol");let u=0;n!==l_.FULL||i?n===l_.SEMI&&i&&(u=-(a(s)+l)):u=a(s);const h=Tw.appendOrSelect(t,"g.gauge-numbers").attr("transform",`translate(0, ${u})`),d=o(s),p=Tw.appendOrSelect(h,"g.gauge-value-number"),f=hb(e,"gauge","numberFormatter"),g=p.selectAll("text.gauge-value-number").data([r]);g.enter().append("text").attr("class","gauge-value-number").merge(g).style("font-size",`${d}px`).attr("text-anchor","middle").text((t=>f(t)));const{width:m}=Tw.getSVGElementSize(Tw.appendOrSelect(t,"text.gauge-value-number"),{useBBox:!0}),v=d/2,y=c?"%":"",_=Tw.appendOrSelect(p,"text.gauge-value-symbol").style("font-size",`${v}px`).attr("x",m/2).text(y),{width:b,height:x}=Tw.getSVGElementSize(_,{useBBox:!0});_.attr("y",`-${x/2}px`),p.attr("transform",`translate(-${b/2}, 0)`)}drawDelta(){const t=this,e=this.getComponentContainer(),n=this.getOptions(),r=this.getDelta();if(r){const i=this.computeRadius(),s=r?hb(n,"gauge","deltaFontSize"):()=>0,o=r?hb(n,"gauge","numberFormatter"):()=>null,a=hb(n,"gauge","deltaArrow","size"),l=hb(n,"gauge","numberSpacing"),c=hb(n,"gauge","showPercentageSymbol"),u=Tw.appendOrSelect(e,"g.gauge-numbers"),h=Tw.appendOrSelect(u,"g.gauge-delta").attr("transform",`translate(0, ${s(i)+l})`),d=Tw.appendOrSelect(h,"text.gauge-delta-number"),p=c?"%":"";d.data(null===r?[]:[r]),d.enter().append("text").classed("gauge-delta-number",!0).merge(d).attr("text-anchor","middle").style("font-size",`${s(i)}px`).text((t=>`${o(t)}${p}`));const{width:f}=Tw.getSVGElementSize(Tw.appendOrSelect(e,".gauge-delta-number"),{useBBox:!0}),g=hb(n,"gauge","deltaArrow","enabled"),m=h.selectAll("svg.gauge-delta-arrow").data(null!==r&&g?[r]:[]);m.enter().append("svg").merge(m).attr("class","gauge-delta-arrow").attr("x",-a(i)-f/2).attr("y",-a(i)/2-.35*s(i)).attr("width",a(i)).attr("height",a(i)).attr("viewBox","0 0 16 16").each((function(){const e=de(this);Tw.appendOrSelect(e,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");const i=hb(n,"gauge","status");Tw.appendOrSelect(e,"polygon.gauge-delta-arrow").attr("class",null!==i?`gauge-delta-arrow status--${i}`:"").attr("points",t.getArrow(r))})),m.exit().remove(),d.exit().remove()}else{const t=e.select("g.gauge-delta");t.empty()||t.remove()}}getInnerRadius(){return this.computeRadius()-hb(this.getOptions(),"gauge","arcWidth")}addEventListeners(){const t=this;this.parent.selectAll("path.arc-foreground").on("mouseover",(function(e,n){t.services.events.dispatchEvent(jy.Gauge.ARC_MOUSEOVER,{event:e,element:de(this),datum:n})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Gauge.ARC_MOUSEMOVE,{event:e,element:r,datum:n})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Gauge.ARC_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Gauge.ARC_MOUSEOUT,{event:e,element:r,datum:n})}))}computeRadius(){const t=this.getOptions(),e=hb(t,"gauge","type"),{width:n,height:r}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});return e===l_.SEMI?Math.min(n/2,r):Math.min(n/2,r/2)}}class gT extends aT{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=Gy.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-bar"}))).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.model.getDisplayData(this.configs.groups),n=this.getOptions(),{groupMapsTo:r}=n.data;this.setGroupScale();const i=this.getComponentContainer({withinChartClip:!0}),s=fy(e.map((t=>{const e=this.services.cartesianScales.getDomainIdentifier(t);return t[e]&&"function"==typeof t[e].toString?t[e].toString():t[e]}))),o=i.selectAll("g.bars").data(s,(t=>t));o.exit().attr("opacity",0).remove();const a=o.enter().append("g").classed("bars",!0).attr("role",CO.GROUP).attr("data-name","bars").merge(o);a.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bar-group-update-enter",animate:t}))).attr("transform",(t=>{const e=this.services.cartesianScales.getDomainValue(t)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===Yy.VERTICAL?`translate(${e}, 0)`:`translate(0, ${e})`}));const l=a.selectAll("path.bar").data((t=>this.getDataCorrespondingToLabel(t)),(t=>t[r]));l.exit().attr("opacity",0).remove(),l.enter().append("path").attr("opacity",0).merge(l).classed("bar",!0).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bar-update-enter",animate:t}))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[r],originalClassName:"bar"}))).style("fill",(t=>this.model.getFillColor(t[r]))).attr("d",(t=>{const e=this.groupScale(t[r]),n=this.getBarWidth(),i=e,s=e+n,o=this.services.cartesianScales.getRangeAxisPosition({datum:t}),a=this.services.cartesianScales.getValueThroughAxisPosition(o,0),l=this.services.cartesianScales.getRangeValue(t),c=this.services.cartesianScales.getDomainValue(t)-n/2,u=c+n;if(!this.isOutsideZoomedDomain(c,u))return pb({x0:i,x1:s,y0:a,y1:l},this.services.cartesianScales.getOrientation())})).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",(t=>t.value)),this.addEventListeners()}addEventListeners(){const t=this;this.parent.selectAll("path.bar").on("mouseover",(function(e,n){const r=de(this);r.classed("hovered",!0),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOVER,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,data:[n]})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Bar.BAR_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(t){return this.model.getDisplayData(this.configs.groups).filter((e=>e[this.services.cartesianScales.getDomainIdentifier(e)].toString()===t))}getGroupWidth(){const t=this.model.getGroupedData(this.configs.groups),e=this.getTotalGroupPadding();return this.getBarWidth()*t.length+e}getDomainScaleStep(){const t=this.services.cartesianScales.getDomainScale(),e=this.model.getGroupedData(this.configs.groups);let n=this.defaultStepFactor;if("function"==typeof t.step)n=t.step();else if(e.length>0){const r=e.find((t=>{var e;return(null==(e=t.data)?void 0:e.length)>1}));if(r){const e=this.services.cartesianScales.getDomainIdentifier(r.data[0]);n=Math.abs(t(r.data[1][e])-t(r.data[0][e]))}}return n}getTotalGroupPadding(){const t=this.model.getGroupedData(this.configs.groups);return 1===t.length?0:Math.min(5,this.getDomainScaleStep()/this.defaultStepFactor*5)*(t.length-1)}getBarWidth(){const t=this.getOptions(),e=hb(t,"bars","width"),n=hb(t,"bars","maxWidth");if(null!==e&&(null===n||e<=n))return e;const r=this.model.getGroupedData(this.configs.groups).length,i=this.getTotalGroupPadding();return Math.min(n,(this.getDomainScaleStep()-i)/r)}setGroupScale(){const t=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Ha().domain(t).rangeRound([0,this.getGroupWidth()])}}class mT extends Mw{constructor(){super(...arguments),this.type="heatmap",this.renderType=Gy.SVG,this.matrix={},this.xBandwidth=0,this.yBandwidth=0,this.translationUnits={x:0,y:0},this.handleAxisOnHover=t=>{const{detail:e}=t,{datum:n}=e,r=this.model.getUniqueRanges(),i=this.model.getUniqueDomain(),s=this.services.cartesianScales.getDomainLabel(),o=this.services.cartesianScales.getRangeLabel(),a=this.services.cartesianScales.getMainXScale(),l=this.services.cartesianScales.getMainYScale();let c="",u=null,h=null,d=null;void 0!==this.matrix[n]?(c=s,r.forEach((t=>{if("number"==typeof this.matrix[n][t].value){const e=this.matrix[n][t].value;if(null===u)return u=e,h=e,void(d=e);u+=e,h=e<h?e:h,d=e>d?e:d}}))):(c=o,i.forEach((t=>{if("number"==typeof this.matrix[t][n].value){const e=this.matrix[t][n].value;if(null===u)return u=e,h=e,void(d=e);u+=e,h=e<h?e:h,d=e>d?e:d}}))),void 0!==a(n)?this.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${a(n)}, ${C(l.range())})`):void 0!==l(n)&&this.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${C(a.range())},${l(n)})`),this.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e.event,hoveredElement:de(t.detail.element),items:[{label:c,value:n,bold:!0},{label:"Min",value:null!==h?h:"-"},{label:"Max",value:null!==d?d:"-"},{label:"Average",value:null!==u?u/i.length:"-"}]})},this.handleAxisMouseOut=t=>{this.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),this.services.events.dispatchEvent(jy.Tooltip.HIDE,{event:t})}}init(){const t=this.services.events;t.addEventListener(jy.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),t.addEventListener(jy.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),t.addEventListener(jy.Axis.LABEL_FOCUS,this.handleAxisOnHover),t.addEventListener(jy.Axis.LABEL_BLUR,this.handleAxisMouseOut)}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0});e.lower();const{cartesianScales:n}=this.services;if(this.matrix=this.model.getMatrix(),e.html(""),hb(this.getOptions(),"data","loading"))return;const r=n.getMainXScale(),i=n.getMainYScale(),s=n.getDomainIdentifier(),o=n.getRangeIdentifier(),a=this.model.getUniqueDomain(),l=this.model.getUniqueRanges(),c=this.model.getMatrixAsArray(),u=r.range(),h=i.range();this.xBandwidth=Math.abs((u[1]-u[0])/a.length),this.yBandwidth=Math.abs((h[1]-h[0])/l.length);const d=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");e.append("defs").append("pattern").attr("id",d).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);const p=e.selectAll().data(c).enter().append("g").attr("class",(t=>`heat-${t.index}`)).classed("cell",!0).attr("transform",(t=>`translate(${r(t[s])}, ${i(t[o])})`)).append("rect").attr("class",(t=>this.model.getColorClassName({value:t.value,originalClassName:`heat-${t.index}`}))).classed("heat",!0).classed("null-state",(t=>-1===t.index||null===t.value)).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",(t=>-1===t.index||null===t.value?`url(#${d})`:this.model.getFillColor(Number(t.value)))).attr("aria-label",(t=>t.value));this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(h[1]-h[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(u[1]-u[0]),this.yBandwidth),this.determineDividerStatus()&&(p.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}createOuterBox(t,e,n){const r=Tw.appendOrSelect(this.parent,t).classed("shadows",!0).classed("highlighter-hidden",!0);Tw.appendOrSelect(r,"line.top").attr("x1",-1).attr("x2",e+1),Tw.appendOrSelect(r,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",n+1),Tw.appendOrSelect(r,"line.down").attr("x1",-1).attr("x2",e+1).attr("y1",n).attr("y2",n),Tw.appendOrSelect(r,"line.right").attr("x1",e).attr("x2",e).attr("y1",-1).attr("y2",n+1)}determineDividerStatus(){const t=hb(this.getOptions(),"heatmap","divider","state");return t!==v_.OFF&&(t===v_.AUTO&&J_<=this.xBandwidth&&J_<=this.yBandwidth||t===v_.ON)}addEventListener(){const t=this,{cartesianScales:e}=this.services,n=xf(this.getOptions(),"tooltip.totalLabel"),r=e.getDomainIdentifier(),i=e.getRangeIdentifier(),s=e.getDomainLabel(),o=e.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",(function(e,a){const l=de(this),c=l.select("rect.heat");if(!c.classed("null-state")){const u=ab(l.attr("transform"));t.parent.select("g.cell-highlight").attr("transform",`translate(${u.x+t.translationUnits.x}, ${u.y+t.translationUnits.y})`).classed("highlighter-hidden",!1),t.services.events.dispatchEvent(jy.Heatmap.HEATMAP_MOUSEOVER,{event:e,element:c,datum:a}),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,items:[{label:s,value:a[r]},{label:o,value:a[i]},{label:n||"Total",value:a.value,color:c.style("fill")}]})}})).on("mousemove",(function(e,n){t.services.events.dispatchEvent(jy.Heatmap.HEATMAP_MOUSEMOVE,{event:e,element:de(this),datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Heatmap.HEATMAP_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this).select("rect.heat"),i=r.classed("null-state");t.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),i||(t.services.events.dispatchEvent(jy.Heatmap.HEATMAP_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{event:e,hoveredElement:r}))}))}destroy(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleAxisOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)}}class vT extends Mw{constructor(){super(...arguments),this.type="histogram",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-bar"}))).attr("opacity",(t=>t[r]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.getComponentContainer(),n=this.model.getOptions(),{groupIdentifier:r}=n,{groupMapsTo:i}=n.data,s=this.model.getBinnedStackedData(),o=this.services.cartesianScales.getMainXScale(),a=e.selectAll("g.bars").data(s,(t=>xf(t,`0.${i}`)));a.exit().attr("opacity",0).remove(),a.enter().append("g").classed("bars",!0).attr("role",CO.GROUP);const l=e.selectAll("g.bars").selectAll("path.bar").data((t=>t));l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).attr(r,((t,e)=>e)).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"histogram-bar-update-enter",animate:t}))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[i],originalClassName:"bar"}))).style("fill",(t=>this.model.getFillColor(t[i]))).attr("d",(t=>{const e=xf(t,"data");if(!e)return;const r=o(e.x1)-o(e.x0)-1,i=this.services.cartesianScales.getDomainValue(e.x0),s=i+r,a=this.services.cartesianScales.getRangeValue(t[0]);let l=this.services.cartesianScales.getRangeValue(t[1]);return Math.abs(l-a)>0&&Math.abs(l-a)>n.bars.dividerSize&&(this.services.cartesianScales.getOrientation()===Yy.VERTICAL?l+=1:l-=1),pb({x0:i,x1:s,y0:a,y1:l},this.services.cartesianScales.getOrientation())})).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",(t=>hb(t,"data",t[i]))),this.addEventListeners()}addEventListeners(){const t=this.model.getOptions(),{groupMapsTo:e}=t.data,n=this;this.parent.selectAll("path.bar").on("mouseover",(function(r,i){const s=de(this);s.classed("hovered",!0);const o=parseFloat(xf(i,"data.x0")),a=parseFloat(xf(i,"data.x1")),l=n.services.cartesianScales.getRangeAxisPosition(),c=n.services.cartesianScales.getScaleLabel(l);n.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:r,hoveredElement:s,items:[{label:xf(t,"bins.rangeLabel")||"Range",value:`${o} – ${a}`},{label:t.tooltip.groupLabel||"Group",value:i[e],class:n.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:i[e]})},{label:c,value:xf(i,`data.${i[e]}`)}]})})).on("mousemove",(function(t){n.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("mouseout",(function(){de(this).classed("hovered",!1),n.services.events.dispatchEvent(jy.Tooltip.HIDE)}))}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class yT extends BS{constructor(){super(...arguments),this.type="lollipop",this.renderType=Gy.SVG,this.handleScatterOnHover=t=>{const e=t.detail,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("line.line").attr("stroke-width",(t=>t[r]!==e.datum[r]?P_.unselected:P_.selected))},this.handleScatterOnMouseOut=()=>{this.parent.selectAll("line.line").attr("stroke-width",P_.unselected)},this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("line.line").transition("legend-hover-line").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-line"}))).attr("opacity",(t=>t[r]!==e.datum().name?I_.unselected:I_.selected))},this.handleLegendMouseOut=()=>{this.parent.selectAll("line.line").transition("legend-mouseout-line").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-line"}))).attr("opacity",I_.selected)}}init(){const{events:t}=this.services;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.getComponentContainer({withinChartClip:!0}),n=this.model.getOptions(),{groupMapsTo:r}=n.data,{cartesianScales:i}=this.services,s=i.getMainXScale(),o=i.getMainYScale(),a=i.getDomainIdentifier(),l=i.getOrientation(),[c,u]=fb((t=>i.getDomainValue(t)),(t=>i.getRangeValue(t)),l),h=e.selectAll("line.line").data(this.getScatterData(),(t=>`${t[r]}-${t[a]}`));h.exit().attr("opacity",0).remove();const d=h.enter().append("line").attr("opacity",0).merge(h).classed("line",!0).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.STROKE],dataGroupName:t[r],originalClassName:"line"}))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"lollipop-line-update-enter",animate:t}))).style("stroke",(t=>this.model.getFillColor(t[r],t[a],t))).attr("opacity",1);l===Yy.HORIZONTAL?d.attr("y1",u).attr("y2",u).attr("x1",s.range()[0]).attr("x2",(t=>c(t)-n.points.radius)):d.attr("x1",c).attr("x2",c).attr("y1",o.range()[0]).attr("y2",(t=>u(t)+n.points.radius)),this.addScatterPointEventListeners()}addScatterPointEventListeners(){this.services.events.addEventListener(jy.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(jy.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}destroy(){const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),t.removeEventListener(jy.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),t.removeEventListener(jy.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}}class _T extends Mw{constructor(){super(...arguments),this.type="meter",this.renderType=Gy.SVG}getStackedBounds(t,e){let n=0;return t.map(((t,r)=>0!==r?(n+=e(t.value),{...t,width:Math.abs(e(t.value)-$_),x:n-e(t.value)}):(n=e(t.value),{...t,width:Math.abs(e(t.value)-$_),x:0})))}render(t=!0){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=hb(r,"meter","proportional"),s=this.model.getDisplayData(),o=this.model.getStatus(),{width:a}=Tw.getSVGElementSize(n,{useAttrs:!0}),{groupMapsTo:l}=r.data;let c;if(null===hb(r,"meter","proportional"))c=100;else{const t=hb(r,"meter","proportional","total");c=t||this.model.getMaximumDomain(this.model.getDisplayData())}const u=Ja().domain([0,c]).range([0,a]),h=this.getStackedBounds(s,u),d=hb(r,"meter","height");Tw.appendOrSelect(n,"rect.container").attr("x",0).attr("y",0).attr("width",a).attr("height",d||(i?V_.proportional:V_.default)),Tw.appendOrSelect(n,"line.rangeIndicator").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",d||(i?V_.proportional:V_.default));const p=n.selectAll("rect.value").data(h),f=null==o||e.model.isUserProvidedColorScaleValid()||i?"value":`value status--${o}`;p.enter().append("rect").classed("value",!0).merge(p).attr("x",(t=>t.x)).attr("y",0).attr("height",(()=>d||(i?V_.proportional:V_.default))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[l],originalClassName:f}))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"meter-bar-update",animate:t}))).attr("width",(t=>t.value>c?u(c):t.width)).style("fill",(t=>e.model.getFillColor(t[l]))).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",(t=>t.value)),p.exit().remove();const g=hb(r,"meter","peak");let m=g;null!==g&&(g>c?m=c:g<s[0].value&&(m=s[0].value>c?c:s[0].value));const v=n.selectAll("line.peak").data(null==m?[]:[m]);v.enter().append("line").classed("peak",!0).merge(v).attr("y1",0).attr("y2",(()=>d||(i?V_.proportional:V_.default))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"peak-line-update",animate:t}))).attr("x1",(t=>u(t))).attr("x2",(t=>u(t))).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",(t=>t)),v.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this,r=hb(t,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",(function(t,i){const s=de(this);n.services.events.dispatchEvent(jy.Meter.METER_MOUSEOVER,{event:t,element:s,datum:i}),r&&(s.classed("hovered",!0),n.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:t,hoveredElement:s,items:[{label:i[e],value:i.value}]}))})).on("mousemove",(function(t,e){const i=de(this);n.services.events.dispatchEvent(jy.Meter.METER_MOUSEMOVE,{event:t,element:i,datum:e}),r&&n.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t,e){n.services.events.dispatchEvent(jy.Meter.METER_CLICK,{event:t,element:de(this),datum:e})})).on("mouseout",(function(t,e){const i=de(this);n.services.events.dispatchEvent(jy.Meter.METER_MOUSEOUT,{event:t,element:i,datum:e}),r&&(i.classed("hovered",!1),n.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:i}))}))}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}function bT(t){const e=function(t,e){return(t%e+e)%e}(ET(t),360);return xT(e,[0,10])||xT(e,[350,0])?{textAnchor:o_.START,dominantBaseline:a_.MIDDLE}:xT(e,[10,80])?{textAnchor:o_.START,dominantBaseline:a_.HANGING}:xT(e,[80,100])?{textAnchor:o_.MIDDLE,dominantBaseline:a_.HANGING}:xT(e,[100,170])?{textAnchor:o_.END,dominantBaseline:a_.HANGING}:xT(e,[170,190])?{textAnchor:o_.END,dominantBaseline:a_.MIDDLE}:xT(e,[190,260])?{textAnchor:o_.END,dominantBaseline:a_.BASELINE}:xT(e,[260,280])?{textAnchor:o_.MIDDLE,dominantBaseline:a_.BASELINE}:{textAnchor:o_.START,dominantBaseline:a_.BASELINE}}function xT(t,[e,n]){return t>=e&&t<=n}function ET(t){return t*(180/Math.PI)}function wT(t,e,n={x:0,y:0}){const r=e*Math.cos(t)+n.x,i=e*Math.sin(t)+n.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}class OT extends Mw{constructor(){super(...arguments),this.type="radar",this.renderType=Gy.SVG,this.getLabelDimensions=t=>{const e=Tw.appendOrSelect(this.getComponentContainer(),"g.tmp-tick"),n=Tw.appendOrSelect(e,"text").text(t),{width:r,height:i}=Tw.getSVGElementSize(n.node(),{useBBox:!0});return e.remove(),{width:r,height:i}},this.normalizeFlatData=t=>{const e=this.getOptions(),{angle:n,value:r}=hb(e,"radar","axes"),i=hb(e,"data","groupMapsTo"),s=function(t,e){return Sf(Qv(t,e),1/0)}(this.uniqueKeys.map((t=>this.uniqueGroups.map((e=>({[n]:t,[i]:e,[r]:null}))))));return ay(s,t)},this.normalizeGroupedData=t=>{const e=this.getOptions(),{angle:n,value:r}=hb(e,"radar","axes"),i=hb(e,"data","groupMapsTo");return t.map((({name:t,data:e})=>{const s=this.uniqueKeys.map((e=>({[i]:t,[n]:e,[r]:null})));return{name:t,data:ay(s,e)}}))},this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail;this.parent.selectAll("g.blobs path").transition("legend-hover-blob").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-blob"}))).style("fill-opacity",(t=>t.name!==e.datum().name?Y_.opacity.unselected:Y_.opacity.selected)).style("stroke-opacity",(t=>t.name!==e.datum().name?Y_.opacity.unselected:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-blob"}))).style("fill-opacity",Y_.opacity.selected).style("stroke-opacity",1)}}init(){const{events:t}=this.services;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this.getComponentContainer(),{width:n,height:r}=Tw.getSVGElementSize(e,{useAttrs:!0}),i=this.model.getData(),s=this.model.getGroupedData(),o=this.getOptions(),a=hb(o,"data","groupMapsTo"),l=hb(o,"radar","axes","value"),{angle:u,value:h}=hb(o,"radar","axes"),{xLabelPadding:d,yLabelPadding:p,yTicksNumber:f,minRange:g,xAxisRectHeight:m}=Y_;this.uniqueKeys=Array.from(new Set(i.map((t=>t[u])))),this.uniqueGroups=Array.from(new Set(i.map((t=>t[a])))),this.fullDataNormalized=this.normalizeFlatData(i),this.groupedDataNormalized=this.normalizeGroupedData(s);const v=2*(this.getLabelDimensions(this.uniqueKeys[0]).height+p),y=(Math.min(n,r)-v)/2;if(y<=0)return;const _=Ha().domain(this.fullDataNormalized.map((t=>t[u]))).range([0,2*Math.PI].map((t=>t-Math.PI/2))),b=C(this.fullDataNormalized.map((t=>t[h]))),x=Ja().domain([b>=0?0:b,M(this.fullDataNormalized.map((t=>t[h])))]).range([g,y]).nice(f),E=x.ticks(f),w=t=>this.model.getFillColor(t),O=Ju().angle((t=>_(t[u])+Math.PI/2)).radius((t=>x(t[h]))).curve(Dh),S={x:M(this.uniqueKeys.map((t=>this.getLabelDimensions(t).width+function(t,e){return e*Math.sin(t-Math.PI/2)}(_(t),y))))+d,y:r/2},T=Tw.appendOrSelect(e,"g.y-axes").attr("role",CO.GROUP).selectAll("path").data(E,(t=>t)),A=t=>this.uniqueKeys.map((e=>({[u]:e,[h]:t})));T.join((e=>e.append("path").attr("opacity",0).attr("transform",`translate(${S.x}, ${S.y})`).attr("fill","none").call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_axes_enter",animate:t}))).attr("opacity",1).attr("d",(t=>O(A(t))))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_axes_update",animate:t}))).attr("opacity",1).attr("transform",`translate(${S.x}, ${S.y})`).attr("d",(t=>O(A(t))))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_axes_exit",animate:t}))).attr("d",(t=>O(A(t)))).attr("opacity",0).remove())))),Tw.appendOrSelect(e,"g.x-axes").attr("role",CO.GROUP).selectAll("line").data(this.uniqueKeys,(t=>t)).join((e=>e.append("line").attr("opacity",0).attr("class",(t=>`x-axis-${oy(t)}`)).attr("stroke-dasharray","0").attr("x1",(t=>wT(_(t),0,S).x)).attr("y1",(t=>wT(_(t),0,S).y)).attr("x2",(t=>wT(_(t),0,S).x)).attr("y2",(t=>wT(_(t),0,S).y)).call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_axes_enter",animate:t}))).attr("opacity",1).attr("x1",(t=>wT(_(t),x.range()[0],S).x)).attr("y1",(t=>wT(_(t),x.range()[0],S).y)).attr("x2",(t=>wT(_(t),x.range()[1],S).x)).attr("y2",(t=>wT(_(t),x.range()[1],S).y))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_axes_update",animate:t}))).attr("opacity",1).attr("x1",(t=>wT(_(t),x.range()[0],S).x)).attr("y1",(t=>wT(_(t),x.range()[0],S).y)).attr("x2",(t=>wT(_(t),x.range()[1],S).x)).attr("y2",(t=>wT(_(t),x.range()[1],S).y))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_axes_exit",animate:t}))).attr("opacity",0).remove())))),Tw.appendOrSelect(e,"g.x-labels").attr("role",CO.GROUP).selectAll("text").data(this.uniqueKeys).join((e=>e.append("text").text((t=>t)).attr("opacity",0).attr("x",(t=>wT(_(t),x.range()[1]+d,S).x)).attr("y",(t=>wT(_(t),x.range()[1]+d,S).y)).style("text-anchor",(t=>bT(_(t)).textAnchor)).style("dominant-baseline",(t=>bT(_(t)).dominantBaseline)).call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_labels_enter",animate:t}))).attr("opacity",1)))),(n=>n.call((n=>n.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_labels_update",animate:t}))).attr("opacity",1).attr("x",(t=>wT(_(t),x.range()[1]+d,S).x)).attr("y",(t=>wT(_(t),x.range()[1]+d,S).y)).end().finally((()=>{const t=hb(o,"radar","alignment"),n=this.getAlignmentXOffset(t,e,this.getParent());e.attr("x",n)}))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_x_labels_exit",animate:t}))).attr("opacity",0).remove())))),Tw.appendOrSelect(e,"g.blobs").attr("role",CO.GROUP).selectAll("path").data(this.groupedDataNormalized,(t=>t.name)).join((e=>e.append("path").attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],dataGroupName:t.name,originalClassName:"blob"}))).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-label",(t=>t.name)).attr("opacity",0).attr("transform",t?()=>`translate(${S.x}, ${S.y}) scale(${1+.35*Math.random()})`:`translate(${S.x}, ${S.y})`).style("fill",(t=>w(t.name))).style("fill-opacity",Y_.opacity.selected).style("stroke",(t=>w(t.name))).call((e=>{const n=e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_blobs_enter",animate:t})));t&&n.delay((()=>30*Math.random())).attr("transform",`translate(${S.x}, ${S.y})`),n.attr("opacity",1).attr("d",(t=>O(t.data)))}))),(e=>(e.attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL,Fy.STROKE],dataGroupName:t.name,originalClassName:"blob"}))).style("fill",(t=>w(t.name))).style("stroke",(t=>w(t.name))),e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_blobs_update",animate:t}))).attr("opacity",1).attr("transform",`translate(${S.x}, ${S.y})`).attr("d",(t=>O(t.data))))),e)),(e=>e.call((e=>{const n=e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_blobs_exit",animate:t})));t&&n.delay((()=>30*Math.random())).attr("transform",(()=>`translate(${S.x}, ${S.y}) scale(${1+.35*Math.random()})`)),n.attr("opacity",0).remove()})))),Tw.appendOrSelect(e,"g.dots").attr("role",CO.GROUP).selectAll("circle").data(this.fullDataNormalized.filter((t=>null!==hb(t,h)))).join((t=>t.append("circle").attr("role",CO.GRAPHICS_SYMBOL).attr("aria-label",(t=>t[l]))),(t=>t),(t=>t.remove())).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[a],originalClassName:oy(t[u])}))).attr("cx",(t=>wT(_(t[u]),x(t[h]),S).x)).attr("cy",(t=>wT(_(t[u]),x(t[h]),S).y)).attr("r",0).attr("opacity",0).style("fill",(t=>w(t[a]))),Tw.appendOrSelect(e,"g.x-axes-rect").attr("role",CO.GROUP).selectAll("rect").data(this.uniqueKeys).join((t=>t.append("rect")),(t=>t),(t=>t.remove())).attr("x",S.x).attr("y",S.y-m/2).attr("width",x.range()[1]).attr("height",m).style("fill","red").style("fill-opacity",0).attr("transform",(t=>`rotate(${ET(_(t))}, ${S.x}, ${S.y})`)),Tw.appendOrSelect(e,"g.y-labels").attr("role",CO.GROUP).selectAll("text").data(c(E)).join((e=>e.append("text").attr("opacity",0).text((t=>t)).attr("x",(t=>wT(-Math.PI/2,x(t),S).x+p)).attr("y",(t=>wT(-Math.PI/2,x(t),S).y)).style("text-anchor","start").style("dominant-baseline","middle").call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_labels_enter",animate:t}))).attr("opacity",1)))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_labels_update",animate:t}))).text((t=>t)).attr("opacity",1).attr("x",(t=>wT(-Math.PI/2,x(t),S).x+p)).attr("y",(t=>wT(-Math.PI/2,x(t),S).y))))),(e=>e.call((e=>e.transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"radar_y_labels_exit",animate:t}))).attr("opacity",0).remove())))),this.addEventListeners()}getAlignmentXOffset(t,e,n){const r=Tw.getSVGElementSize(e,{useBBox:!0}),{width:i}=Tw.getSVGElementSize(n,{useAttrs:!0});let s=0;return t===Qy.CENTER?s=Math.floor((i-r.width)/2):t===Qy.RIGHT&&(s=i-r.width),s}destroy(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}addEventListeners(){const t=this,{axes:{angle:e}}=hb(this.getOptions(),"radar");this.parent.selectAll(".x-axes-rect > rect").on("mouseover",(function(n,r){const i=de(this);t.services.events.dispatchEvent(jy.Radar.X_AXIS_MOUSEOVER,{event:n,element:i,datum:r});const s=t.parent.select(`.x-axes .x-axis-${oy(r)}`),o=t.parent.selectAll(`.dots circle.${oy(r)}`),a=t.model.getActiveDataGroupNames(),l=t.getOptions(),{groupMapsTo:c}=l.data,u=hb(l,"radar","axes","value");s.classed("hovered",!0).attr("stroke-dasharray","4 4"),o.classed("hovered",!0).attr("opacity",(t=>-1!==a.indexOf(t[c])?1:0)).attr("r",Y_.dotsRadius);const h=t.fullDataNormalized.filter((t=>t[e]===r&&-1!==a.indexOf(t[c])));t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:n,hoveredElement:i,items:h.filter((t=>"number"==typeof t[u])).map((e=>({label:e[c],value:e[u],color:t.model.getFillColor(e[c]),class:t.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:e[c]})})))})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Radar.X_AXIS_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Radar.X_AXIS_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this),i=t.parent.select(`.x-axes .x-axis-${oy(n)}`),s=t.parent.selectAll(`.dots circle.${oy(n)}`);i.classed("hovered",!1).attr("stroke-dasharray","0"),s.classed("hovered",!1).attr("opacity",0).attr("r",0),t.services.events.dispatchEvent(jy.Radar.X_AXIS_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE)}))}}class ST extends aT{constructor(){super(...arguments),this.type="simple-bar",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-simple-bar"}))).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-simple-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getComponentContainer({withinChartClip:!0}),i=this.model.getDisplayData(this.configs.groups),s=this.services.cartesianScales.getOrientation(),o=r.selectAll("path.bar").data(i,(t=>t[n]));o.exit().attr("opacity",0).remove(),o.enter().append("path").attr("opacity",0).merge(o).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bar-update-enter",animate:t}))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[n],originalClassName:"bar"}))).style("fill",(t=>this.model.getFillColor(t[n]))).attr("d",(t=>{const e=this.services.cartesianScales.getRangeIdentifier(),n=this.getBarWidth(),r=t[e],i=this.services.cartesianScales.getDomainValue(t)-n/2,o=i+n;let a,l;if(Array.isArray(r)&&2===r.length)a=this.services.cartesianScales.getRangeValue(r[0]),l=this.services.cartesianScales.getRangeValue(r[1]);else{const e=this.services.cartesianScales.getRangeScale().domain()[0];a=this.services.cartesianScales.getRangeValue(Math.max(0,e)),l=this.services.cartesianScales.getRangeValue(t)}const c=Math.abs(l-a);if(0!==c&&c<2&&(l=r>0&&s===Yy.VERTICAL||r<0&&s===Yy.HORIZONTAL?a-2:a+2),!this.isOutsideZoomedDomain(i,o))return pb({x0:i,x1:o,y0:a,y1:l},s)})).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",(t=>t.value)),this.addEventListeners()}addEventListeners(){const t=this;this.parent.selectAll("path.bar").on("mouseover",(function(e,n){const r=de(this);r.classed("hovered",!0),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOVER,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,data:[n]})})).on("mousemove",(function(e,n){t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEMOVE,{event:e,element:de(this),datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Bar.BAR_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1),t.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class TT extends HS{constructor(){super(...arguments),this.type="skeleton-lines"}render(t=!0){const e=hb(this.getOptions(),"data","loading"),n=!(hb(this.getOptions(),"grid","x","enabled")||hb(this.getOptions(),"grid","y","enabled")||hb(this.getOptions(),"axes","bottom","visible")||hb(this.getOptions(),"axes","left","visible"));e&&!n?super.renderGridSkeleton(e):e&&n?this.renderSparklineSkeleton(e):this.removeSkeleton()}renderSparklineSkeleton(t){this.setScales(),this.drawBackdrop(t),this.drawSparkline(t),this.updateBackdropStyle(),t&&this.setShimmerEffect("shimmer-lines")}drawSparkline(t){const e=this.backdrop.attr("width"),n=Tw.appendOrSelect(this.backdrop,"g.y.skeleton"),r=n.selectAll("line").data([100]);r.enter().append("line").merge(r).attr("x1",0).attr("x2",e).attr("y1",(t=>t)).attr("y2",(t=>t)),n.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}updateBackdropStyle(){const t=this.parent;this.backdrop=Tw.appendOrSelect(t,"svg.chart-skeleton.DAII"),Tw.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop").classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)}}class MT extends Mw{constructor(){super(...arguments),this.type="area-stacked",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("path.area").transition("legend-hover-area").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-area"}))).attr("opacity",(t=>hb(t,0,r)!==e.datum().name?x_.unselected:x_.selected))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-area"}))).attr("opacity",x_.selected)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this.getComponentContainer({withinChartClip:!0}),n=this,r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some((t=>r.axes[t].percentage)),o=this.model.getStackedData({percentage:s,groups:this.configs.groups}),a=hb(o,0,0),l=this.services.cartesianScales.getDomainAxisPosition({datum:a}),c=this.services.cartesianScales.getRangeAxisPosition({datum:a}),u=this.services.cartesianScales.getScaleByPosition(c),h=e.selectAll("path.area").data(o,(t=>hb(t,0,i)));this.areaGenerator=qu().x((t=>this.services.cartesianScales.getValueThroughAxisPosition(l,t.data.sharedStackKey))).y0((t=>u(t[0]))).y1((t=>u(t[1]))).curve(this.services.curves.getD3Curve()),h.exit().attr("opacity",0).remove(),h.enter().append("path").attr("opacity",0).merge(h).data(o,(t=>hb(t,0,i))).attr("class","area").attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:hb(t,0,i),originalClassName:"area"}))).style("fill",(t=>n.model.getFillColor(hb(t,0,i)))).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",(t=>hb(t,0,i))).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"area-update-enter",animate:t}))).attr("opacity",x_.selected).attr("d",this.areaGenerator)}}class CT extends aT{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-bar"}))).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const e=this.getComponentContainer({withinChartClip:!0}),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),s=this.model.getActiveDataGroupNames(),o=e.selectAll("g.bars").data(i,(t=>hb(t,0,r)));o.exit().attr("opacity",0).remove(),o.enter().append("g").classed("bars",!0).attr("role",CO.GROUP).attr("data-name","bars");const a=e.selectAll("g.bars").selectAll("path.bar").data((t=>t),(t=>t.data.sharedStackKey));a.exit().remove(),a.enter().append("path").merge(a).classed("bar",!0).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"bar-update-enter",animate:t}))).attr("class",(t=>this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[r],originalClassName:"bar"}))).style("fill",(t=>this.model.getFillColor(t[r]))).attr("d",(t=>{const e=t.data.sharedStackKey,r=this.getBarWidth(),i=this.services.cartesianScales.getDomainValue(e)-r/2,o=i+r,a=this.services.cartesianScales.getRangeValue(t[0]);let l=this.services.cartesianScales.getRangeValue(t[1]);if(!this.isOutsideZoomedDomain(i,o)){if(Math.abs(l-a)>0&&Math.abs(l-a)>n.bars.dividerSize){const e=t[0]<0&&t[1]<=0;e&&s.length>1?this.services.cartesianScales.getOrientation()===Yy.VERTICAL?l+=0===t[1]?2:1:l-=1:e||(this.services.cartesianScales.getOrientation()===Yy.VERTICAL?l+=1:l-=1)}return pb({x0:i,x1:o,y0:a,y1:l},this.services.cartesianScales.getOrientation())}})).attr("opacity",1).attr("role",CO.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",(t=>t[1]-t[0])),this.addEventListeners()}addEventListeners(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this;this.parent.selectAll("path.bar").on("mouseover",(function(t,r){const i=de(this);i.classed("hovered",!0),n.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOVER,{event:t,element:i,datum:r});let s=n.model.getDisplayData(n.configs.groups).find((t=>{const i=n.services.cartesianScales.getDomainIdentifier(t);return t[n.services.cartesianScales.getRangeIdentifier(t)]===r.data[r[e]]&&t[i].toString()===r.data.sharedStackKey&&t[e]===r[e]}));if(void 0===s){const t=n.services.cartesianScales.getDomainIdentifier(),i=n.services.cartesianScales.getRangeIdentifier();s={[t]:r.data.sharedStackKey,[i]:r.data[r[e]],[e]:r[e]}}n.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:t,hoveredElement:i,data:[s]})})).on("mousemove",(function(t,e){const r=de(this);n.services.events.dispatchEvent(jy.Bar.BAR_MOUSEMOVE,{event:t,element:r,datum:e}),n.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t,e){n.services.events.dispatchEvent(jy.Bar.BAR_CLICK,{event:t,element:de(this),datum:e})})).on("mouseout",(function(t,e){const r=de(this);r.classed("hovered",!1),n.services.events.dispatchEvent(jy.Bar.BAR_MOUSEOUT,{event:t,element:r,datum:e}),n.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}getBarWidth(){const t=this.getOptions();if(hb(t,"bars","width"))return t.bars.width;const e=this.services.cartesianScales.getMainXScale(),n=Tw.getSVGElementSize(this.parent,{useAttrs:!0}).width,r=this.model.getStackKeys().length,i=hb(t,"bars","spacingFactor");return e.step?Math.min(t.bars.maxWidth,e.step()/2):Math.min(t.bars.maxWidth,n*i/r)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class AT extends BS{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=Gy.SVG}render(t){if(!hb(this.getOptions(),"points","enabled"))return;const e=this.getComponentContainer({withinChartClip:!0}),n=this.getOptions(),{groupMapsTo:r}=n.data,i=Object.keys(n.axes).some((t=>n.axes[t].percentage)),s=this.model.getStackedData({groups:this.configs.groups,percentage:i}),o=e.selectAll("g.dots").data(s,(t=>hb(t,0,r)));o.exit().attr("opacity",0).remove();const a=o.enter().append("g").classed("dots",!0).attr("role",CO.GROUP).merge(o).selectAll("circle.dot").data((t=>t));a.exit().attr("opacity",0).remove();const l=a.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(a).datum((t=>{const e=t[r],n=this.services.cartesianScales.getDomainIdentifier(t),i=this.services.cartesianScales.getRangeIdentifier(t);return{[r]:e,[n]:t.data.sharedStackKey,[i]:t[1]}}));this.styleCircles(l,t),this.addEventListeners()}getTooltipData(t,e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=Object.keys(n.axes).some((t=>n.axes[t].percentage)),s=this.model.getStackedData({groups:this.configs.groups,percentage:i}),o=[];return s.forEach(((n,s)=>{n.forEach(((n,a)=>{const l=n[r],c=n.data.sharedStackKey;let u=n.data[l];const h=n[1],d=this.services.cartesianScales.getDomainIdentifier(n),p=this.services.cartesianScales.getRangeIdentifier(n);null!=u&&t===this.services.cartesianScales.getDomainValue(c)&&e===this.services.cartesianScales.getRangeValue(h)&&(i&&(u=this.model.getStackedData({groups:this.configs.groups})[s][a].data[l]),null!==u&&o.push({[r]:l,[d]:c,[p]:u}))}))})),this.model.getDisplayData(this.configs.groups).filter((t=>{const e=this.services.cartesianScales.getDomainIdentifier(t),n=this.services.cartesianScales.getRangeIdentifier(t);return void 0!==o.find((i=>i[r]==t[r]&&i[e]==t[e]&&i[n]==t[n]))}))}}class DT extends Mw{constructor(){super(...arguments),this.type="tree",this.renderType=Gy.SVG}getLongestLabel(t){let e="";return t.forEach((t=>{const n=t.children?this.getLongestLabel(t.children):"";(n.length>e.length||t.name.length>e.length)&&(e=n.length>t.name.length?n:t.name)})),e}getMockLabelWidth(t,e){const n=t.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(e),{width:r}=Tw.getSVGElementSize(n.node(),{useBBox:!0});return n.remove(),r}render(t=!0){const e=this.getComponentContainer();e.html("");const{width:n,height:r}=Tw.getSVGElementSize(this.parent,{useAttrs:!0});if(n<1||r<1)return;const i=this.model.getOptions(),s=this.model.getDisplayData(),o=hb(i,"tree","rootTitle")||"Tree",a=this.getMockLabelWidth(e,o),l=this.getLongestLabel(s),c=this.getMockLabelWidth(e,l),u=0,h=a>0?a+6:24,d=Qo({name:o,children:s}),p=n/6,f=t=>{const r=d.descendants().reverse(),i=d.links();let s=d,o=d;d.eachBefore((t=>{t.x<s.x&&(s=t),t.x>o.x&&(o=t)}));const a=o.x-s.x,l=e.transition().call((t=>this.services.transitions.setupTransition({transition:t,name:"tree-update-viewbox",animate:!0}))).attr("viewBox",[-h,s.x,n,a].join(" ")),c=b.selectAll("g").data(r,(t=>t.id)),u=this,p=c.enter().append("g").attr("transform",(()=>`translate(${t.y0},${t.x0})`)).attr("class",(t=>0!==t.depth&&t.children&&t.children.length>0?"clickable":null)).on("mouseover",(function(t,e){u.services.events.dispatchEvent(jy.Tree.NODE_MOUSEOVER,{event:t,element:de(this),datum:e})})).on("click",(function(t,e){0!==e.depth&&(e.children=e.children?null:e._children,f(e)),u.services.events.dispatchEvent(jy.Tree.NODE_CLICK,{event:t,element:de(this),datum:e})})).on("mouseout",(function(t,e){u.services.events.dispatchEvent(jy.Tree.NODE_MOUSEOUT,{event:t,element:de(this),datum:e})}));p.append("circle").attr("r",2.5).attr("class",(t=>t._children?"parent":"child")).attr("stroke-width",10),p.append("text").attr("dy","0.31em").attr("x",(t=>t._children?-6:6)).attr("text-anchor",(t=>t._children?"end":"start")).text((t=>t.data.name)).clone(!0).attr("class","text-stroke").lower(),c.merge(p).transition(l).attr("transform",(t=>`translate(${t.y},${t.x})`)).attr("fill-opacity",1).attr("stroke-opacity",1),c.exit().transition(l).remove().attr("transform",(()=>`translate(${t.y},${t.x})`)).attr("fill-opacity",0).attr("stroke-opacity",0);const g=_.selectAll("path").data(i,(t=>t.target.id)),m=g.enter().append("path").attr("d",(()=>{const e={x:t.x0,y:t.y0};return y({source:e,target:e})}));g.merge(m).transition(l).attr("d",y),g.exit().transition(l).remove().attr("d",(()=>{const e={x:t.x,y:t.y};return y({source:e,target:e})})),d.eachBefore((t=>{t.x0=t.x,t.y0=t.y}))},g=d.descendants(),m=g[g.length-1].depth,v=hb(i,"tree","type")===t_.DENDROGRAM?Xo().size([r,n-c-6*m-a]):Pa().nodeSize([10,p]).size([r,n-c-6*m-a]),y=ih().x((t=>t.y)).y((t=>t.x));d.x0=p/2,d.y0=0,d.descendants().forEach(((t,e)=>{t.id=e,t._children=t.children})),v(d),e.attr("viewBox",[-h,-u,n,10]).style("user-select","none");const _=e.append("g").attr("class","links"),b=e.append("g").attr("class","nodes");f(d)}}var LT={black:{100:"#000000"},blue:{10:"#edf5ff",20:"#d0e2ff",30:"#a6c8ff",40:"#78a9ff",50:"#4589ff",60:"#0f62fe",70:"#0043ce",80:"#002d9c",90:"#001d6c",100:"#001141"},coolGray:{10:"#f2f4f8",20:"#dde1e6",30:"#c1c7cd",40:"#a2a9b0",50:"#878d96",60:"#697077",70:"#4d5358",80:"#343a3f",90:"#21272a",100:"#121619"},cyan:{10:"#e5f6ff",20:"#bae6ff",30:"#82cfff",40:"#33b1ff",50:"#1192e8",60:"#0072c3",70:"#00539a",80:"#003a6d",90:"#012749",100:"#061727"},gray:{10:"#f4f4f4",20:"#e0e0e0",30:"#c6c6c6",40:"#a8a8a8",50:"#8d8d8d",60:"#6f6f6f",70:"#525252",80:"#393939",90:"#262626",100:"#161616"},green:{10:"#defbe6",20:"#a7f0ba",30:"#6fdc8c",40:"#42be65",50:"#24a148",60:"#198038",70:"#0e6027",80:"#044317",90:"#022d0d",100:"#071908"},magenta:{10:"#fff0f7",20:"#ffd6e8",30:"#ffafd2",40:"#ff7eb6",50:"#ee5396",60:"#d02670",70:"#9f1853",80:"#740937",90:"#510224",100:"#2a0a18"},orange:{10:"#fff2e8",20:"#ffd9be",30:"#ffb784",40:"#ff832b",50:"#eb6200",60:"#ba4e00",70:"#8a3800",80:"#5e2900",90:"#3e1a00",100:"#231000"},purple:{10:"#f6f2ff",20:"#e8daff",30:"#d4bbff",40:"#be95ff",50:"#a56eff",60:"#8a3ffc",70:"#6929c4",80:"#491d8b",90:"#31135e",100:"#1c0f30"},red:{10:"#fff1f1",20:"#ffd7d9",30:"#ffb3b8",40:"#ff8389",50:"#fa4d56",60:"#da1e28",70:"#a2191f",80:"#750e13",90:"#520408",100:"#2d0709"},teal:{10:"#d9fbfb",20:"#9ef0f0",30:"#3ddbd9",40:"#08bdba",50:"#009d9a",60:"#007d79",70:"#005d5d",80:"#004144",90:"#022b30",100:"#081a1c"},warmGray:{10:"#f7f3f2",20:"#e5e0df",30:"#cac5c4",40:"#ada8a8",50:"#8f8b8b",60:"#726e6e",70:"#565151",80:"#3c3838",90:"#272525",100:"#171414"},white:{0:"#ffffff"},yellow:{10:"#fcf4d6",20:"#fddc69",30:"#f1c21b",40:"#d2a106",50:"#b28600",60:"#8e6a00",70:"#684e00",80:"#483700",90:"#302400",100:"#1c1500"}};const RT=function(){const t=de(this.parentNode).select("rect.leaf"),e=Ie(getComputedStyle(t.node(),null).getPropertyValue("fill"));let n;if(e&&(n=(t=>{if(!t)return null;for(const e of Object.keys(LT)){const n=LT[e];for(const e of Object.keys(n))if(n[+e]===t)return e}return null})(e?e.hex():null)),null==n){const t=We(e).l;n=Math.abs(100*t-100)}return n>50?"white":"black"};let kT=0;class IT extends Mw{constructor(){super(...arguments),this.type="treemap",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail;this.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-treemap"}))).attr("opacity",(t=>t.parent.data.name===e.datum().name?1:.3))},this.handleLegendMouseOut=()=>{this.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-treemap"}))).attr("opacity",1)}}init(){const{events:t}=this.services;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this.getComponentContainer();this.model.getData();const n=this.model.getDisplayData(),r=this.model.getOptions(),i=hb(window,"location"),{width:s,height:o}=Tw.getSVGElementSize(e,{useAttrs:!0}),a=Qo({name:r.title||"Treemap",children:n}).sum((t=>t.value)).sort(((t,e)=>e.value-t.value)),l=function(){var t=Ba,e=!1,n=1,r=1,i=[0],s=sa,o=sa,a=sa,l=sa,c=sa;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(Ma),t}function h(e){var n=i[e.depth],r=e.x0+n,u=e.y0+n,h=e.x1-n,d=e.y1-n;h<r&&(r=h=(r+h)/2),d<u&&(u=d=(u+d)/2),e.x0=r,e.y0=u,e.x1=h,e.y1=d,e.children&&(n=i[e.depth+1]=s(e)/2,r+=c(e)-n,u+=o(e)-n,(h-=a(e)-n)<r&&(r=h=(r+h)/2),(d-=l(e)-n)<u&&(u=d=(u+d)/2),t(e,r,u,h,d))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.tile=function(e){return arguments.length?(t=ia(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:oa(+t),u):s},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:oa(+t),u):o},u.paddingRight=function(t){return arguments.length?(a="function"==typeof t?t:oa(+t),u):a},u.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:oa(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:oa(+t),u):c},u}().size([s,o]).paddingInner(1).paddingOuter(0).round(!0)(a),c=e.selectAll("g[data-name='leaf']").data(l.leaves(),(t=>t.data.name));c.exit().attr("opacity",0).remove();const u=c.enter().append("g").attr("data-name","leaf").attr("data-uid",(()=>kT++)).merge(c);u.attr("data-name","leaf").transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"treemap-group-update",animate:t}))).attr("transform",(t=>`translate(${t.x0},${t.y0})`));const h=u.selectAll("rect.leaf").data((t=>[t]));h.exit().attr("width",0).attr("height",0).remove(),h.enter().append("rect").classed("leaf",!0).merge(h).attr("width",0).attr("height",0).attr("id",(function(){const t=de(this.parentNode).attr("data-uid");return`${r.style.prefix}-leaf-${t}`})).attr("class",(t=>{for(;t.depth>1;)t=t.parent;return this.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t.data.name,originalClassName:"leaf"})})).transition().call((e=>this.services.transitions.setupTransition({transition:e,name:"treemap-leaf-update-enter",animate:t}))).attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).style("fill",(t=>{for(;t.depth>1;)t=t.parent;return this.model.getFillColor(t.data.name)})),u.selectAll("clipPath").data((t=>!0!==t.data.showLabel?[]:[1]),(t=>t)).join((t=>t.append("clipPath").attr("id",(function(){const t=de(this.parentNode).attr("data-uid");return`${r.style.prefix}-clip-${t}`})).append("use").attr("xlink:href",(function(){const t=de(this.parentNode.parentNode).attr("data-uid"),e=`${r.style.prefix}-leaf-${t}`;return new URL(`#${e}`,i)+""}))),(t=>null),(t=>t.remove())),u.selectAll("text").data((t=>{if(!0!==t.data.showLabel)return[];let e=t;for(;e.depth>1;)e=e.parent;const n=We(this.model.getFillColor(e.data.name));return[{text:t.data.name,color:n.l<.5?"white":"black"}]}),(t=>t)).join((t=>{const e=t.append("text").text((t=>t.text)).style("fill",RT).attr("x",7).attr("y",18);return i&&e.attr("clip-path",(function(){const t=de(this.parentNode).attr("data-uid"),e=`${r.style.prefix}-clip-${t}`;return`url(${new URL(`#${e}`,i)+""})`})),e}),(t=>t.text((t=>t.text)).style("fill",RT)),(t=>t.remove())),this.addEventListeners()}addEventListeners(){const t=this;this.parent.selectAll("rect.leaf").on("mouseover",(function(e,n){const r=de(this);let i=getComputedStyle(this,null).getPropertyValue("fill"),s=n;for(;s.depth>1;)s=s.parent;r.transition("graph_element_mouseover_fill_update").call((e=>t.services.transitions.setupTransition({transition:e,name:"graph_element_mouseover_fill_update"}))).style("fill",(e=>{const n=t.model.getFillColor(e.parent.data.name);return n&&(i=n),Ie(i).darker(.7).toString()})),t.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:e,hoveredElement:r,items:[{color:i,label:s.data.name,bold:!0},{label:n.data.name,value:n.data.value}]}),t.services.events.dispatchEvent(jy.Treemap.LEAF_MOUSEOVER,{event:e,element:r,datum:n})})).on("mousemove",(function(e,n){const r=de(this);t.services.events.dispatchEvent(jy.Treemap.LEAF_MOUSEMOVE,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:e})})).on("click",(function(e,n){t.services.events.dispatchEvent(jy.Treemap.LEAF_CLICK,{event:e,element:de(this),datum:n})})).on("mouseout",(function(e,n){const r=de(this);r.classed("hovered",!1);let i=n;for(;i.depth>1;)i=i.parent;r.transition().call((e=>t.services.transitions.setupTransition({transition:e,name:"graph_element_mouseout_fill_update"}))).style("fill",(e=>t.model.getFillColor(e.parent.data.name))),t.services.events.dispatchEvent(jy.Treemap.LEAF_MOUSEOUT,{event:e,element:r,datum:n}),t.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:r})}))}}var PT={value:function(){}};function NT(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new BT(r)}function BT(t){this._=t}function UT(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function VT(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=PT,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}BT.prototype=NT.prototype={constructor:BT,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=VT(r[n],t.name,e);else if(null==e)for(n in r)r[n]=VT(r[n],t.name,null);return this}for(;++s<o;)if((n=(t=i[s]).type)&&(n=UT(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new BT(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};const $T=function(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}(Object.freeze(Object.defineProperty({__proto__:null,dispatch:NT},Symbol.toStringTag,{value:"Module"}))).dispatch,HT=Math.PI/180,jT={archimedean:tM,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},GT=2048;function zT(t){return t.text}function FT(){return"serif"}function WT(){return"normal"}function qT(t){return Math.sqrt(t.value)}function ZT(){return 30*(~~(6*random())-3)}function YT(){return 1}function XT(t,e,n,r){if(!e.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,2048/s,GT/s);var o=0,a=0,l=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font;const t=i.measureText(e.text),c=-Math.floor(t.width/2);let m=(t.width+1)*s,v=e.size<<1;if(e.rotate){var u=Math.sin(e.rotate*HT),h=Math.cos(e.rotate*HT),d=m*h,p=m*u,f=v*h,g=v*u;m=Math.max(Math.abs(d+g),Math.abs(d-g))+31>>5<<5,v=~~Math.max(Math.abs(p+f),Math.abs(p-f))}else m=m+31>>5<<5;if(v>l&&(l=v),o+m>=2048&&(o=0,a+=l,l=0),a+v>=GT)break;i.translate((o+(m>>1))/s,(a+(v>>1))/s),e.rotate&&i.rotate(e.rotate*HT),i.fillText(e.text,c,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,c,0)),i.restore(),e.width=m,e.height=v,e.xoff=o,e.yoff=a,e.x1=m>>1,e.y1=v>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=m}for(var m=i.getImageData(0,0,2048/s,GT/s).data,v=[];--r>=0;)if((e=n[r]).hasText){for(var y=e.width,_=y>>5,b=e.y1-e.y0,x=0;x<b*_;x++)v[x]=0;if(null==(o=e.xoff))return;a=e.yoff;for(var E=0,w=-1,O=0;O<b;O++){for(x=0;x<y;x++){var S=_*O+(x>>5),T=m[2048*(a+O)+(o+x)<<2]?1<<31-x%32:0;v[S]|=T,E|=T}E?w=O:(e.y0++,b--,O--,a++)}e.y1=e.y0+w,e.sprite=v.slice(0,(e.y1-e.y0)*_)}}}function KT(t,e,n){n>>=5;for(var r,i=t.sprite,s=t.width>>5,o=t.x-(s<<4),a=127&o,l=32-a,c=t.y1-t.y0,u=(t.y+t.y0)*n+(o>>5),h=0;h<c;h++){r=0;for(var d=0;d<=s;d++)if((r<<l|(d<s?(r=i[h*s+d])>>>a:0))&e[u+d])return!0;u+=n}return!1}function QT(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function JT(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function tM(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function eM(){return document.createElement("canvas")}function nM(t){return"function"==typeof t?t:function(){return t}}const rM=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(){var t=[256,256],e=zT,n=FT,r=qT,i=WT,s=WT,o=ZT,a=YT,l=tM,c=[],u=1/0,h=$T("word","end"),d=null,p=Math.random,f={},g=eM;function m(e,n,r){t[0],t[1];for(var i,s,o,a=n.x,c=n.y,u=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=l(t),d=p()<.5?1:-1,f=-d;(i=h(f+=d))&&(s=~~i[0],o=~~i[1],!(Math.min(Math.abs(s),Math.abs(o))>=u));)if(n.x=a+s,n.y=c+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||JT(n,r))&&!KT(n,e,t[0])){for(var g,m=n.sprite,v=n.width>>5,y=t[0]>>5,_=n.x-(v<<4),b=127&_,x=32-b,E=n.y1-n.y0,w=(n.y+n.y0)*y+(_>>5),O=0;O<E;O++){g=0;for(var S=0;S<=v;S++)e[w+S]|=g<<x|(S<v?(g=m[O*v+S])>>>b:0);w+=y}return!0}return!1}return f.canvas=function(t){return arguments.length?(g=nM(t),f):g},f.start=function(){var l=function(t){const e=t.getContext("2d",{willReadFrequently:!0});t.width=t.height=1;const n=Math.sqrt(e.getImageData(0,0,1,1).data.length>>2);return t.width=2048/n,t.height=GT/n,e.fillStyle=e.strokeStyle="red",{context:e,ratio:n}}(g()),v=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((t[0]>>5)*t[1]),y=null,_=c.length,b=-1,x=[],E=c.map((function(t,l){return t.text=e.call(this,t,l),t.font=n.call(this,t,l),t.style=i.call(this,t,l),t.weight=s.call(this,t,l),t.rotate=o.call(this,t,l),t.size=~~r.call(this,t,l),t.padding=a.call(this,t,l),t})).sort((function(t,e){return e.size-t.size}));return d&&clearInterval(d),d=setInterval(w,0),w(),f;function w(){for(var e=Date.now();Date.now()-e<u&&++b<_&&d;){var n=E[b];n.x=t[0]*(p()+.5)>>1,n.y=t[1]*(p()+.5)>>1,XT(l,n,E,b),n.hasText&&m(v,n,y)&&(x.push(n),h.call("word",f,n),y?QT(y,n):y=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}b>=_&&(f.stop(),h.call("end",f,x,y))}},f.stop=function(){d&&(clearInterval(d),d=null);for(const t of c)delete t.sprite;return f},f.timeInterval=function(t){return arguments.length?(u=t??1/0,f):u},f.words=function(t){return arguments.length?(c=t,f):c},f.size=function(e){return arguments.length?(t=[+e[0],+e[1]],f):t},f.font=function(t){return arguments.length?(n=nM(t),f):n},f.fontStyle=function(t){return arguments.length?(i=nM(t),f):i},f.fontWeight=function(t){return arguments.length?(s=nM(t),f):s},f.rotate=function(t){return arguments.length?(o=nM(t),f):o},f.text=function(t){return arguments.length?(e=nM(t),f):e},f.spiral=function(t){return arguments.length?(l=jT[t]||t,f):l},f.fontSize=function(t){return arguments.length?(r=nM(t),f):r},f.padding=function(t){return arguments.length?(a=nM(t),f):a},f.random=function(t){return arguments.length?(p=t,f):p},f.on=function(){var t=h.on.apply(h,arguments);return t===h?f:t},f}));class iM extends Mw{constructor(){super(...arguments),this.type="wordcloud",this.renderType=Gy.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("text.word").transition("legend-hover-wordcloud").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-wordcloud"}))).attr("opacity",(t=>t[n]!==e.datum().name?.3:1))},this.handleLegendMouseOut=()=>{this.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call((t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-wordcloud"}))).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(jy.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(jy.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const e=this,n=this.getComponentContainer().attr("width","100%").attr("height","100%"),r=this.model.getDisplayData(),i=this.getFontSizeScale(r),s=this.getOptions(),{fontSizeMapsTo:o,wordMapsTo:a}=s.wordCloud,{groupMapsTo:l}=s.data,{width:c,height:u}=Tw.getSVGElementSize(n,{useAttrs:!0});if(0===c||0===u)return;const h=rM().size([c,u]).words(r.map((function(t){const e=t[o];if("number"!=typeof t[o])throw Error("Badly formatted WordCloud data. `value` should only be an integer or float");return{[l]:t[l],text:t[a],size:e,value:e}}))).padding(5).rotate(0).fontSize((t=>i(t.size))).on("end",(function(r){const i=Tw.appendOrSelect(n,"g.words");i.attr("transform",`translate(${h.size()[0]/2}, ${h.size()[1]/2})`);const s=i.selectAll("text").data(r,(t=>`${t[l]}-${t.text}`));s.exit().attr("opacity",0).remove(),s.enter().append("text").attr("opacity",0).merge(s).style("font-size",(t=>`${t.size}px`)).text((function(t){return t.text})).attr("class",(t=>e.model.getColorClassName({classNameTypes:[Fy.FILL],dataGroupName:t[l],originalClassName:"word "+(t.size>32?"light":"")}))).style("fill",(t=>e.model.getFillColor(t[l],t.text,t))).attr("text-anchor","middle").transition().call((n=>e.services.transitions.setupTransition({transition:n,name:"wordcloud-text-update-enter",animate:t}))).attr("transform",(t=>`translate(${t.x}, ${t.y})`)).attr("opacity",1)}));h.start(),this.addEventListeners()}getFontSizeScale(t){const e=this.getOptions(),{fontSizeMapsTo:n}=e.wordCloud,r=t.map((t=>t[n])).filter((t=>t)),i=Tw.getHTMLElementSize(this.services.domUtils.getMainContainer()),s=r.length>0,o=s?c(r):[1,1];return Ja().domain(o).range(s?e.wordCloud.fontSizeRange(i,t):[4,4])}addEventListeners(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this,r=zv((t=>{const e=n.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call((t=>n.services.transitions.setupTransition({transition:t,name:"wordcloud-word-mouse-highlight"})));null===t?e.attr("opacity",1):e.attr("opacity",(function(){return t===this?1:.3}))}),6);this.parent.selectAll("text.word").on("mouseover",(function(i,s){r(this),n.services.events.dispatchEvent(jy.WordCloud.WORD_MOUSEOVER,{event:i,element:de(this),datum:s}),n.services.events.dispatchEvent(jy.Tooltip.SHOW,{event:i,hoveredElement:this,items:[{label:t.tooltip.wordLabel,value:s.text},{label:t.tooltip.valueLabel,value:s.value},{label:t.tooltip.groupLabel,value:s[e],class:n.model.getColorClassName({classNameTypes:[Fy.TOOLTIP],dataGroupName:s[e]})}]})})).on("mousemove",(function(t,e){const r=de(this);n.services.events.dispatchEvent(jy.WordCloud.WORD_MOUSEMOVE,{element:r,datum:e}),n.services.events.dispatchEvent(jy.Tooltip.MOVE,{event:t})})).on("click",(function(t,e){n.services.events.dispatchEvent(jy.WordCloud.WORD_CLICK,{event:t,element:de(this),datum:e})})).on("mouseout",(function(t,e){const i=de(this);r(null),n.services.events.dispatchEvent(jy.WordCloud.WORD_MOUSEOUT,{event:t,element:i,datum:e}),n.services.events.dispatchEvent(jy.Tooltip.HIDE,{hoveredElement:i})}))}}class sM extends Mw{constructor(){super(...arguments),this.type="geo",this.renderType=Gy.SVG}render(){const t=this.getComponentContainer({withinChartClip:!0}),{width:e,height:n}=Tw.getSVGElementSize(t,{useAttrs:!0});if(e<1||n<1)return;const r=this.getProjection(),i=hb(this.getOptions(),"geoData"),s=this.model.getCombinedData(),o={},a={};Object.keys(s).forEach((t=>{"number"==typeof s[t].value?o[t]=s[t]:a[t]=s[t]}));const l=eT(i,Object.values(a)),c=function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return QS(t,e)}))}:QS(t,e)}(i,{type:"GeometryCollection",geometries:Object.values(o)}),u=r.fitSize([e,n],c),h=function(t,e){let n,r,i=3,s=4.5;function o(t){return t&&("function"==typeof s&&r.pointRadius(+s.apply(this,arguments)),Hi(t,n(r))),r.result()}return o.area=function(t){return Hi(t,n(Cs)),Cs.result()},o.measure=function(t){return Hi(t,n(go)),go.result()},o.bounds=function(t){return Hi(t,n(ks)),ks.result()},o.centroid=function(t){return Hi(t,n(ro)),ro.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,ms):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new bo(i)):new io(e=t),"function"!=typeof s&&r.pointRadius(s),o):e},o.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(r.pointRadius(+t),+t),o):s},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new bo(i)),o},o.projection(t).digits(i).context(e)}().projection(u);Tw.appendOrSelect(t,"g.geo").selectAll("path").data(c.features).join("path").attr("d",h);const d=this.services.domUtils.generateElementIDString("geo-pattern-stripes"),p=Tw.appendOrSelect(t,"defs");Tw.appendOrSelect(p,"pattern").attr("id",d).attr("width",5).attr("height",10).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("path").classed("pattern-fill",!0).attr("d",Wu()([[0,0],[0,10]]));const f=Tw.appendOrSelect(t,"g.missing-data");Tw.appendOrSelect(f,"path").datum(l).attr("d",h).style("fill",`url(#${d})`)}getProjection(){let t=null;switch(hb(this.getOptions(),"thematic","projection")){case __.geoEqualEarth:t=Lo(Fo).scale(177.158);break;case __.geoAlbers:t=Po().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);break;case __.geoConicEqualArea:t=Po();break;case __.geoConicEquidistant:t=ko(Vo).scale(131.154).center([0,13.9389]);break;case __.geoEquirectangular:t=Lo(Uo).scale(152.63);break;case __.geoMercator:t=Bo();break;case __.geoNaturalEarth1:t=Lo(Wo).scale(175.295);break;default:throw new Error("Projection is not supported.")}return t}}class oM extends sM{constructor(){super(...arguments),this.type="choropleth"}render(t=!0){super.render();const e=this.model.getCombinedData();this.getComponentContainer({withinChartClip:!0}).select("g.geo").selectAll("path").classed("border",!0).attr("class",(t=>this.model.getColorClassName({value:e[t.properties.NAME].value,originalClassName:"border"}))),this.addCountryAreaEventListener()}addCountryAreaEventListener(){const t=this,e=this.model.getCombinedData();this.parent.selectAll("path.border").on("mouseover",(function(n,r){const i=de(this);t.services.events.dispatchEvent(Hy.CHOROPLETH_MOUSEOVER,{event:n,element:i,datum:e[r.properties.NAME]}),t.services.events.dispatchEvent(Iy.SHOW,{event:n,hoveredElement:i,items:[{label:r.properties.NAME,value:e[r.properties.NAME].value}]})})).on("mousemove",(function(n,r){t.services.events.dispatchEvent(Hy.CHOROPLETH_MOUSEMOVE,{event:n,element:de(this),datum:e[r.properties.NAME]}),t.services.events.dispatchEvent(Iy.MOVE,{event:n})})).on("click",(function(n,r){t.services.events.dispatchEvent(Hy.CHOROPLETH_CLICK,{event:n,element:de(this),datum:e[r.properties.NAME]})})).on("mouseout",(function(n,r){const i=de(this);t.services.events.dispatchEvent(Hy.CHOROPLETH_MOUSEOUT,{event:n,element:i,datum:e[r.properties.NAME]}),t.services.events.dispatchEvent(Iy.HIDE,{event:n,hoveredElement:i})}))}}class aM extends BE{constructor(t){super(t),this.parentNode=!1,this.set({depth:2},{skipUpdate:!0})}setData(t){super.setData(t),this.setDataGroups(),1===t.length&&(this.parentNode=!0),this.setZoom()}setOptions(t){const e=this.getOptions(),n=ay({},t,this.getZoomOptions(t));ub(e,n);const r=this.getHierarchyLevel(),i=hb(e,"circlePack","hierarchyLevel");this.set({options:ay(e,n),depth:i&&i<4?i:r})}getZoomOptions(t){if(!this.getDisplayData())return{};const e=this.getDisplayData(),n=t||this.getOptions(),r=1===e.length&&hb(e,0,"children")?hb(e,0,"children"):e;let i=this.getHierarchyLevel();return r.some((t=>{if(t.children&&t.children.some((t=>t.children)))return i=3,!1})),!0===hb(n,"canvasZoom","enabled")&&i>2?{legend:{additionalItems:[{type:g_.ZOOM,name:"Click to zoom"}]}}:null}setZoom(t){this.setOptions(this.getZoomOptions(t))}updateHierarchyLevel(t){this.set({depth:t})}getHierarchyLevel(){return this.get("depth")}hasParentNode(){return this.parentNode}setDataGroups(){const t=this.getData(),e=this.getOptions(),{groupMapsTo:n}=e.data,r=t.map((t=>{const e=t[n];return this.setChildrenDataGroup(t,e)}));this.set({data:r},{skipUpdate:!0})}setChildrenDataGroup(t,e){return t.children?{...t,dataGroupName:e,children:t.children.map((t=>this.setChildrenDataGroup(t,e)))}:{...t,dataGroupName:e}}getTabularDataArray(){const t=this.getDisplayData(),e=[["Child","Parent","Value"]];return t.forEach((t=>{let n=t.value?t.value:0;t.children&&(n+=this.getChildrenDatums(t.children,t.name,e,0)),e.push(["&ndash;",t.name,n])})),e}getChildrenDatums(t,e,n=[],r=0){const i=e;return t.forEach((t=>{const e=t.name;let s=0;if(t.children)t.children.length>0&&("number"==typeof t.value&&(r+=t.value),s+=this.getChildrenDatums(t.children,e,n,s),n.push([e,i,s]),r+=s);else{let e=0;"number"==typeof t.value&&(e=t.value,r+=t.value),n.push([t.name,i,e])}})),r}}const lM={[d_.LINE]:[PS,BS],[d_.SCATTER]:[BS],[d_.AREA]:[IS,PS,BS],[d_.STACKED_AREA]:[MT,PS,AT,iT],[d_.SIMPLE_BAR]:[ST],[d_.GROUPED_BAR]:[gT,zS],[d_.STACKED_BAR]:[CT,iT]};class cM extends BE{constructor(t){super(t)}getTabularData(t){const e=super.getTabularData(t);return t!==e&&e.forEach((t=>{t.key&&t.key!==t.group&&(t.group=t.key)})),e}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data;return[["Group","Value"],...t.map((t=>[t[n],null===t.value?"&ndash;":t.value.toLocaleString()]))]}sanitize(t){return this.getTabularData(t).sort(((t,e)=>e.value-t.value))}}class uM extends HO{constructor(t,e,n=!1){super(t,e),this.model=new cM(this.services),!n&&(this.model.setOptions(sb(ME.pieChart,e.options)),this.init(t,e))}getComponents(){const t=[new uT(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.PIE})];return this.getChartComponents(t)}}class hM extends BE{constructor(t){super(t)}getDataGroups(){return super.getDataGroups().filter((t=>"delta"!==t.name))}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data;return[["Group","Value"],...t.map((t=>[t[n],null===t.value?"&ndash;":t.value.toLocaleString()]))]}}class dM extends jO{constructor(t){super(t),this.axisFlavor=y_.HOVERABLE,this._colorScale=void 0,this._domains=[],this._ranges=[],this._matrix={};const e=hb(this.getOptions(),"axes");if(hb(e,"left","scaleType")&&hb(e,"left","scaleType")!==Xy.LABELS||hb(e,"right","scaleType")&&hb(e,"right","scaleType")!==Xy.LABELS||hb(e,"top","scaleType")&&hb(e,"top","scaleType")!==Xy.LABELS||hb(e,"bottom","scaleType")&&hb(e,"bottom","scaleType")!==Xy.LABELS)throw Error("Heatmap only supports label scaletypes.")}getValueDomain(){const t=c(this.getDisplayData(),(t=>t.value)),e=Ja().domain(t).nice().domain();if(e[0]>0)e[0]=0;else if(0===e[0]&&0===e[1])return[0,1];return e[0]<0&&e[1]>0&&(Math.abs(e[0])>e[1]?e[1]=Math.abs(e[0]):e[0]=-e[1]),e}getFillColor(t){return this._colorScale(t)}getUniqueDomain(){if(iy(this._domains)){const t=this.getDisplayData(),{cartesianScales:e}=this.services,n=e.getDomainIdentifier(),r=e.getMainXAxisPosition(),i=e.getCustomDomainValuesByposition(r);if(i)return i;this._domains=Array.from(new Set(t.map((t=>t[n]))))}return this._domains}getUniqueRanges(){if(iy(this._ranges)){const t=this.getDisplayData(),{cartesianScales:e}=this.services,n=e.getRangeIdentifier(),r=e.getMainYAxisPosition(),i=e.getCustomDomainValuesByposition(r);if(i)return i;this._ranges=Array.from(new Set(t.map((t=>t[n]))))}return this._ranges}getMatrix(){if(iy(this._matrix)){const t=this.getUniqueDomain(),e=this.getUniqueRanges(),n=this.services.cartesianScales.getDomainIdentifier(),r=this.services.cartesianScales.getRangeIdentifier(),i={};e.forEach((t=>{i[t]={value:null,index:-1}})),t.forEach((t=>{this._matrix[t]=qm(i)})),this.getDisplayData().forEach(((t,e)=>{this._matrix[t[n]][t[r]]={value:t.value,index:e}}))}return this._matrix}setData(t){const e=this.sanitize(qm(t)),n=this.generateDataGroups(e);return this.set({data:e,dataGroups:n}),this._domains=[],this._ranges=[],this._matrix={},e}getMatrixAsArray(){iy(this._matrix)&&this.getMatrix();const t=this.getUniqueDomain(),e=this.getUniqueRanges(),n=this.services.cartesianScales.getDomainIdentifier(),r=this.services.cartesianScales.getRangeIdentifier(),i=[];return t.forEach((t=>{e.forEach((e=>{const s={value:this._matrix[t][e].value,index:this._matrix[t][e].index};s[n]=t,s[r]=e,i.push(s)}))})),i}getTabularDataArray(){const t=this.getDisplayData(),{primaryDomain:e,primaryRange:n}=this.assignRangeAndDomains();return[[e.label,n.label,"Value"],...t.map((t=>[null===t[e.identifier]?"&ndash;":t[e.identifier],null===t[n.identifier]?"&ndash;":t[n.identifier].toLocaleString(),t.value]))]}getColorClassName(t){return`${t.originalClassName} ${this._colorScale(t.value)}`}setColorClassNames(){const t=this.getOptions(),e=hb(t,"color","gradient","colors"),n=!iy(e);let r=hb(t,"color","pairing","option");const i=this.getValueDomain(),s=i[0]<0&&i[1]>0?"diverge":"mono";(r<1&&r>4&&"mono"===s||r<1&&r>2&&"diverge"===s)&&(r=1);const o=n?e:[];if(!n){const t="diverge"===s?17:11;for(let e=1;e<t+1;e++)o.push(`fill-${s}-${r}-${e}`)}this._colorScale=cl().domain(i).range(o);const a=hb(this.getOptions(),"color");this._colorScale=YS(this.getDisplayData(),a)}}class pM extends jO{getTabularDataArray(){const t=this.getOptions(),{groupMapsTo:e}=t.data,n=this.getBinnedStackedData();return[[xf(t,"bins.rangeLabel")||"Range",...n.map((t=>xf(t,`0.${e}`)))],...xf(n,0).map(((t,r)=>[`${xf(t,"data.x0")} – ${xf(t,"data.x1")}`,...n.map((t=>xf(t[r],`data.${xf(t[r],e)}`)))]))]}}class fM extends BE{constructor(t){super(t)}getMaximumDomain(t){return t.reduce(((t,e)=>t+e.value),0)}getFillColor(t){const e=this.getOptions(),n=hb(e,"color","scale"),r=this.getStatus();return n||!r?super.getFillColor(t):null}getStatus(){const t=this.getOptions(),e=hb(this.getDisplayData()),n=(null==e?void 0:e.reduce(((t,e)=>t+e.value),0))??0,r=hb(t,"meter","proportional")?n:n>100?100:n,i=hb(t,"meter","status","ranges");if(i){const t=i.filter((t=>t.range[0]<=r&&r<=t.range[1]));if(t.length>0)return t[0].status}return null}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getStatus(),i=hb(e,"meter","proportional");let s,o=[];if(null===i){s=100;const e=t[0];o=[["Group","Value",...r?["Status"]:[]],[e[n],e.value,...r?[r]:[]]]}else{const e=hb(i,"total");s=e||this.getMaximumDomain(t),o=[["Group","Value","Percentage of total"],...t.map((t=>[t[n],t.value,(t.value/s*100).toFixed(2)+" %"]))]}return o}}class gM extends jO{constructor(t){super(t)}getTabularDataArray(){const t=this.getOptions(),e=this.getGroupedData(),{angle:n,value:r}=hb(t,"radar","axes"),i=hb(e,"0","data").map((t=>t[n]));return[["Group",...i],...e.map((t=>[t.name,...i.map(((e,n)=>null!==hb(t,"data",n,r)?hb(t,"data",n,r).toLocaleString():"&ndash;"))]))]}}class mM extends BE{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),e=[["Child","Parent"]];return t.forEach((t=>{this.getChildrenDatums(t,e),e.push([t.name,"&ndash;"])})),e}getChildrenDatums(t,e=[]){t.children&&t.children.length>0&&t.children.forEach((n=>{this.getChildrenDatums(n,e),e.push([n.name,t.name])}))}}class vM extends BE{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),e=[["Child","Group","Value"]];return t.forEach((t=>{Array.isArray(t.children)?t.children.forEach((n=>{e.push([n.name,t.name,n.value])})):null!==hb(t.name)&&hb(t.value)&&e.push(["–",t.name,t.value])})),e}}class yM extends BE{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),e=this.getOptions(),{fontSizeMapsTo:n,wordMapsTo:r}=e.wordCloud,{groupMapsTo:i}=e.data;return[[e.tooltip.wordLabel,"Group",e.tooltip.valueLabel],...t.map((t=>[t[r],t[i],t[n]]))]}}e.Alignments=Qy,e.AlluvialChart=class extends HO{constructor(t,e){super(t,e),this.model=new GO(this.services),this.model.setOptions(sb(ME.alluvialChart,e.options)),this.init(t,e)}getComponents(){const t=[new ES(this.model,this.services)];return this.getChartComponents(t,{excludeLegend:!0})}},e.AreaChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(qm(ME.areaChart),e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new NS(this.model,this.services),new PS(this.model,this.services),new IS(this.model,this.services),new BS(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.AreaEvent=wy,e.ArrowDirections=c_,e.AxisEvent=Ey,e.AxisFlavor=y_,e.AxisPositions=Wy,e.AxisTitleOrientations=f_,e.BarEvent=My,e.BoxplotChart=class extends RS{constructor(t,e){super(t,e),this.model=new jS(this.services),this.model.setOptions(sb(ME.boxplotChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new GS(this.model,this.services),new zS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.VERT_OR_HORIZ})];return this.getAxisChartComponents(t,{legend:{enabled:!1}})}},e.BoxplotEvent=Cy,e.BubbleChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.bubbleChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new NS(this.model,this.services),new FS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.BulletChart=class extends RS{constructor(t,e){super(t,e),this.model=new WS(this.services),this.model.setOptions(sb(ME.bulletChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new qS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.CalloutDirections=i_,e.CanvasZoomEvent=xy,e.CartesianOrientations=Yy,e.ChartEvent=gy,e.ChartTheme=zy,e.ChartTypes=d_,e.CirclePackChart=class extends HO{constructor(t,e){super(t,e),this.model=new aM(this.services),this.model.setOptions(sb(ME.circlePackChart,e.options)),this.init(t,e)}getComponents(){const t=[new lT(this.model,this.services)];return this.getChartComponents(t)}},e.ColorClassNameTypes=Fy,e.ColorLegendType=m_,e.ComboChart=class extends RS{constructor(t,e){super(t,e);const n=sb(ME.comboChart,e.options);e.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),n.comboChartTypes=[{type:d_.LINE,correspondingDatasets:[]}]),this.model.setOptions(n),this.init(t,e)}getGraphComponents(){const{comboChartTypes:t}=this.model.getOptions();let e=0;return Tf(t.map((t=>{const n=t.type;let r;if("string"==typeof t.type){if(!Object.keys(lM).includes(t.type))return console.error(`Invalid chart type "${t.type}" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.`),null;let n=!1;const i=`${Mg(t.type)}Chart`;return r=ay({},ME[i],this.model.getOptions(),t.options),t.type===d_.STACKED_AREA&&(n=!0),lM[t.type].map((i=>new i(this.model,this.services,{groups:t.correspondingDatasets,id:e++,options:r,stacked:n})))}return r=ay({},this.model.getOptions(),t.options),new n(this.model,this.services,{groups:t.correspondingDatasets,id:e++,options:r})})).filter((t=>null!==t)))}getComponents(){const{comboChartTypes:t}=this.model.getOptions(),e=t.some((t=>t.type===d_.STACKED_BAR||t.type===d_.STACKED_AREA)),n=[new $S(this.model,this.services),new kS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.GRID}),...e?[]:[new NS(this.model,this.services)],...this.getGraphComponents()];return this.getAxisChartComponents(n)}},e.DividerStatus=v_,e.DominantBaseline=a_,e.DonutChart=class extends uM{constructor(t,e){super(t,e,!0),this.model.setOptions(sb(ME.donutChart,e.options)),this.init(t,e)}getComponents(){const t=[new hT(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.DONUT})];return this.getChartComponents(t)}},e.ExperimentalChoroplethChart=class extends HO{constructor(t,e){super(t,e),this.model=new XS(this.services),this.model.setOptions(sb(ME.choroplethChart,e.options)),this.init(t,e)}getChartComponents(t,e){const n=this.model.getOptions(),r=hb(n,"toolbar","enabled"),i=!!this.model.getOptions().title,s={id:"title",components:[new SO(this.model,this.services)],growth:n_.STRETCH},o={id:"toolbar",components:[new Aw(this.model,this.services)],growth:n_.PREFERRED},a={id:"header",components:[new Lw(this.model,this.services,[s,...r?[o]:[]],{direction:e_.ROW,alignItems:r_.CENTER})],growth:n_.PREFERRED},l={id:"legend",components:[new sT(this.model,this.services,{chartType:"choropleth"})],growth:n_.PREFERRED,renderType:Gy.SVG},c={id:"graph-frame",components:t,growth:n_.STRETCH,renderType:Gy.SVG},u=!1!==hb(e,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled,h=e_.COLUMN_REVERSE,d={id:"spacer",components:[new Rw(this.model,this.services,{size:15})],growth:n_.PREFERRED},p={id:"full-frame",components:[new Lw(this.model,this.services,[...u?[l]:[],...u?[d]:[],c],{direction:h})],growth:n_.STRETCH},f=[];if(i||r){f.push(a);const t={id:"spacer",components:[new Rw(this.model,this.services,r?{size:15}:void 0)],growth:n_.PREFERRED};f.push(t)}return f.push(p),[new PO(this.model,this.services),new OO(this.model,this.services),new Lw(this.model,this.services,f,{direction:e_.COLUMN})]}getComponents(){const t=[new oM(this.model,this.services)];return this.getChartComponents(t)}},e.GaugeChart=class extends HO{constructor(t,e){super(t,e),this.model=new hM(this.services),this.model.setOptions(sb(ME.gaugeChart,e.options)),this.init(t,e)}getComponents(){const t=[new fT(this.model,this.services)];return this.getChartComponents(t)}},e.GaugeEvent=Ty,e.GaugeTypes=l_,e.GroupedBarChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.groupedBarChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new gT(this.model,this.services),new zS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.VERT_OR_HORIZ})];return this.getAxisChartComponents(t)}},e.HeatmapChart=class extends RS{constructor(t,e){super(t,e),this.model=new dM(this.services),this.model.setOptions(sb(ME.heatmapChart,e.options)),this.init(t,e)}getAxisChartComponents(t,e){const n=this.model.getOptions(),r=hb(n,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const i=!!this.model.getOptions().title,s={id:"title",components:[new SO(this.model,this.services)],growth:n_.STRETCH},o={id:"toolbar",components:[new Aw(this.model,this.services)],growth:n_.PREFERRED},a={id:"header",components:[new Lw(this.model,this.services,[s,...r?[o]:[]],{direction:e_.ROW,alignItems:r_.CENTER})],growth:n_.PREFERRED},l={id:"legend",components:[new sT(this.model,this.services,{chartType:"heatmap"})],growth:n_.PREFERRED,renderType:Gy.SVG},c={id:"graph-frame",components:t,growth:n_.STRETCH,renderType:Gy.SVG},u=!1!==hb(e,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled,h=e_.COLUMN_REVERSE,d={id:"spacer",components:[new Rw(this.model,this.services,{size:15})],growth:n_.PREFERRED},p={id:"full-frame",components:[new Lw(this.model,this.services,[...u?[l]:[],...u?[d]:[],c],{direction:h})],growth:n_.STRETCH},f=[];if(i||r){f.push(a);const t={id:"spacer",components:[new Rw(this.model,this.services,r?{size:15}:void 0)],growth:n_.PREFERRED};f.push(t)}return f.push(p),[new CS(this.model,this.services),new OO(this.model,this.services),new Lw(this.model,this.services,f,{direction:e_.COLUMN})]}getComponents(){const t=[new $S(this.model,this.services),new mT(this.model,this.services)];return this.getAxisChartComponents(t)}},e.HistogramChart=class extends RS{constructor(t,e){super(t,e),this.model=new pM(this.services),this.model.setOptions(sb(ME.histogramChart,e.options)),this.init(t,e),this.update()}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new rT(this.model,this.services),new vT(this.model,this.services)];return this.getAxisChartComponents(t)}},e.LayoutAlignItems=r_,e.LayoutDirection=e_,e.LayoutGrowth=n_,e.LegendItemType=g_,e.LegendOrientations=Jy,e.LegendPositions=Ky,e.LineChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.lineChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new NS(this.model,this.services),new PS(this.model,this.services),new BS(this.model,this.services,{handleThresholds:!0}),new TT(this.model,this.services),new zS(this.model,this.services)];return this.getAxisChartComponents(t)}},e.LineEvent=Dy,e.LollipopChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.lollipopChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new NS(this.model,this.services),new yT(this.model,this.services),new BS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.MeterChart=class extends HO{constructor(t,e){var n;super(t,e),this.model=new fM(this.services);const r=null!=(n=e.options.meter)&&n.proportional?ay(qm(ME.proportionalMeterChart),e.options):ay(qm(ME.meterChart),e.options);this.model.setOptions(r),this.init(t,e)}getComponents(){const t=[...hb(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new oT(this.model,this.services)],growth:n_.STRETCH,renderType:Gy.SVG},{id:"spacer",components:[new Rw(this.model,this.services,{size:8})],growth:n_.STRETCH}]:[],{id:"meter-graph",components:[new _T(this.model,this.services)],growth:n_.STRETCH,renderType:Gy.SVG}],e=[new Lw(this.model,this.services,t,{direction:e_.COLUMN})];return this.getChartComponents(e,{graphFrameRenderType:Gy.HTML})}},e.ModalEvent=my,e.ModelEvent=vy,e.PieChart=uM,e.PieEvent=Sy,e.Projection=__,e.RadarChart=class extends HO{constructor(t,e){super(t,e),this.model=new gM(this.services),this.model.setOptions(sb(ME.radarChart,e.options)),this.init(t,e)}getComponents(){const t=[new OT(this.model,this.services)];return this.getChartComponents(t)}},e.RadarEvent=Ly,e.RenderTypes=Gy,e.ScaleTypes=Xy,e.ScatterChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.scatterChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new NS(this.model,this.services),new BS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.ScatterEvent=Ay,e.SimpleBarChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.simpleBarChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new ST(this.model,this.services),new zS(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.VERT_OR_HORIZ})];return this.getAxisChartComponents(t)}},e.Skeletons=s_,e.StackedAreaChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.stackedAreaChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new iT(this.model,this.services),new MT(this.model,this.services),new PS(this.model,this.services,{stacked:!0}),new AT(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new HS(this.model,this.services,{skeleton:s_.GRID})];return this.getAxisChartComponents(t)}},e.StackedBarChart=class extends RS{constructor(t,e){super(t,e),this.model.setOptions(sb(ME.stackedBarChart,e.options)),this.init(t,e)}getComponents(){const t=[new $S(this.model,this.services),new kS(this.model,this.services),new iT(this.model,this.services),new CT(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.VERT_OR_HORIZ}),new zS(this.model,this.services)];return this.getAxisChartComponents(t)}},e.Statuses=u_,e.TextAnchor=o_,e.ThresholdEvent=Py,e.TickRotations=h_,e.ToolbarControlTypes=p_,e.TooltipEvent=Iy,e.TreeChart=class extends HO{constructor(t,e){super(t,e),this.model=new mM(this.services),this.model.setOptions(sb(ME.treeChart,e.options)),this.init(t,e)}getComponents(){const t=[new DT(this.model,this.services)];return this.getChartComponents(t,{excludeLegend:!0})}},e.TreeEvent=Ry,e.TreeTypes=t_,e.TreemapChart=class extends HO{constructor(t,e){super(t,e),this.model=new vM(this.services),this.model.setOptions(sb(ME.treemapChart,e.options)),this.init(t,e)}getComponents(){const t=[new IT(this.model,this.services)];return this.getChartComponents(t)}},e.TreemapEvent=ky,e.TruncationTypes=Zy,e.WordCloudChart=class extends HO{constructor(t,e){super(t,e),this.model=new yM(this.services),this.model.setOptions(sb(ME.wordCloudChart,e.options)),this.init(t,e)}getComponents(){const t=[new iM(this.model,this.services),new HS(this.model,this.services,{skeleton:s_.PIE})];return this.getChartComponents(t)}},e.WordCloudEvent=Oy,e.ZoomBarTypes=qy,e.ZoomDomainEvent=by,e.ZoombarEvent=_y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(e)},5508:(t,e,n)=>{"use strict";n.d(e,{iA:()=>a});var r,i=n(7900),s=n.n(i),o=n(9703);const a=s().forwardRef((function(t,e){let{children:n,size:i=16,...a}=t;return s().createElement(o.I,{width:i,height:i,ref:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...a},r||(r=s().createElement("path",{d:"M29,5a2,2,0,0,0-2-2H5A2,2,0,0,0,3,5V27a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2ZM27,5V9H5V5Zm0,22H5V23H27Zm0-6H5V17H27Zm0-6H5V11H27Z"})),n)}))}}]);